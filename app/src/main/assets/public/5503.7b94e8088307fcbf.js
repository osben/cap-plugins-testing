"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5503],{5503:(Sa,En,xr)=>{xr.r(En),xr.d(En,{jeep_sqlite:()=>Si});var F=xr(1670),$t=xr(1569);const cr=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function xn(){throw new Error("setTimeout has not been defined")}function Sn(){throw new Error("clearTimeout has not been defined")}var jt=xn,Nt=Sn;function kn(n){if(jt===setTimeout)return setTimeout(n,0);if((jt===xn||!jt)&&setTimeout)return jt=setTimeout,setTimeout(n,0);try{return jt(n,0)}catch{try{return jt.call(null,n,0)}catch{return jt.call(this,n,0)}}}"function"==typeof cr.setTimeout&&(jt=setTimeout),"function"==typeof cr.clearTimeout&&(Nt=clearTimeout);var zt,wt=[],tr=!1,Sr=-1;function Ci(){!tr||!zt||(tr=!1,zt.length?wt=zt.concat(wt):Sr=-1,wt.length&&Pn())}function Pn(){if(!tr){var n=kn(Ci);tr=!0;for(var t=wt.length;t;){for(zt=wt,wt=[];++Sr<t;)zt&&zt[Sr].run();Sr=-1,t=wt.length}zt=null,tr=!1,function Ni(n){if(Nt===clearTimeout)return clearTimeout(n);if((Nt===Sn||!Nt)&&clearTimeout)return Nt=clearTimeout,clearTimeout(n);try{return Nt(n)}catch{try{return Nt.call(null,n)}catch{return Nt.call(this,n)}}}(n)}}function Tn(n,t){this.fun=n,this.array=t}function Ut(){}Tn.prototype.run=function(){this.fun.apply(null,this.array)};var Gi=Ut,Hi=Ut,Vi=Ut,Yi=Ut,Ki=Ut,Qi=Ut,Ji=Ut,rr=cr.performance||{},ns=rr.now||rr.mozNow||rr.msNow||rr.oNow||rr.webkitNow||function(){return(new Date).getTime()},ss=new Date,Et={nextTick:function Bi(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];wt.push(new Tn(n,t)),1===wt.length&&!tr&&kn(Pn)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Gi,addListener:Hi,once:Vi,off:Yi,removeListener:Ki,removeAllListeners:Qi,emit:Ji,binding:function Xi(n){throw new Error("process.binding is not supported")},cwd:function es(){return"/"},chdir:function ts(n){throw new Error("process.chdir is not supported")},umask:function rs(){return 0},hrtime:function is(n){var t=.001*ns.call(rr),e=Math.floor(t),r=Math.floor(t%1*1e9);return n&&(e-=n[0],(r-=n[1])<0&&(e--,r+=1e9)),[e,r]},platform:"browser",release:{},config:{},uptime:function os(){return(new Date-ss)/1e3}},pt=[],at=[],us=typeof Uint8Array<"u"?Uint8Array:Array,Xr=!1;function Dn(){Xr=!0;for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;t<64;++t)pt[t]=n[t],at[n.charCodeAt(t)]=t;at["-".charCodeAt(0)]=62,at["_".charCodeAt(0)]=63}function ls(n){return pt[n>>18&63]+pt[n>>12&63]+pt[n>>6&63]+pt[63&n]}function fs(n,t,e){for(var i=[],s=t;s<e;s+=3)i.push(ls((n[s]<<16)+(n[s+1]<<8)+n[s+2]));return i.join("")}function kr(n,t,e,r,i){var s,o,c=8*i-r-1,f=(1<<c)-1,u=f>>1,v=-7,m=e?i-1:0,b=e?-1:1,y=n[t+m];for(m+=b,s=y&(1<<-v)-1,y>>=-v,v+=c;v>0;s=256*s+n[t+m],m+=b,v-=8);for(o=s&(1<<-v)-1,s>>=-v,v+=r;v>0;o=256*o+n[t+m],m+=b,v-=8);if(0===s)s=1-u;else{if(s===f)return o?NaN:1/0*(y?-1:1);o+=Math.pow(2,r),s-=u}return(y?-1:1)*o*Math.pow(2,s-r)}function On(n,t,e,r,i,s){var o,c,f,u=8*s-i-1,v=(1<<u)-1,m=v>>1,b=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:s-1,x=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,o=v):(o=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-o))<1&&(o--,f*=2),(t+=o+m>=1?b/f:b*Math.pow(2,1-m))*f>=2&&(o++,f/=2),o+m>=v?(c=0,o=v):o+m>=1?(c=(t*f-1)*Math.pow(2,i),o+=m):(c=t*Math.pow(2,m-1)*Math.pow(2,i),o=0));i>=8;n[e+y]=255&c,y+=x,c/=256,i-=8);for(o=o<<i|c,u+=i;u>0;n[e+y]=255&o,y+=x,o/=256,u-=8);n[e+y-x]|=128*g}var hs={}.toString,Rn=Array.isArray||function(n){return"[object Array]"==hs.call(n)};function en(){return ie.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function xt(n,t){if(en()<t)throw new RangeError("Invalid typed array length");return ie.TYPED_ARRAY_SUPPORT?(n=new Uint8Array(t)).__proto__=ie.prototype:(null===n&&(n=new ie(t)),n.length=t),n}function ie(n,t,e){if(!(ie.TYPED_ARRAY_SUPPORT||this instanceof ie))return new ie(n,t,e);if("number"==typeof n){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return tn(this,n)}return In(this,n,t,e)}function In(n,t,e,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?function ys(n,t,e,r){if(e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),ie.TYPED_ARRAY_SUPPORT?(n=t).__proto__=ie.prototype:n=rn(n,t),n}(n,t,e,r):"string"==typeof t?function ps(n,t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!ie.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var r=0|Nn(t,e),i=(n=xt(n,r)).write(t,e);return i!==r&&(n=n.slice(0,i)),n}(n,t,e):function _s(n,t){if(yt(t)){var e=0|nn(t.length);return 0===(n=xt(n,e)).length||t.copy(n,0,0,e),n}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function Bs(n){return n!=n}(t.length)?xt(n,0):rn(n,t);if("Buffer"===t.type&&Rn(t.data))return rn(n,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(n,t)}function jn(n){if("number"!=typeof n)throw new TypeError('"size" argument must be a number');if(n<0)throw new RangeError('"size" argument must not be negative')}function tn(n,t){if(jn(t),n=xt(n,t<0?0:0|nn(t)),!ie.TYPED_ARRAY_SUPPORT)for(var e=0;e<t;++e)n[e]=0;return n}function rn(n,t){var e=t.length<0?0:0|nn(t.length);n=xt(n,e);for(var r=0;r<e;r+=1)n[r]=255&t[r];return n}function nn(n){if(n>=en())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+en().toString(16)+" bytes");return 0|n}function yt(n){return!(null==n||!n._isBuffer)}function Nn(n,t){if(yt(n))return n.length;if(typeof ArrayBuffer<"u"&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(n)||n instanceof ArrayBuffer))return n.byteLength;"string"!=typeof n&&(n=""+n);var e=n.length;if(0===e)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return Dr(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return qn(n).length;default:if(r)return Dr(n).length;t=(""+t).toLowerCase(),r=!0}}function vs(n,t,e){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===e||e>this.length)&&(e=this.length),e<=0)||(e>>>=0)<=(t>>>=0))return"";for(n||(n="utf8");;)switch(n){case"hex":return Ds(this,t,e);case"utf8":case"utf-8":return Ln(this,t,e);case"ascii":return Ps(this,t,e);case"latin1":case"binary":return Ts(this,t,e);case"base64":return Ss(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return As(this,t,e);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),r=!0}}function Mt(n,t,e){var r=n[t];n[t]=n[e],n[e]=r}function Cn(n,t,e,r,i){if(0===n.length)return-1;if("string"==typeof e?(r=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:n.length-1),e<0&&(e=n.length+e),e>=n.length){if(i)return-1;e=n.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof t&&(t=ie.from(t,r)),yt(t))return 0===t.length?-1:Bn(n,t,e,r,i);if("number"==typeof t)return t&=255,ie.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(n,t,e):Uint8Array.prototype.lastIndexOf.call(n,t,e):Bn(n,[t],e,r,i);throw new TypeError("val must be string, number or Buffer")}function Bn(n,t,e,r,i){var u,s=1,o=n.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(n.length<2||t.length<2)return-1;s=2,o/=2,c/=2,e/=2}function f(y,x){return 1===s?y[x]:y.readUInt16BE(x*s)}if(i){var v=-1;for(u=e;u<o;u++)if(f(n,u)===f(t,-1===v?0:u-v)){if(-1===v&&(v=u),u-v+1===c)return v*s}else-1!==v&&(u-=u-v),v=-1}else for(e+c>o&&(e=o-c),u=e;u>=0;u--){for(var m=!0,b=0;b<c;b++)if(f(n,u+b)!==f(t,b)){m=!1;break}if(m)return u}return-1}function gs(n,t,e,r){e=Number(e)||0;var i=n.length-e;r?(r=Number(r))>i&&(r=i):r=i;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var o=0;o<r;++o){var c=parseInt(t.substr(2*o,2),16);if(isNaN(c))return o;n[e+o]=c}return o}function bs(n,t,e,r){return Ar(Dr(t,n.length-e),n,e,r)}function Fn(n,t,e,r){return Ar(function Ns(n){for(var t=[],e=0;e<n.length;++e)t.push(255&n.charCodeAt(e));return t}(t),n,e,r)}function ws(n,t,e,r){return Fn(n,t,e,r)}function Es(n,t,e,r){return Ar(qn(t),n,e,r)}function xs(n,t,e,r){return Ar(function Cs(n,t){for(var e,r,s=[],o=0;o<n.length&&!((t-=2)<0);++o)r=(e=n.charCodeAt(o))>>8,s.push(e%256),s.push(r);return s}(t,n.length-e),n,e,r)}function Ss(n,t,e){return function An(n){Xr||Dn();for(var t,e=n.length,r=e%3,i="",s=[],o=16383,c=0,f=e-r;c<f;c+=o)s.push(fs(n,c,c+o>f?f:c+o));return 1===r?(i+=pt[(t=n[e-1])>>2],i+=pt[t<<4&63],i+="=="):2===r&&(i+=pt[(t=(n[e-2]<<8)+n[e-1])>>10],i+=pt[t>>4&63],i+=pt[t<<2&63],i+="="),s.push(i),s.join("")}(0===t&&e===n.length?n:n.slice(t,e))}function Ln(n,t,e){e=Math.min(n.length,e);for(var r=[],i=t;i<e;){var f,u,v,m,s=n[i],o=null,c=s>239?4:s>223?3:s>191?2:1;if(i+c<=e)switch(c){case 1:s<128&&(o=s);break;case 2:128==(192&(f=n[i+1]))&&(m=(31&s)<<6|63&f)>127&&(o=m);break;case 3:u=n[i+2],128==(192&(f=n[i+1]))&&128==(192&u)&&(m=(15&s)<<12|(63&f)<<6|63&u)>2047&&(m<55296||m>57343)&&(o=m);break;case 4:u=n[i+2],v=n[i+3],128==(192&(f=n[i+1]))&&128==(192&u)&&128==(192&v)&&(m=(15&s)<<18|(63&f)<<12|(63&u)<<6|63&v)>65535&&m<1114112&&(o=m)}null===o?(o=65533,c=1):o>65535&&(r.push((o-=65536)>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=c}return function ks(n){var t=n.length;if(t<=$n)return String.fromCharCode.apply(String,n);for(var e="",r=0;r<t;)e+=String.fromCharCode.apply(String,n.slice(r,r+=$n));return e}(r)}ie.TYPED_ARRAY_SUPPORT=void 0===cr.TYPED_ARRAY_SUPPORT||cr.TYPED_ARRAY_SUPPORT,ie.poolSize=8192,ie._augment=function(n){return n.__proto__=ie.prototype,n},ie.from=function(n,t,e){return In(null,n,t,e)},ie.TYPED_ARRAY_SUPPORT&&(ie.prototype.__proto__=Uint8Array.prototype,ie.__proto__=Uint8Array),ie.alloc=function(n,t,e){return function ms(n,t,e,r){return jn(t),t<=0?xt(n,t):void 0!==e?"string"==typeof r?xt(n,t).fill(e,r):xt(n,t).fill(e):xt(n,t)}(null,n,t,e)},ie.allocUnsafe=function(n){return tn(null,n)},ie.allocUnsafeSlow=function(n){return tn(null,n)},ie.isBuffer=function Fs(n){return null!=n&&(!!n._isBuffer||Zn(n)||function Ls(n){return"function"==typeof n.readFloatLE&&"function"==typeof n.slice&&Zn(n.slice(0,0))}(n))},ie.compare=function(t,e){if(!yt(t)||!yt(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,i=e.length,s=0,o=Math.min(r,i);s<o;++s)if(t[s]!==e[s]){r=t[s],i=e[s];break}return r<i?-1:i<r?1:0},ie.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ie.concat=function(t,e){if(!Rn(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return ie.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var i=ie.allocUnsafe(e),s=0;for(r=0;r<t.length;++r){var o=t[r];if(!yt(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,s),s+=o.length}return i},ie.byteLength=Nn,ie.prototype._isBuffer=!0,ie.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Mt(this,e,e+1);return this},ie.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Mt(this,e,e+3),Mt(this,e+1,e+2);return this},ie.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Mt(this,e,e+7),Mt(this,e+1,e+6),Mt(this,e+2,e+5),Mt(this,e+3,e+4);return this},ie.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Ln(this,0,t):vs.apply(this,arguments)},ie.prototype.equals=function(t){if(!yt(t))throw new TypeError("Argument must be a Buffer");return this===t||0===ie.compare(this,t)},ie.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},ie.prototype.compare=function(t,e,r,i,s){if(!yt(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===s&&(s=this.length),e<0||r>t.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&e>=r)return 0;if(i>=s)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(s>>>=0)-(i>>>=0),c=(r>>>=0)-(e>>>=0),f=Math.min(o,c),u=this.slice(i,s),v=t.slice(e,r),m=0;m<f;++m)if(u[m]!==v[m]){o=u[m],c=v[m];break}return o<c?-1:c<o?1:0},ie.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},ie.prototype.indexOf=function(t,e,r){return Cn(this,t,e,r,!0)},ie.prototype.lastIndexOf=function(t,e,r){return Cn(this,t,e,r,!1)},ie.prototype.write=function(t,e,r,i){if(void 0===e)i="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)i=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var s=this.length-e;if((void 0===r||r>s)&&(r=s),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return gs(this,t,e,r);case"utf8":case"utf-8":return bs(this,t,e,r);case"ascii":return Fn(this,t,e,r);case"latin1":case"binary":return ws(this,t,e,r);case"base64":return Es(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xs(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},ie.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $n=4096;function Ps(n,t,e){var r="";e=Math.min(n.length,e);for(var i=t;i<e;++i)r+=String.fromCharCode(127&n[i]);return r}function Ts(n,t,e){var r="";e=Math.min(n.length,e);for(var i=t;i<e;++i)r+=String.fromCharCode(n[i]);return r}function Ds(n,t,e){var r=n.length;(!t||t<0)&&(t=0),(!e||e<0||e>r)&&(e=r);for(var i="",s=t;s<e;++s)i+=js(n[s]);return i}function As(n,t,e){for(var r=n.slice(t,e),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function Ke(n,t,e){if(n%1!=0||n<0)throw new RangeError("offset is not uint");if(n+t>e)throw new RangeError("Trying to access beyond buffer length")}function it(n,t,e,r,i,s){if(!yt(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(e+r>n.length)throw new RangeError("Index out of range")}function Pr(n,t,e,r){t<0&&(t=65535+t+1);for(var i=0,s=Math.min(n.length-e,2);i<s;++i)n[e+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function Tr(n,t,e,r){t<0&&(t=4294967295+t+1);for(var i=0,s=Math.min(n.length-e,4);i<s;++i)n[e+i]=t>>>8*(r?i:3-i)&255}function zn(n,t,e,r,i,s){if(e+r>n.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function Un(n,t,e,r,i){return i||zn(n,0,e,4),On(n,t,e,r,23,4),e+4}function Mn(n,t,e,r,i){return i||zn(n,0,e,8),On(n,t,e,r,52,8),e+8}ie.prototype.slice=function(t,e){var i,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),ie.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=ie.prototype;else{var s=e-t;i=new ie(s,void 0);for(var o=0;o<s;++o)i[o]=this[o+t]}return i},ie.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||Ke(t,e,this.length);for(var i=this[t],s=1,o=0;++o<e&&(s*=256);)i+=this[t+o]*s;return i},ie.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||Ke(t,e,this.length);for(var i=this[t+--e],s=1;e>0&&(s*=256);)i+=this[t+--e]*s;return i},ie.prototype.readUInt8=function(t,e){return e||Ke(t,1,this.length),this[t]},ie.prototype.readUInt16LE=function(t,e){return e||Ke(t,2,this.length),this[t]|this[t+1]<<8},ie.prototype.readUInt16BE=function(t,e){return e||Ke(t,2,this.length),this[t]<<8|this[t+1]},ie.prototype.readUInt32LE=function(t,e){return e||Ke(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},ie.prototype.readUInt32BE=function(t,e){return e||Ke(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},ie.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||Ke(t,e,this.length);for(var i=this[t],s=1,o=0;++o<e&&(s*=256);)i+=this[t+o]*s;return i>=(s*=128)&&(i-=Math.pow(2,8*e)),i},ie.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||Ke(t,e,this.length);for(var i=e,s=1,o=this[t+--i];i>0&&(s*=256);)o+=this[t+--i]*s;return o>=(s*=128)&&(o-=Math.pow(2,8*e)),o},ie.prototype.readInt8=function(t,e){return e||Ke(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},ie.prototype.readInt16LE=function(t,e){e||Ke(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},ie.prototype.readInt16BE=function(t,e){e||Ke(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},ie.prototype.readInt32LE=function(t,e){return e||Ke(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},ie.prototype.readInt32BE=function(t,e){return e||Ke(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},ie.prototype.readFloatLE=function(t,e){return e||Ke(t,4,this.length),kr(this,t,!0,23,4)},ie.prototype.readFloatBE=function(t,e){return e||Ke(t,4,this.length),kr(this,t,!1,23,4)},ie.prototype.readDoubleLE=function(t,e){return e||Ke(t,8,this.length),kr(this,t,!0,52,8)},ie.prototype.readDoubleBE=function(t,e){return e||Ke(t,8,this.length),kr(this,t,!1,52,8)},ie.prototype.writeUIntLE=function(t,e,r,i){t=+t,e|=0,r|=0,i||it(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,c=0;for(this[e]=255&t;++c<r&&(o*=256);)this[e+c]=t/o&255;return e+r},ie.prototype.writeUIntBE=function(t,e,r,i){t=+t,e|=0,r|=0,i||it(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,c=1;for(this[e+o]=255&t;--o>=0&&(c*=256);)this[e+o]=t/c&255;return e+r},ie.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||it(this,t,e,1,255,0),ie.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},ie.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||it(this,t,e,2,65535,0),ie.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Pr(this,t,e,!0),e+2},ie.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||it(this,t,e,2,65535,0),ie.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Pr(this,t,e,!1),e+2},ie.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||it(this,t,e,4,4294967295,0),ie.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):Tr(this,t,e,!0),e+4},ie.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||it(this,t,e,4,4294967295,0),ie.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Tr(this,t,e,!1),e+4},ie.prototype.writeIntLE=function(t,e,r,i){if(t=+t,e|=0,!i){var s=Math.pow(2,8*r-1);it(this,t,e,r,s-1,-s)}var o=0,c=1,f=0;for(this[e]=255&t;++o<r&&(c*=256);)t<0&&0===f&&0!==this[e+o-1]&&(f=1),this[e+o]=(t/c>>0)-f&255;return e+r},ie.prototype.writeIntBE=function(t,e,r,i){if(t=+t,e|=0,!i){var s=Math.pow(2,8*r-1);it(this,t,e,r,s-1,-s)}var o=r-1,c=1,f=0;for(this[e+o]=255&t;--o>=0&&(c*=256);)t<0&&0===f&&0!==this[e+o+1]&&(f=1),this[e+o]=(t/c>>0)-f&255;return e+r},ie.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||it(this,t,e,1,127,-128),ie.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},ie.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||it(this,t,e,2,32767,-32768),ie.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Pr(this,t,e,!0),e+2},ie.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||it(this,t,e,2,32767,-32768),ie.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Pr(this,t,e,!1),e+2},ie.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||it(this,t,e,4,2147483647,-2147483648),ie.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Tr(this,t,e,!0),e+4},ie.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||it(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),ie.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Tr(this,t,e,!1),e+4},ie.prototype.writeFloatLE=function(t,e,r){return Un(this,t,e,!0,r)},ie.prototype.writeFloatBE=function(t,e,r){return Un(this,t,e,!1,r)},ie.prototype.writeDoubleLE=function(t,e,r){return Mn(this,t,e,!0,r)},ie.prototype.writeDoubleBE=function(t,e,r){return Mn(this,t,e,!1,r)},ie.prototype.copy=function(t,e,r,i){if(r||(r=0),!i&&0!==i&&(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<r&&(i=r),i===r||0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-r&&(i=t.length-e+r);var o,s=i-r;if(this===t&&r<e&&e<i)for(o=s-1;o>=0;--o)t[o+e]=this[o+r];else if(s<1e3||!ie.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+s),e);return s},ie.prototype.fill=function(t,e,r,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===t.length){var s=t.charCodeAt(0);s<256&&(t=s)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!ie.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var c=yt(t)?t:Dr(new ie(t,i).toString()),f=c.length;for(o=0;o<r-e;++o)this[o+e]=c[o%f]}return this};var Os=/[^+\/0-9A-Za-z-_]/g;function js(n){return n<16?"0"+n.toString(16):n.toString(16)}function Dr(n,t){t=t||1/0;for(var e,r=n.length,i=null,s=[],o=0;o<r;++o){if((e=n.charCodeAt(o))>55295&&e<57344){if(!i){if(e>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=e;continue}if(e<56320){(t-=3)>-1&&s.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,e<128){if((t-=1)<0)break;s.push(e)}else if(e<2048){if((t-=2)<0)break;s.push(e>>6|192,63&e|128)}else if(e<65536){if((t-=3)<0)break;s.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return s}function qn(n){return function cs(n){Xr||Dn();var t,e,r,i,s,o,c=n.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=new us(3*c/4-(s="="===n[c-2]?2:"="===n[c-1]?1:0)),r=s>0?c-4:c;var f=0;for(t=0,e=0;t<r;t+=4,e+=3)i=at[n.charCodeAt(t)]<<18|at[n.charCodeAt(t+1)]<<12|at[n.charCodeAt(t+2)]<<6|at[n.charCodeAt(t+3)],o[f++]=i>>16&255,o[f++]=i>>8&255,o[f++]=255&i;return 2===s?(i=at[n.charCodeAt(t)]<<2|at[n.charCodeAt(t+1)]>>4,o[f++]=255&i):1===s&&(i=at[n.charCodeAt(t)]<<10|at[n.charCodeAt(t+1)]<<4|at[n.charCodeAt(t+2)]>>2,o[f++]=i>>8&255,o[f++]=255&i),o}(function Rs(n){if((n=function Is(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}(n).replace(Os,"")).length<2)return"";for(;n.length%4!=0;)n+="=";return n}(n))}function Ar(n,t,e,r){for(var i=0;i<r&&!(i+e>=t.length||i>=n.length);++i)t[i+e]=n[i];return i}function Zn(n){return!!n.constructor&&"function"==typeof n.constructor.isBuffer&&n.constructor.isBuffer(n)}var Ct=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sn(n,t,e){return n(e={path:t,exports:{},require:function(r,i){return St()}},e.exports),e.exports}function Wn(n){if(n.__esModule)return n;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(n).forEach(function(e){var r=Object.getOwnPropertyDescriptor(n,e);Object.defineProperty(t,e,r.get?r:{enumerable:!0,get:function(){return n[e]}})}),t}function St(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function Gn(n,t){for(var e=0,r=n.length-1;r>=0;r--){var i=n[r];"."===i?n.splice(r,1):".."===i?(n.splice(r,1),e++):e&&(n.splice(r,1),e--)}if(t)for(;e--;e)n.unshift("..");return n}var $s=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,on=function(n){return $s.exec(n).slice(1)};function Or(){for(var n="",t=!1,e=arguments.length-1;e>=-1&&!t;e--){var r=e>=0?arguments[e]:"/";if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(n=r+"/"+n,t="/"===r.charAt(0))}return(t?"/":"")+(n=Gn(cn(n.split("/"),function(i){return!!i}),!t).join("/"))||"."}function an(n){var t=un(n),e="/"===Us(n,-1);return!(n=Gn(cn(n.split("/"),function(r){return!!r}),!t).join("/"))&&!t&&(n="."),n&&e&&(n+="/"),(t?"/":"")+n}function un(n){return"/"===n.charAt(0)}function Hn(){return an(cn(Array.prototype.slice.call(arguments,0),function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))}function Vn(n,t){function e(u){for(var v=0;v<u.length&&""===u[v];v++);for(var m=u.length-1;m>=0&&""===u[m];m--);return v>m?[]:u.slice(v,m-v+1)}n=Or(n).substr(1),t=Or(t).substr(1);for(var r=e(n.split("/")),i=e(t.split("/")),s=Math.min(r.length,i.length),o=s,c=0;c<s;c++)if(r[c]!==i[c]){o=c;break}var f=[];for(c=o;c<r.length;c++)f.push("..");return(f=f.concat(i.slice(o))).join("/")}function Qn(n){var t=on(n),e=t[0],r=t[1];return e||r?(r&&(r=r.substr(0,r.length-1)),e+r):"."}function Jn(n,t){var e=on(n)[2];return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e}function Xn(n){return on(n)[3]}function cn(n,t){if(n.filter)return n.filter(t);for(var e=[],r=0;r<n.length;r++)t(n[r],r,n)&&e.push(n[r]);return e}var Us=function(n,t,e){return n.substr(t,e)};const Ms=Object.freeze({__proto__:null,resolve:Or,normalize:an,isAbsolute:un,join:Hn,relative:Vn,sep:"/",delimiter:":",dirname:Qn,basename:Jn,extname:Xn,default:{extname:Xn,basename:Jn,dirname:Qn,sep:"/",delimiter:":",relative:Vn,join:Hn,isAbsolute:un,normalize:an,resolve:Or}}),qs=Object.freeze({__proto__:null,default:{}}),ei=Wn(Ms),ti=Wn(qs);var Zs=sn(function(n,t){var e=void 0,r=function(i){return e||(e=new Promise(function(s,o){var u,c=typeof i<"u"?i:{},f=c.onAbort;c.onAbort=function(a){o(new Error(a)),f&&f(a)},c.postRun=c.postRun||[],c.postRun.push(function(){s(c)}),n=void 0,u||(u=typeof c<"u"?c:{}),u.onRuntimeInitialized=function(){function a(M,ae){switch(typeof ae){case"boolean":wa(M,ae?1:0);break;case"number":va(M,ae);break;case"string":ga(M,ae,-1,-1);break;case"object":if(null===ae)Ii(M);else if(null!=ae.length){var Ee=vr(ae);ba(M,Ee,ae.length,-1),Kr(Ee)}else Jr(M,"Wrong API use : tried to return a value of an unknown type ("+ae+").",-1);break;default:Ii(M)}}function l(M,ae){for(var Ee=[],Te=0;Te<M;Te+=1){var Ie=ne(ae+4*Te,"i32"),ze=da(Ie);if(1===ze||2===ze)Ie=_a(Ie);else if(3===ze)Ie=pa(Ie);else if(4===ze){Ie=ma(ze=Ie),ze=ya(ze);for(var bt=new Uint8Array(Ie),ot=0;ot<Ie;ot+=1)bt[ot]=te[ze+ot];Ie=bt}else Ie=null;Ee.push(Ie)}return Ee}function d(M,ae){this.La=M,this.db=ae,this.Ja=1,this.fb=[]}function k(M,ae){if(this.db=ae,ae=X(M)+1,this.Ya=Xt(ae),null===this.Ya)throw Error("Unable to allocate memory for the SQL string");p(M,Se,this.Ya,ae),this.eb=this.Ya,this.Ua=this.ib=null}function R(M){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),null!=M){var ae=this.filename,Ee="/",Te=ae;if(Ee&&(Ee="string"==typeof Ee?Ee:Yt(Ee),Te=ae?_e(Ee+"/"+ae):Ee),ae=ur(!0,!0),Te=ir(Te,4095&(void 0!==ae?ae:438)|32768,0),M){if("string"==typeof M){Ee=Array(M.length);for(var Ie=0,ze=M.length;Ie<ze;++Ie)Ee[Ie]=M.charCodeAt(Ie);M=Ee}or(Te,146|ae),Ee=lt(Te,577),Qt(Ee,M,0,M.length,0),ar(Ee),or(Te,ae)}}this.handleError(De(this.filename,Y)),this.db=ne(Y,"i32"),Ea(this.db),this.Za={},this.Na={}}var Y=Lt(4),re=u.cwrap,De=re("sqlite3_open","number",["string","number"]),Le=re("sqlite3_close_v2","number",["number"]),Ce=re("sqlite3_exec","number",["number","string","number","number","number"]),Ve=re("sqlite3_changes","number",["number"]),It=re("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Ti=re("sqlite3_sql","string",["number"]),Ko=re("sqlite3_normalized_sql","string",["number"]),Di=re("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Qo=re("sqlite3_bind_text","number",["number","number","number","number","number"]),Ai=re("sqlite3_bind_blob","number",["number","number","number","number","number"]),Jo=re("sqlite3_bind_double","number",["number","number","number"]),Xo=re("sqlite3_bind_int","number",["number","number","number"]),ea=re("sqlite3_bind_parameter_index","number",["number","string"]),ta=re("sqlite3_step","number",["number"]),ra=re("sqlite3_errmsg","string",["number"]),na=re("sqlite3_column_count","number",["number"]),ia=re("sqlite3_data_count","number",["number"]),sa=re("sqlite3_column_double","number",["number","number"]),Oi=re("sqlite3_column_text","string",["number","number"]),oa=re("sqlite3_column_blob","number",["number","number"]),aa=re("sqlite3_column_bytes","number",["number","number"]),ua=re("sqlite3_column_type","number",["number","number"]),ca=re("sqlite3_column_name","string",["number","number"]),la=re("sqlite3_reset","number",["number"]),fa=re("sqlite3_clear_bindings","number",["number"]),ha=re("sqlite3_finalize","number",["number"]),Ri=re("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),da=re("sqlite3_value_type","number",["number"]),ma=re("sqlite3_value_bytes","number",["number"]),pa=re("sqlite3_value_text","string",["number"]),ya=re("sqlite3_value_blob","number",["number"]),_a=re("sqlite3_value_double","number",["number"]),va=re("sqlite3_result_double","",["number","number"]),Ii=re("sqlite3_result_null","",["number"]),ga=re("sqlite3_result_text","",["number","string","number","number"]),ba=re("sqlite3_result_blob","",["number","number","number","number"]),wa=re("sqlite3_result_int","",["number","number"]),Jr=re("sqlite3_result_error","",["number","string","number"]),ji=re("sqlite3_aggregate_context","number",["number","number"]),Ea=re("RegisterExtensionFunctions","number",["number"]);d.prototype.bind=function(M){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(M)?this.xb(M):null==M||"object"!=typeof M||this.yb(M)},d.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var M=ta(this.La);switch(M){case 100:return!0;case 101:return!1;default:throw this.db.handleError(M)}},d.prototype.sb=function(M){return null==M&&(M=this.Ja,this.Ja+=1),sa(this.La,M)},d.prototype.Cb=function(M){if(null==M&&(M=this.Ja,this.Ja+=1),M=Oi(this.La,M),"function"!=typeof BigInt)throw Error("BigInt is not supported");return BigInt(M)},d.prototype.Db=function(M){return null==M&&(M=this.Ja,this.Ja+=1),Oi(this.La,M)},d.prototype.getBlob=function(M){null==M&&(M=this.Ja,this.Ja+=1);var ae=aa(this.La,M);M=oa(this.La,M);for(var Ee=new Uint8Array(ae),Te=0;Te<ae;Te+=1)Ee[Te]=te[M+Te];return Ee},d.prototype.get=function(M,ae){ae=ae||{},null!=M&&this.bind(M)&&this.step(),M=[];for(var Ee=ia(this.La),Te=0;Te<Ee;Te+=1)switch(ua(this.La,Te)){case 1:var Ie=ae.useBigInt?this.Cb(Te):this.sb(Te);M.push(Ie);break;case 2:M.push(this.sb(Te));break;case 3:M.push(this.Db(Te));break;case 4:M.push(this.getBlob(Te));break;default:M.push(null)}return M},d.prototype.getColumnNames=function(){for(var M=[],ae=na(this.La),Ee=0;Ee<ae;Ee+=1)M.push(ca(this.La,Ee));return M},d.prototype.getAsObject=function(M,ae){M=this.get(M,ae),ae=this.getColumnNames();for(var Ee={},Te=0;Te<ae.length;Te+=1)Ee[ae[Te]]=M[Te];return Ee},d.prototype.getSQL=function(){return Ti(this.La)},d.prototype.getNormalizedSQL=function(){return Ko(this.La)},d.prototype.run=function(M){return null!=M&&this.bind(M),this.step(),this.reset()},d.prototype.nb=function(M,ae){null==ae&&(ae=this.Ja,this.Ja+=1);var Ee=vr(M=Qe(M));this.fb.push(Ee),this.db.handleError(Qo(this.La,ae,Ee,M.length-1,0))},d.prototype.wb=function(M,ae){null==ae&&(ae=this.Ja,this.Ja+=1);var Ee=vr(M);this.fb.push(Ee),this.db.handleError(Ai(this.La,ae,Ee,M.length,0))},d.prototype.mb=function(M,ae){null==ae&&(ae=this.Ja,this.Ja+=1),this.db.handleError((M===(0|M)?Xo:Jo)(this.La,ae,M))},d.prototype.zb=function(M){null==M&&(M=this.Ja,this.Ja+=1),Ai(this.La,M,0,0,0)},d.prototype.ob=function(M,ae){switch(null==ae&&(ae=this.Ja,this.Ja+=1),typeof M){case"string":return void this.nb(M,ae);case"number":return void this.mb(M,ae);case"bigint":return void this.nb(M.toString(),ae);case"boolean":return void this.mb(M+0,ae);case"object":if(null===M)return void this.zb(ae);if(null!=M.length)return void this.wb(M,ae)}throw"Wrong API use : tried to bind a value of an unknown type ("+M+")."},d.prototype.yb=function(M){var ae=this;return Object.keys(M).forEach(function(Ee){var Te=ea(ae.La,Ee);0!==Te&&ae.ob(M[Ee],Te)}),!0},d.prototype.xb=function(M){for(var ae=0;ae<M.length;ae+=1)this.ob(M[ae],ae+1);return!0},d.prototype.reset=function(){return this.freemem(),0===fa(this.La)&&0===la(this.La)},d.prototype.freemem=function(){for(var M;void 0!==(M=this.fb.pop());)Kr(M)},d.prototype.free=function(){this.freemem();var M=0===ha(this.La);return delete this.db.Za[this.La],this.La=0,M},k.prototype.next=function(){if(null===this.Ya)return{done:!0};if(null!==this.Ua&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var M=br(),ae=Lt(4);q(Y),q(ae);try{this.db.handleError(Di(this.db.db,this.eb,-1,Y,ae)),this.eb=ne(ae,"i32");var Ee=ne(Y,"i32");return 0===Ee?(this.gb(),{done:!0}):(this.Ua=new d(Ee,this.db),this.db.Za[Ee]=this.Ua,{value:this.Ua,done:!1})}catch(Te){throw this.ib=W(this.eb),this.gb(),Te}finally{wr(M)}},k.prototype.gb=function(){Kr(this.Ya),this.Ya=null},k.prototype.getRemainingSQL=function(){return null!==this.ib?this.ib:W(this.eb)},"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(k.prototype[Symbol.iterator]=function(){return this}),R.prototype.run=function(M,ae){if(!this.db)throw"Database closed";if(ae){M=this.prepare(M,ae);try{M.step()}finally{M.free()}}else this.handleError(Ce(this.db,M,0,0,Y));return this},R.prototype.exec=function(M,ae,Ee){if(!this.db)throw"Database closed";var Te=br(),Ie=null;try{var ze=X(M)+1,bt=Lt(ze);p(M,te,bt,ze);var ot=bt,ft=Lt(4);for(M=[];0!==ne(ot,"i8");){q(Y),q(ft),this.handleError(Di(this.db,ot,-1,Y,ft));var ht=ne(Y,"i32");if(ot=ne(ft,"i32"),0!==ht){for(ze=null,Ie=new d(ht,this),null!=ae&&Ie.bind(ae);Ie.step();)null===ze&&(ze={columns:Ie.getColumnNames(),values:[]},M.push(ze)),ze.values.push(Ie.get(null,Ee));Ie.free()}}return M}catch(Er){throw Ie&&Ie.free(),Er}finally{wr(Te)}},R.prototype.each=function(M,ae,Ee,Te,Ie){"function"==typeof ae&&(Te=Ee,Ee=ae,ae=void 0),M=this.prepare(M,ae);try{for(;M.step();)Ee(M.getAsObject(null,Ie))}finally{M.free()}if("function"==typeof Te)return Te()},R.prototype.prepare=function(M,ae){if(q(Y),this.handleError(It(this.db,M,-1,Y,0)),0===(M=ne(Y,"i32")))throw"Nothing to prepare";var Ee=new d(M,this);return null!=ae&&Ee.bind(ae),this.Za[M]=Ee},R.prototype.iterateStatements=function(M){return new k(M,this)},R.prototype.export=function(){Object.values(this.Za).forEach(function(ae){ae.free()}),Object.values(this.Na).forEach(Rt),this.Na={},this.handleError(Le(this.db));var M=yr(this.filename);return this.handleError(De(this.filename,Y)),this.db=ne(Y,"i32"),M},R.prototype.close=function(){null!==this.db&&(Object.values(this.Za).forEach(function(M){M.free()}),Object.values(this.Na).forEach(Rt),this.Na={},this.handleError(Le(this.db)),qr("/"+this.filename),this.db=null)},R.prototype.handleError=function(M){if(0===M)return null;throw M=ra(this.db),Error(M)},R.prototype.getRowsModified=function(){return Ve(this.db)},R.prototype.create_function=function(M,ae){Object.prototype.hasOwnProperty.call(this.Na,M)&&(Rt(this.Na[M]),delete this.Na[M]);var Ee=Ot(function(Te,Ie,ze){Ie=l(Ie,ze);try{var bt=ae.apply(null,Ie)}catch(ot){return void Jr(Te,ot,-1)}a(Te,bt)},"viii");return this.Na[M]=Ee,this.handleError(Ri(this.db,M,ae.length,1,0,Ee,0,0,0)),this},R.prototype.create_aggregate=function(M,ae){var Ee=ae.init||function(){return null},Te=ae.finalize||function(ft){return ft},Ie=ae.step;if(!Ie)throw"An aggregate function must have a step function in "+M;var ze={};Object.hasOwnProperty.call(this.Na,M)&&(Rt(this.Na[M]),delete this.Na[M]),ae=M+"__finalize",Object.hasOwnProperty.call(this.Na,ae)&&(Rt(this.Na[ae]),delete this.Na[ae]);var bt=Ot(function(ft,ht,Er){var er=ji(ft,1);Object.hasOwnProperty.call(ze,er)||(ze[er]=Ee()),ht=l(ht,Er),ht=[ze[er]].concat(ht);try{ze[er]=Ie.apply(null,ht)}catch(xa){delete ze[er],Jr(ft,xa,-1)}},"viii"),ot=Ot(function(ft){var ht=ji(ft,1);try{var Er=Te(ze[ht])}catch(er){return delete ze[ht],void Jr(ft,er,-1)}a(ft,Er),delete ze[ht]},"vi");return this.Na[M]=bt,this.Na[ae]=ot,this.handleError(Ri(this.db,M,Ie.length-1,1,0,0,bt,ot,0)),this},u.Database=R};var S,E,T,N,$,A,v=Object.assign({},u),m="./this.program",b="object"==typeof window,y="function"==typeof importScripts,x="object"==typeof Et&&"object"==typeof Et.versions&&"string"==typeof Et.versions.node,g="";x?(g=y?ei.dirname(g)+"/":"/Volumes/Development_Lacie/Development/new/jeep-sqlite/node_modules/sql.js/dist/",A=()=>{$||(N=ti,$=ei)},S=function(a,l){return A(),a=$.normalize(a),N.readFileSync(a,l?void 0:"utf8")},T=a=>((a=S(a,!0)).buffer||(a=new Uint8Array(a)),a),E=(a,l,d)=>{A(),a=$.normalize(a),N.readFile(a,function(k,R){k?d(k):l(R.buffer)})},1<Et.argv.length&&(m=Et.argv[1].replace(/\\/g,"/")),Et.argv.slice(2),n.exports=u,u.inspect=function(){return"[Emscripten Module object]"}):(b||y)&&(y?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),g=0!==g.indexOf("blob:")?g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1):"",S=a=>{var l=new XMLHttpRequest;return l.open("GET",a,!1),l.send(null),l.responseText},y&&(T=a=>{var l=new XMLHttpRequest;return l.open("GET",a,!1),l.responseType="arraybuffer",l.send(null),new Uint8Array(l.response)}),E=(a,l,d)=>{var k=new XMLHttpRequest;k.open("GET",a,!0),k.responseType="arraybuffer",k.onload=()=>{200==k.status||0==k.status&&k.response?l(k.response):d()},k.onerror=d,k.send(null)});var Q,H=u.print||console.log.bind(console),U=u.printErr||console.warn.bind(console);Object.assign(u,v),v=null,u.thisProgram&&(m=u.thisProgram),u.wasmBinary&&(Q=u.wasmBinary),"object"!=typeof WebAssembly&&He("no native wasm support detected");var G,ke,te,Se,ce,fe,z,Z,xe,ue=!1,ge=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function O(a,l,d){var k=l+d;for(d=l;a[d]&&!(d>=k);)++d;if(16<d-l&&a.buffer&&ge)return ge.decode(a.subarray(l,d));for(k="";l<d;){var R=a[l++];if(128&R){var Y=63&a[l++];if(192==(224&R))k+=String.fromCharCode((31&R)<<6|Y);else{var re=63&a[l++];65536>(R=224==(240&R)?(15&R)<<12|Y<<6|re:(7&R)<<18|Y<<12|re<<6|63&a[l++])?k+=String.fromCharCode(R):(R-=65536,k+=String.fromCharCode(55296|R>>10,56320|1023&R))}}else k+=String.fromCharCode(R)}return k}function W(a,l){return a?O(Se,a,l):""}function p(a,l,d,k){if(!(0<k))return 0;var R=d;k=d+k-1;for(var Y=0;Y<a.length;++Y){var re=a.charCodeAt(Y);if(55296<=re&&57343>=re&&(re=65536+((1023&re)<<10)|1023&a.charCodeAt(++Y)),127>=re){if(d>=k)break;l[d++]=re}else{if(2047>=re){if(d+1>=k)break;l[d++]=192|re>>6}else{if(65535>=re){if(d+2>=k)break;l[d++]=224|re>>12}else{if(d+3>=k)break;l[d++]=240|re>>18,l[d++]=128|re>>12&63}l[d++]=128|re>>6&63}l[d++]=128|63&re}}return l[d]=0,d-R}function X(a){for(var l=0,d=0;d<a.length;++d){var k=a.charCodeAt(d);127>=k?l++:2047>=k?l+=2:55296<=k&&57343>=k?(l+=4,++d):l+=3}return l}function ve(){var a=G.buffer;ke=a,u.HEAP8=te=new Int8Array(a),u.HEAP16=ce=new Int16Array(a),u.HEAP32=fe=new Int32Array(a),u.HEAPU8=Se=new Uint8Array(a),u.HEAPU16=new Uint16Array(a),u.HEAPU32=z=new Uint32Array(a),u.HEAPF32=Z=new Float32Array(a),u.HEAPF64=xe=new Float64Array(a)}var pe,qe=[],Ge=[],Re=[];function je(){var a=u.preRun.shift();qe.unshift(a)}var h,w,j,Me=0,Ue=null;function He(a){throw u.onAbort&&u.onAbort(a),U(a="Aborted("+a+")"),ue=!0,new WebAssembly.RuntimeError(a+". Build with -sASSERTIONS for more info.")}function Xe(){return h.startsWith("data:application/octet-stream;base64,")}if(h="sql-wasm.wasm",!Xe()){var K=h;h=u.locateFile?u.locateFile(K,g):g+K}function V(){var a=h;try{if(a==h&&Q)return new Uint8Array(Q);if(T)return T(a);throw"both async and sync fetching of the wasm failed"}catch(l){He(l)}}function se(a){for(;0<a.length;)a.shift()(u)}function ne(a,l="i8"){switch(l.endsWith("*")&&(l="*"),l){case"i1":case"i8":return te[a>>0];case"i16":return ce[a>>1];case"i32":case"i64":return fe[a>>2];case"float":return Z[a>>2];case"double":return xe[a>>3];case"*":return z[a>>2];default:He("invalid type for getValue: "+l)}return null}function q(a){var l="i32";switch(l.endsWith("*")&&(l="*"),l){case"i1":case"i8":te[a>>0]=0;break;case"i16":ce[a>>1]=0;break;case"i32":fe[a>>2]=0;break;case"i64":j=[0,(w=0,1<=+Math.abs(w)?0<w?(0|Math.min(+Math.floor(w/4294967296),4294967295))>>>0:~~+Math.ceil((w-+(~~w>>>0))/4294967296)>>>0:0)],fe[a>>2]=j[0],fe[a+4>>2]=j[1];break;case"float":Z[a>>2]=0;break;case"double":xe[a>>3]=0;break;case"*":z[a>>2]=0;break;default:He("invalid type for setValue: "+l)}}var he=(a,l)=>{for(var d=0,k=a.length-1;0<=k;k--){var R=a[k];"."===R?a.splice(k,1):".."===R?(a.splice(k,1),d++):d&&(a.splice(k,1),d--)}if(l)for(;d;d--)a.unshift("..");return a},_e=a=>{var l="/"===a.charAt(0),d="/"===a.substr(-1);return(a=he(a.split("/").filter(k=>!!k),!l).join("/"))||l||(a="."),a&&d&&(a+="/"),(l?"/":"")+a},me=a=>{var l=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(a).slice(1);return a=l[0],l=l[1],a||l?(l&&(l=l.substr(0,l.length-1)),a+l):"."},we=a=>{if("/"===a)return"/";var l=(a=(a=_e(a)).replace(/\/$/,"")).lastIndexOf("/");return-1===l?a:a.substr(l+1)};function Ae(){for(var a="",l=!1,d=arguments.length-1;-1<=d&&!l;d--){if("string"!=typeof(l=0<=d?arguments[d]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!l)return"";a=l+"/"+a,l="/"===l.charAt(0)}return(l?"/":"")+(a=he(a.split("/").filter(k=>!!k),!l).join("/"))||"."}function Qe(a,l){var d=Array(X(a)+1);return a=p(a,d,0,d.length),l&&(d.length=a),d}var dt=[];function et(a,l){dt[a]={input:[],output:[],Xa:l},dr(a,vt)}var Vr,_r,I,P,vt={open:function(a){var l=dt[a.node.rdev];if(!l)throw new ee(43);a.tty=l,a.seekable=!1},close:function(a){a.tty.Xa.fsync(a.tty)},fsync:function(a){a.tty.Xa.fsync(a.tty)},read:function(a,l,d,k){if(!a.tty||!a.tty.Xa.tb)throw new ee(60);for(var R=0,Y=0;Y<k;Y++){try{var re=a.tty.Xa.tb(a.tty)}catch{throw new ee(29)}if(void 0===re&&0===R)throw new ee(6);if(null==re)break;R++,l[d+Y]=re}return R&&(a.node.timestamp=Date.now()),R},write:function(a,l,d,k){if(!a.tty||!a.tty.Xa.jb)throw new ee(60);try{for(var R=0;R<k;R++)a.tty.Xa.jb(a.tty,l[d+R])}catch{throw new ee(29)}return k&&(a.node.timestamp=Date.now()),R}},Ze={tb:function(a){if(!a.input.length){var l=null;if(x){var d=ie.alloc(256),k=0;try{k=N.readSync(Et.stdin.fd,d,0,256,-1)}catch(R){if(!R.toString().includes("EOF"))throw R;k=0}l=0<k?d.slice(0,k).toString("utf-8"):null}else typeof window<"u"&&"function"==typeof window.prompt?null!==(l=window.prompt("Input: "))&&(l+="\n"):"function"==typeof readline&&null!==(l=readline())&&(l+="\n");if(!l)return null;a.input=Qe(l,!0)}return a.input.shift()},jb:function(a,l){null===l||10===l?(H(O(a.output,0)),a.output=[]):0!=l&&a.output.push(l)},fsync:function(a){a.output&&0<a.output.length&&(H(O(a.output,0)),a.output=[])}},gt={jb:function(a,l){null===l||10===l?(U(O(a.output,0)),a.output=[]):0!=l&&a.output.push(l)},fsync:function(a){a.output&&0<a.output.length&&(U(O(a.output,0)),a.output=[])}},Pe={Qa:null,Ra:function(){return Pe.createNode(null,"/",16895,0)},createNode:function(a,l,d,k){if(24576==(61440&d)||4096==(61440&d))throw new ee(63);return Pe.Qa||(Pe.Qa={dir:{node:{Pa:Pe.Ga.Pa,Oa:Pe.Ga.Oa,lookup:Pe.Ga.lookup,ab:Pe.Ga.ab,rename:Pe.Ga.rename,unlink:Pe.Ga.unlink,rmdir:Pe.Ga.rmdir,readdir:Pe.Ga.readdir,symlink:Pe.Ga.symlink},stream:{Ta:Pe.Ha.Ta}},file:{node:{Pa:Pe.Ga.Pa,Oa:Pe.Ga.Oa},stream:{Ta:Pe.Ha.Ta,read:Pe.Ha.read,write:Pe.Ha.write,lb:Pe.Ha.lb,bb:Pe.Ha.bb,cb:Pe.Ha.cb}},link:{node:{Pa:Pe.Ga.Pa,Oa:Pe.Ga.Oa,readlink:Pe.Ga.readlink},stream:{}},pb:{node:{Pa:Pe.Ga.Pa,Oa:Pe.Ga.Oa},stream:gn}}),16384==(61440&(d=Fr(a,l,d,k)).mode)?(d.Ga=Pe.Qa.dir.node,d.Ha=Pe.Qa.dir.stream,d.Ia={}):32768==(61440&d.mode)?(d.Ga=Pe.Qa.file.node,d.Ha=Pe.Qa.file.stream,d.Ma=0,d.Ia=null):40960==(61440&d.mode)?(d.Ga=Pe.Qa.link.node,d.Ha=Pe.Qa.link.stream):8192==(61440&d.mode)&&(d.Ga=Pe.Qa.pb.node,d.Ha=Pe.Qa.pb.stream),d.timestamp=Date.now(),a&&(a.Ia[l]=d,a.timestamp=d.timestamp),d},Jb:function(a){return a.Ia?a.Ia.subarray?a.Ia.subarray(0,a.Ma):new Uint8Array(a.Ia):new Uint8Array(0)},qb:function(a,l){var d=a.Ia?a.Ia.length:0;d>=l||(l=Math.max(l,d*(1048576>d?2:1.125)>>>0),0!=d&&(l=Math.max(l,256)),d=a.Ia,a.Ia=new Uint8Array(l),0<a.Ma&&a.Ia.set(d.subarray(0,a.Ma),0))},Gb:function(a,l){if(a.Ma!=l)if(0==l)a.Ia=null,a.Ma=0;else{var d=a.Ia;a.Ia=new Uint8Array(l),d&&a.Ia.set(d.subarray(0,Math.min(l,a.Ma))),a.Ma=l}},Ga:{Pa:function(a){var l={};return l.dev=8192==(61440&a.mode)?a.id:1,l.ino=a.id,l.mode=a.mode,l.nlink=1,l.uid=0,l.gid=0,l.rdev=a.rdev,l.size=16384==(61440&a.mode)?4096:32768==(61440&a.mode)?a.Ma:40960==(61440&a.mode)?a.link.length:0,l.atime=new Date(a.timestamp),l.mtime=new Date(a.timestamp),l.ctime=new Date(a.timestamp),l.Ab=4096,l.blocks=Math.ceil(l.size/l.Ab),l},Oa:function(a,l){void 0!==l.mode&&(a.mode=l.mode),void 0!==l.timestamp&&(a.timestamp=l.timestamp),void 0!==l.size&&Pe.Gb(a,l.size)},lookup:function(){throw mt[44]},ab:function(a,l,d,k){return Pe.createNode(a,l,d,k)},rename:function(a,l,d){if(16384==(61440&a.mode)){try{var k=Dt(l,d)}catch{}if(k)for(var R in k.Ia)throw new ee(55)}delete a.parent.Ia[a.name],a.parent.timestamp=Date.now(),a.name=d,l.Ia[d]=a,l.timestamp=a.parent.timestamp,a.parent=l},unlink:function(a,l){delete a.Ia[l],a.timestamp=Date.now()},rmdir:function(a,l){var k,d=Dt(a,l);for(k in d.Ia)throw new ee(55);delete a.Ia[l],a.timestamp=Date.now()},readdir:function(a){var d,l=[".",".."];for(d in a.Ia)a.Ia.hasOwnProperty(d)&&l.push(d);return l},symlink:function(a,l,d){return(a=Pe.createNode(a,l,41471,0)).link=d,a},readlink:function(a){if(40960!=(61440&a.mode))throw new ee(28);return a.link}},Ha:{read:function(a,l,d,k,R){var Y=a.node.Ia;if(R>=a.node.Ma)return 0;if(8<(a=Math.min(a.node.Ma-R,k))&&Y.subarray)l.set(Y.subarray(R,R+a),d);else for(k=0;k<a;k++)l[d+k]=Y[R+k];return a},write:function(a,l,d,k,R,Y){if(l.buffer===te.buffer&&(Y=!1),!k)return 0;if((a=a.node).timestamp=Date.now(),l.subarray&&(!a.Ia||a.Ia.subarray)){if(Y)return a.Ia=l.subarray(d,d+k),a.Ma=k;if(0===a.Ma&&0===R)return a.Ia=l.slice(d,d+k),a.Ma=k;if(R+k<=a.Ma)return a.Ia.set(l.subarray(d,d+k),R),k}if(Pe.qb(a,R+k),a.Ia.subarray&&l.subarray)a.Ia.set(l.subarray(d,d+k),R);else for(Y=0;Y<k;Y++)a.Ia[R+Y]=l[d+Y];return a.Ma=Math.max(a.Ma,R+k),k},Ta:function(a,l,d){if(1===d?l+=a.position:2===d&&32768==(61440&a.node.mode)&&(l+=a.node.Ma),0>l)throw new ee(28);return l},lb:function(a,l,d){Pe.qb(a.node,l+d),a.node.Ma=Math.max(a.node.Ma,l+d)},bb:function(a,l,d,k,R){if(32768!=(61440&a.node.mode))throw new ee(43);if(a=a.node.Ia,2&R||a.buffer!==ke){if((0<d||d+l<a.length)&&(a=a.subarray?a.subarray(d,d+l):Array.prototype.slice.call(a,d,d+l)),d=!0,l=65536*Math.ceil(l/65536),(R=ki(65536,l))?(Se.fill(0,R,R+l),l=R):l=0,!l)throw new ee(48);te.set(a,l)}else d=!1,l=a.byteOffset;return{Fb:l,vb:d}},cb:function(a,l,d,k,R){if(32768!=(61440&a.node.mode))throw new ee(43);return 2&R||Pe.Ha.write(a,l,0,k,d,!1),0}}},nt=null,Tt={},st=[],lr=1,Ye=null,Vt=!0,ee=null,mt={},tt=(a,l={})=>{if(!(a=Ae("/",a)))return{path:"",node:null};if(8<(l=Object.assign({rb:!0,kb:0},l)).kb)throw new ee(32);a=he(a.split("/").filter(re=>!!re),!1);for(var d=nt,k="/",R=0;R<a.length;R++){var Y=R===a.length-1;if(Y&&l.parent)break;if(d=Dt(d,a[R]),k=_e(k+"/"+a[R]),d.Va&&(!Y||Y&&l.rb)&&(d=d.Va.root),!Y||l.Sa)for(Y=0;40960==(61440&d.mode);)if(d=Zr(k),k=Ae(me(k),d),d=tt(k,{kb:l.kb+1}).node,40<Y++)throw new ee(32)}return{path:k,node:d}},Yt=a=>{for(var l;;){if(a===a.parent)return a=a.Ra.ub,l?"/"!==a[a.length-1]?a+"/"+l:a+l:a;l=l?a.name+"/"+l:a.name,a=a.parent}},fr=(a,l)=>{for(var d=0,k=0;k<l.length;k++)d=(d<<5)-d+l.charCodeAt(k)|0;return(a+d>>>0)%Ye.length},Br=a=>{var l=fr(a.parent.id,a.name);if(Ye[l]===a)Ye[l]=a.Wa;else for(l=Ye[l];l;){if(l.Wa===a){l.Wa=a.Wa;break}l=l.Wa}},Dt=(a,l)=>{var d;if(d=(d=Ft(a,"x"))?d:a.Ga.lookup?0:2)throw new ee(d,a);for(d=Ye[fr(a.id,l)];d;d=d.Wa)if(d.parent.id===a.id&&d.name===l)return d;return a.Ga.lookup(a,l)},Fr=(a,l,d,k)=>(a=new bn(a,l,d,k),l=fr(a.parent.id,a.name),a.Wa=Ye[l],Ye[l]=a),_n={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},Lr=a=>{var l=["r","w","rw"][3&a];return 512&a&&(l+="w"),l},Ft=(a,l)=>Vt?0:!l.includes("r")||292&a.mode?l.includes("w")&&!(146&a.mode)||l.includes("x")&&!(73&a.mode)?2:0:2,$r=(a,l)=>{try{return Dt(a,l),20}catch{}return Ft(a,"wx")},hr=(a,l,d)=>{try{var k=Dt(a,l)}catch(R){return R.Ka}if(a=Ft(a,"wx"))return a;if(d){if(16384!=(61440&k.mode))return 54;if(k===k.parent||"/"===Yt(k))return 10}else if(16384==(61440&k.mode))return 31;return 0},zr=(a,l)=>(I||((I=function(){this.$a={}}).prototype={},Object.defineProperties(I.prototype,{object:{get:function(){return this.node},set:function(d){this.node=d}},flags:{get:function(){return this.$a.flags},set:function(d){this.$a.flags=d}},position:{get:function(){return this.$a.position},set:function(d){this.$a.position=d}}})),a=Object.assign(new I,a),l=((a=0)=>{for(;4096>=a;a++)if(!st[a])return a;throw new ee(33)})(l),a.fd=l,st[l]=a),gn={open:a=>{a.Ha=Tt[a.node.rdev].Ha,a.Ha.open&&a.Ha.open(a)},Ta:()=>{throw new ee(70)}},dr=(a,l)=>{Tt[a]={Ha:l}},Ur=(a,l)=>{var d="/"===l,k=!l;if(d&&nt)throw new ee(10);if(!d&&!k){var R=tt(l,{rb:!1});if(l=R.path,(R=R.node).Va)throw new ee(10);if(16384!=(61440&R.mode))throw new ee(54)}(a=a.Ra(l={type:a,Kb:{},ub:l,Eb:[]})).Ra=l,l.root=a,d?nt=a:R&&(R.Va=l,R.Ra&&R.Ra.Eb.push(l))},ir=(a,l,d)=>{var k=tt(a,{parent:!0}).node;if(!(a=we(a))||"."===a||".."===a)throw new ee(28);var R=$r(k,a);if(R)throw new ee(R);if(!k.Ga.ab)throw new ee(63);return k.Ga.ab(k,a,l,d)},ct=(a,l)=>ir(a,1023&(void 0!==l?l:511)|16384,0),sr=(a,l,d)=>{typeof d>"u"&&(d=l,l=438),ir(a,8192|l,d)},mr=(a,l)=>{if(!Ae(a))throw new ee(44);var d=tt(l,{parent:!0}).node;if(!d)throw new ee(44);l=we(l);var k=$r(d,l);if(k)throw new ee(k);if(!d.Ga.symlink)throw new ee(63);d.Ga.symlink(d,l,a)},Mr=a=>{var l=tt(a,{parent:!0}).node;a=we(a);var d=Dt(l,a),k=hr(l,a,!0);if(k)throw new ee(k);if(!l.Ga.rmdir)throw new ee(63);if(d.Va)throw new ee(10);l.Ga.rmdir(l,a),Br(d)},qr=a=>{var l=tt(a,{parent:!0}).node;if(!l)throw new ee(44);a=we(a);var d=Dt(l,a),k=hr(l,a,!1);if(k)throw new ee(k);if(!l.Ga.unlink)throw new ee(63);if(d.Va)throw new ee(10);l.Ga.unlink(l,a),Br(d)},Zr=a=>{if(!(a=tt(a).node))throw new ee(44);if(!a.Ga.readlink)throw new ee(28);return Ae(Yt(a.parent),a.Ga.readlink(a))},Kt=(a,l)=>{if(!(a=tt(a,{Sa:!l}).node))throw new ee(44);if(!a.Ga.Pa)throw new ee(63);return a.Ga.Pa(a)},Wr=a=>Kt(a,!0),or=(a,l)=>{if(!(a="string"==typeof a?tt(a,{Sa:!0}).node:a).Ga.Oa)throw new ee(63);a.Ga.Oa(a,{mode:4095&l|-4096&a.mode,timestamp:Date.now()})},pr=(a,l)=>{if(0>l)throw new ee(28);if(!(a="string"==typeof a?tt(a,{Sa:!0}).node:a).Ga.Oa)throw new ee(63);if(16384==(61440&a.mode))throw new ee(31);if(32768!=(61440&a.mode))throw new ee(28);var d=Ft(a,"w");if(d)throw new ee(d);a.Ga.Oa(a,{size:l,timestamp:Date.now()})},lt=(a,l,d)=>{if(""===a)throw new ee(44);if("string"==typeof l){var k=_n[l];if(typeof k>"u")throw Error("Unknown file open mode: "+l);l=k}if(d=64&l?4095&(typeof d>"u"?438:d)|32768:0,"object"==typeof a)var R=a;else{a=_e(a);try{R=tt(a,{Sa:!(131072&l)}).node}catch{}}if(k=!1,64&l)if(R){if(128&l)throw new ee(20)}else R=ir(a,d,0),k=!0;if(!R)throw new ee(44);if(8192==(61440&R.mode)&&(l&=-513),65536&l&&16384!=(61440&R.mode))throw new ee(54);if(!k&&(d=R?40960==(61440&R.mode)?32:16384==(61440&R.mode)&&("r"!==Lr(l)||512&l)?31:Ft(R,Lr(l)):44))throw new ee(d);return 512&l&&!k&&pr(R,0),l&=-131713,(R=zr({node:R,path:Yt(R),flags:l,seekable:!0,position:0,Ha:R.Ha,Ib:[],error:!1})).Ha.open&&R.Ha.open(R),!u.logReadFiles||1&l||(P||(P={}),a in P||(P[a]=1)),R},ar=a=>{if(null===a.fd)throw new ee(8);a.hb&&(a.hb=null);try{a.Ha.close&&a.Ha.close(a)}catch(l){throw l}finally{st[a.fd]=null}a.fd=null},At=(a,l,d)=>{if(null===a.fd)throw new ee(8);if(!a.seekable||!a.Ha.Ta)throw new ee(70);if(0!=d&&1!=d&&2!=d)throw new ee(28);a.position=a.Ha.Ta(a,l,d),a.Ib=[]},Gr=(a,l,d,k,R)=>{if(0>k||0>R)throw new ee(28);if(null===a.fd)throw new ee(8);if(1==(2097155&a.flags))throw new ee(8);if(16384==(61440&a.node.mode))throw new ee(31);if(!a.Ha.read)throw new ee(28);var Y=typeof R<"u";if(Y){if(!a.seekable)throw new ee(70)}else R=a.position;return l=a.Ha.read(a,l,d,k,R),Y||(a.position+=l),l},Qt=(a,l,d,k,R)=>{if(0>k||0>R)throw new ee(28);if(null===a.fd)throw new ee(8);if(!(2097155&a.flags))throw new ee(8);if(16384==(61440&a.node.mode))throw new ee(31);if(!a.Ha.write)throw new ee(28);a.seekable&&1024&a.flags&&At(a,0,2);var Y=typeof R<"u";if(Y){if(!a.seekable)throw new ee(70)}else R=a.position;return l=a.Ha.write(a,l,d,k,R,void 0),Y||(a.position+=l),l},yr=a=>{var l,d=lt(a,d||0);a=Kt(a).size;var k=new Uint8Array(a);return Gr(d,k,0,a,0),l=k,ar(d),l},Hr=()=>{ee||((ee=function(a,l){this.node=l,this.Hb=function(d){this.Ka=d},this.Hb(a),this.message="FS error"}).prototype=Error(),ee.prototype.constructor=ee,[44].forEach(a=>{mt[a]=new ee(a),mt[a].stack="<generic error, no stack>"}))},ur=(a,l)=>{var d=0;return a&&(d|=365),l&&(d|=146),d},Jt=(a,l,d)=>{a=_e("/dev/"+a);var k=ur(!!l,!!d);_r||(_r=64);var R=_r++<<8|0;dr(R,{open:Y=>{Y.seekable=!1},close:()=>{d&&d.buffer&&d.buffer.length&&d(10)},read:(Y,re,De,Le)=>{for(var Ce=0,Ve=0;Ve<Le;Ve++){try{var It=l()}catch{throw new ee(29)}if(void 0===It&&0===Ce)throw new ee(6);if(null==It)break;Ce++,re[De+Ve]=It}return Ce&&(Y.node.timestamp=Date.now()),Ce},write:(Y,re,De,Le)=>{for(var Ce=0;Ce<Le;Ce++)try{d(re[De+Ce])}catch{throw new ee(29)}return Le&&(Y.node.timestamp=Date.now()),Ce}}),sr(a,k,R)},_={};function B(a,l,d){if("/"===l.charAt(0))return l;if(a=-100===a?"/":oe(a).path,0==l.length){if(!d)throw new ee(44);return a}return _e(a+"/"+l)}function L(a,l,d){try{var k=a(l)}catch(R){if(R&&R.node&&_e(l)!==_e(Yt(R.node)))return-54;throw R}return fe[d>>2]=k.dev,fe[d+8>>2]=k.ino,fe[d+12>>2]=k.mode,z[d+16>>2]=k.nlink,fe[d+20>>2]=k.uid,fe[d+24>>2]=k.gid,fe[d+28>>2]=k.rdev,j=[k.size>>>0,(w=k.size,1<=+Math.abs(w)?0<w?(0|Math.min(+Math.floor(w/4294967296),4294967295))>>>0:~~+Math.ceil((w-+(~~w>>>0))/4294967296)>>>0:0)],fe[d+40>>2]=j[0],fe[d+44>>2]=j[1],fe[d+48>>2]=4096,fe[d+52>>2]=k.blocks,j=[Math.floor(k.atime.getTime()/1e3)>>>0,(w=Math.floor(k.atime.getTime()/1e3),1<=+Math.abs(w)?0<w?(0|Math.min(+Math.floor(w/4294967296),4294967295))>>>0:~~+Math.ceil((w-+(~~w>>>0))/4294967296)>>>0:0)],fe[d+56>>2]=j[0],fe[d+60>>2]=j[1],z[d+64>>2]=0,j=[Math.floor(k.mtime.getTime()/1e3)>>>0,(w=Math.floor(k.mtime.getTime()/1e3),1<=+Math.abs(w)?0<w?(0|Math.min(+Math.floor(w/4294967296),4294967295))>>>0:~~+Math.ceil((w-+(~~w>>>0))/4294967296)>>>0:0)],fe[d+72>>2]=j[0],fe[d+76>>2]=j[1],z[d+80>>2]=0,j=[Math.floor(k.ctime.getTime()/1e3)>>>0,(w=Math.floor(k.ctime.getTime()/1e3),1<=+Math.abs(w)?0<w?(0|Math.min(+Math.floor(w/4294967296),4294967295))>>>0:~~+Math.ceil((w-+(~~w>>>0))/4294967296)>>>0:0)],fe[d+88>>2]=j[0],fe[d+92>>2]=j[1],z[d+96>>2]=0,j=[k.ino>>>0,(w=k.ino,1<=+Math.abs(w)?0<w?(0|Math.min(+Math.floor(w/4294967296),4294967295))>>>0:~~+Math.ceil((w-+(~~w>>>0))/4294967296)>>>0:0)],fe[d+104>>2]=j[0],fe[d+108>>2]=j[1],0}var Oe,C=void 0;function J(){return fe[(C+=4)-4>>2]}function oe(a){if(!(a=st[a]))throw new ee(8);return a}function le(a){return z[a>>2]+4294967296*fe[a+4>>2]}function de(a){var l=X(a)+1,d=Xt(l);return d&&p(a,te,d,l),d}Oe=x?()=>{var a=Et.hrtime();return 1e3*a[0]+a[1]/1e6}:()=>performance.now();var Ne={};function Be(){if(!We){var l,a={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(l in Ne)void 0===Ne[l]?delete a[l]:a[l]=Ne[l];var d=[];for(l in a)d.push(l+"="+a[l]);We=d}return We}var We,$e=void 0,rt=[];function Ot(a,l){if(!$e){var d=pe.length;if($e=new WeakMap)for(var k=0;k<0+d;k++){var R=pe.get(k);R&&$e.set(R,k)}}if($e.has(a))return $e.get(a);if(rt.length)d=rt.pop();else{try{pe.grow(1)}catch(De){throw De instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":De}d=pe.length-1}try{pe.set(d,a)}catch(De){if(!(De instanceof TypeError))throw De;if("function"==typeof WebAssembly.Function){k=WebAssembly.Function,R={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"};for(var Y={parameters:[],results:"v"==l[0]?[]:[R[l[0]]]},re=1;re<l.length;++re)Y.parameters.push(R[l[re]]);l=new k(Y,a)}else{for(k=[1,96],R=l.slice(0,1),Y={i:127,p:127,j:126,f:125,d:124},128>(re=(l=l.slice(1)).length)?k.push(re):k.push(re%128|128,re>>7),re=0;re<l.length;++re)k.push(Y[l[re]]);"v"==R?k.push(0):k.push(1,Y[R]),l=[0,97,115,109,1,0,0,0,1],128>(R=k.length)?l.push(R):l.push(R%128|128,R>>7),l.push.apply(l,k),l.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),l=new WebAssembly.Module(new Uint8Array(l)),l=new WebAssembly.Instance(l,{e:{f:a}}).exports.f}pe.set(d,l)}return $e.set(a,d),d}function Rt(a){$e.delete(pe.get(a)),rt.push(a)}function vr(a){var l=Xt(a.length);return a.subarray||a.slice||(a=new Uint8Array(a)),Se.set(a,l),l}function bn(a,l,d,k){a||(a=this),this.parent=a,this.Ra=a.Ra,this.Va=null,this.id=lr++,this.name=l,this.mode=d,this.Ga={},this.Ha={},this.rdev=k}Object.defineProperties(bn.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(a){a?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(a){a?this.mode|=146:this.mode&=-147}}}),Hr(),Ye=Array(4096),Ur(Pe,"/"),ct("/tmp"),ct("/home"),ct("/home/web_user"),(()=>{ct("/dev"),dr(259,{read:()=>0,write:(l,d,k,R)=>R}),sr("/dev/null",259),et(1280,Ze),et(1536,gt),sr("/dev/tty",1280),sr("/dev/tty1",1536);var a=function Fe(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var a=new Uint8Array(1);return()=>(crypto.getRandomValues(a),a[0])}if(x)try{var l=ti;return()=>l.randomBytes(1)[0]}catch{}return()=>He("randomDevice")}();Jt("random",a),Jt("urandom",a),ct("/dev/shm"),ct("/dev/shm/tmp")})(),(()=>{ct("/proc");var a=ct("/proc/self");ct("/proc/self/fd"),Ur({Ra:()=>{var l=Fr(a,"fd",16895,73);return l.Ga={lookup:(d,k)=>{var R=st[+k];if(!R)throw new ee(8);return(d={parent:null,Ra:{ub:"fake"},Ga:{readlink:()=>R.path}}).parent=d}},l}},"/proc/self/fd")})();var wn={a:function(a,l,d,k){He("Assertion failed: "+W(a)+", at: "+[l?W(l):"unknown filename",d,k?W(k):"unknown function"])},h:function(a,l){try{return a=W(a),or(a,l),0}catch(d){if(typeof _>"u"||!(d instanceof ee))throw d;return-d.Ka}},H:function(a,l,d){try{if(l=B(a,l=W(l)),-8&d)return-28;var k=tt(l,{Sa:!0}).node;return k?(a="",4&d&&(a+="r"),2&d&&(a+="w"),1&d&&(a+="x"),a&&Ft(k,a)?-2:0):-44}catch(R){if(typeof _>"u"||!(R instanceof ee))throw R;return-R.Ka}},i:function(a,l){try{var d=st[a];if(!d)throw new ee(8);return or(d.node,l),0}catch(k){if(typeof _>"u"||!(k instanceof ee))throw k;return-k.Ka}},g:function(a){try{var l=st[a];if(!l)throw new ee(8);var d=l.node,k="string"==typeof d?tt(d,{Sa:!0}).node:d;if(!k.Ga.Oa)throw new ee(63);return k.Ga.Oa(k,{timestamp:Date.now()}),0}catch(R){if(typeof _>"u"||!(R instanceof ee))throw R;return-R.Ka}},b:function(a,l,d){C=d;try{var k=oe(a);switch(l){case 0:var R=J();return 0>R?-28:zr(k,R).fd;case 1:case 2:case 6:case 7:return 0;case 3:return k.flags;case 4:return R=J(),k.flags|=R,0;case 5:return R=J(),ce[R+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return fe[Yr()>>2]=28,-1}}catch(Y){if(typeof _>"u"||!(Y instanceof ee))throw Y;return-Y.Ka}},G:function(a,l){try{var d=oe(a);return L(Kt,d.path,l)}catch(k){if(typeof _>"u"||!(k instanceof ee))throw k;return-k.Ka}},l:function(a,l,d){try{if(l=d+2097152>>>0<4194305-!!l?(l>>>0)+4294967296*d:NaN,isNaN(l))return-61;var k=st[a];if(!k)throw new ee(8);if(!(2097155&k.flags))throw new ee(28);return pr(k.node,l),0}catch(R){if(typeof _>"u"||!(R instanceof ee))throw R;return-R.Ka}},B:function(a,l){try{if(0===l)return-28;var d=X("/")+1;return l<d?-68:(p("/",Se,a,l),d)}catch(k){if(typeof _>"u"||!(k instanceof ee))throw k;return-k.Ka}},E:function(a,l){try{return a=W(a),L(Wr,a,l)}catch(d){if(typeof _>"u"||!(d instanceof ee))throw d;return-d.Ka}},y:function(a,l,d){try{return l=B(a,l=W(l)),"/"===(l=_e(l))[l.length-1]&&(l=l.substr(0,l.length-1)),ct(l,d),0}catch(k){if(typeof _>"u"||!(k instanceof ee))throw k;return-k.Ka}},D:function(a,l,d,k){try{l=W(l);var R=256&k;return l=B(a,l,4096&k),L(R?Wr:Kt,l,d)}catch(Y){if(typeof _>"u"||!(Y instanceof ee))throw Y;return-Y.Ka}},v:function(a,l,d,k){C=k;try{l=B(a,l=W(l));var R=k?J():0;return lt(l,d,R).fd}catch(Y){if(typeof _>"u"||!(Y instanceof ee))throw Y;return-Y.Ka}},t:function(a,l,d,k){try{if(l=B(a,l=W(l)),0>=k)return-28;var R=Zr(l),Y=Math.min(k,X(R)),re=te[d+Y];return p(R,Se,d,k+1),te[d+Y]=re,Y}catch(De){if(typeof _>"u"||!(De instanceof ee))throw De;return-De.Ka}},s:function(a){try{return a=W(a),Mr(a),0}catch(l){if(typeof _>"u"||!(l instanceof ee))throw l;return-l.Ka}},F:function(a,l){try{return a=W(a),L(Kt,a,l)}catch(d){if(typeof _>"u"||!(d instanceof ee))throw d;return-d.Ka}},p:function(a,l,d){try{return l=B(a,l=W(l)),0===d?qr(l):512===d?Mr(l):He("Invalid flags passed to unlinkat"),0}catch(k){if(typeof _>"u"||!(k instanceof ee))throw k;return-k.Ka}},o:function(a,l,d){try{if(l=B(a,l=W(l),!0),d){var k=le(d),R=fe[d+8>>2];Y=1e3*k+R/1e6,re=1e3*(k=le(d+=16))+(R=fe[d+8>>2])/1e6}else var Y=Date.now(),re=Y;a=Y;var De=tt(l,{Sa:!0}).node;return De.Ga.Oa(De,{timestamp:Math.max(a,re)}),0}catch(Le){if(typeof _>"u"||!(Le instanceof ee))throw Le;return-Le.Ka}},e:function(){return Date.now()},j:function(a,l){a=new Date(1e3*le(a)),fe[l>>2]=a.getSeconds(),fe[l+4>>2]=a.getMinutes(),fe[l+8>>2]=a.getHours(),fe[l+12>>2]=a.getDate(),fe[l+16>>2]=a.getMonth(),fe[l+20>>2]=a.getFullYear()-1900,fe[l+24>>2]=a.getDay();var d=new Date(a.getFullYear(),0,1);fe[l+28>>2]=(a.getTime()-d.getTime())/864e5|0,fe[l+36>>2]=-60*a.getTimezoneOffset();var k=new Date(a.getFullYear(),6,1).getTimezoneOffset();d=d.getTimezoneOffset(),fe[l+32>>2]=0|(k!=d&&a.getTimezoneOffset()==Math.min(d,k))},w:function(a,l,d,k,R,Y){try{var re=oe(k);if(2&l&&!(2&d)&&2!=(2097155&re.flags))throw new ee(2);if(1==(2097155&re.flags))throw new ee(2);if(!re.Ha.bb)throw new ee(43);var De=re.Ha.bb(re,a,R,l,d),Le=De.Fb;return fe[Y>>2]=De.vb,Le}catch(Ce){if(typeof _>"u"||!(Ce instanceof ee))throw Ce;return-Ce.Ka}},x:function(a,l,d,k,R,Y){try{var re=oe(R);if(2&d){var De=Se.slice(a,a+l);re&&re.Ha.cb&&re.Ha.cb(re,De,Y,l,k)}}catch(Le){if(typeof _>"u"||!(Le instanceof ee))throw Le;return-Le.Ka}},n:function be(a,l,d){be.Bb||(be.Bb=!0,function ye(a,l,d){function k(Le){return(Le=Le.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Le[1]:"GMT"}var R=(new Date).getFullYear(),Y=new Date(R,0,1),re=new Date(R,6,1);R=Y.getTimezoneOffset();var De=re.getTimezoneOffset();fe[a>>2]=60*Math.max(R,De),fe[l>>2]=+(R!=De),a=k(Y),l=k(re),a=de(a),l=de(l),De<R?(z[d>>2]=a,z[d+4>>2]=l):(z[d>>2]=l,z[d+4>>2]=a)}(a,l,d))},q:function(){return 2147483648},d:Oe,c:function(a){var l=Se.length;if(2147483648<(a>>>=0))return!1;for(var d=1;4>=d;d*=2){var k=l*(1+.2/d);k=Math.min(k,a+100663296);var R=Math;k=Math.max(a,k),R=R.min.call(R,2147483648,k+(65536-k%65536)%65536);e:{try{G.grow(R-ke.byteLength+65535>>>16),ve();var Y=1;break e}catch{}Y=void 0}if(Y)return!0}return!1},z:function(a,l){var d=0;return Be().forEach(function(k,R){var Y=l+d;for(R=z[a+4*R>>2]=Y,Y=0;Y<k.length;++Y)te[R++>>0]=k.charCodeAt(Y);te[R>>0]=0,d+=k.length+1}),0},A:function(a,l){var d=Be();z[a>>2]=d.length;var k=0;return d.forEach(function(R){k+=R.length+1}),z[l>>2]=k,0},f:function(a){try{var l=oe(a);return ar(l),0}catch(d){if(typeof _>"u"||!(d instanceof ee))throw d;return d.Ka}},m:function(a,l){try{var d=oe(a);return te[l>>0]=d.tty?2:16384==(61440&d.mode)?3:40960==(61440&d.mode)?7:4,0}catch(k){if(typeof _>"u"||!(k instanceof ee))throw k;return k.Ka}},u:function(a,l,d,k){try{e:{var R=oe(a);a=l;for(var Y=l=0;Y<d;Y++){var re=z[a>>2],De=z[a+4>>2];a+=8;var Le=Gr(R,te,re,De);if(0>Le){var Ce=-1;break e}if(l+=Le,Le<De)break}Ce=l}return z[k>>2]=Ce,0}catch(Ve){if(typeof _>"u"||!(Ve instanceof ee))throw Ve;return Ve.Ka}},k:function(a,l,d,k,R){try{if(l=d+2097152>>>0<4194305-!!l?(l>>>0)+4294967296*d:NaN,isNaN(l))return 61;var Y=oe(a);return At(Y,l,k),j=[Y.position>>>0,(w=Y.position,1<=+Math.abs(w)?0<w?(0|Math.min(+Math.floor(w/4294967296),4294967295))>>>0:~~+Math.ceil((w-+(~~w>>>0))/4294967296)>>>0:0)],fe[R>>2]=j[0],fe[R+4>>2]=j[1],Y.hb&&0===l&&0===k&&(Y.hb=null),0}catch(re){if(typeof _>"u"||!(re instanceof ee))throw re;return re.Ka}},C:function(a){try{var l=oe(a);return l.Ha&&l.Ha.fsync?l.Ha.fsync(l):0}catch(d){if(typeof _>"u"||!(d instanceof ee))throw d;return d.Ka}},r:function(a,l,d,k){try{e:{var R=oe(a);a=l;for(var Y=l=0;Y<d;Y++){var re=z[a>>2],De=z[a+4>>2];a+=8;var Le=Qt(R,te,re,De);if(0>Le){var Ce=-1;break e}l+=Le}Ce=l}return z[k>>2]=Ce,0}catch(Ve){if(typeof _>"u"||!(Ve instanceof ee))throw Ve;return Ve.Ka}}};(function(){function a(R){u.asm=R.exports,G=u.asm.I,ve(),pe=u.asm.Aa,Ge.unshift(u.asm.J),Me--,u.monitorRunDependencies&&u.monitorRunDependencies(Me),0==Me&&Ue&&(R=Ue,Ue=null,R())}function l(R){a(R.instance)}function d(R){return function D(){if(!Q&&(b||y)){if("function"==typeof fetch&&!h.startsWith("file://"))return fetch(h,{credentials:"same-origin"}).then(function(a){if(!a.ok)throw"failed to load wasm binary file at '"+h+"'";return a.arrayBuffer()}).catch(function(){return V()});if(E)return new Promise(function(a,l){E(h,function(d){a(new Uint8Array(d))},l)})}return Promise.resolve().then(function(){return V()})}().then(function(Y){return WebAssembly.instantiate(Y,k)}).then(function(Y){return Y}).then(R,function(Y){U("failed to asynchronously prepare wasm: "+Y),He(Y)})}var k={a:wn};if(Me++,u.monitorRunDependencies&&u.monitorRunDependencies(Me),u.instantiateWasm)try{return u.instantiateWasm(k,a)}catch(R){return U("Module.instantiateWasm callback failed with error: "+R),!1}Q||"function"!=typeof WebAssembly.instantiateStreaming||Xe()||h.startsWith("file://")||x||"function"!=typeof fetch?d(l):fetch(h,{credentials:"same-origin"}).then(function(R){return WebAssembly.instantiateStreaming(R,k).then(l,function(Y){return U("wasm streaming compile failed: "+Y),U("falling back to ArrayBuffer instantiation"),d(l)})})})(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.J).apply(null,arguments)},u._sqlite3_free=function(){return(u._sqlite3_free=u.asm.K).apply(null,arguments)},u._sqlite3_value_double=function(){return(u._sqlite3_value_double=u.asm.L).apply(null,arguments)},u._sqlite3_value_text=function(){return(u._sqlite3_value_text=u.asm.M).apply(null,arguments)};var Yr=u.___errno_location=function(){return(Yr=u.___errno_location=u.asm.N).apply(null,arguments)};u._sqlite3_prepare_v2=function(){return(u._sqlite3_prepare_v2=u.asm.O).apply(null,arguments)},u._sqlite3_step=function(){return(u._sqlite3_step=u.asm.P).apply(null,arguments)},u._sqlite3_finalize=function(){return(u._sqlite3_finalize=u.asm.Q).apply(null,arguments)},u._sqlite3_reset=function(){return(u._sqlite3_reset=u.asm.R).apply(null,arguments)},u._sqlite3_value_int=function(){return(u._sqlite3_value_int=u.asm.S).apply(null,arguments)},u._sqlite3_clear_bindings=function(){return(u._sqlite3_clear_bindings=u.asm.T).apply(null,arguments)},u._sqlite3_value_blob=function(){return(u._sqlite3_value_blob=u.asm.U).apply(null,arguments)},u._sqlite3_value_bytes=function(){return(u._sqlite3_value_bytes=u.asm.V).apply(null,arguments)},u._sqlite3_value_type=function(){return(u._sqlite3_value_type=u.asm.W).apply(null,arguments)},u._sqlite3_result_blob=function(){return(u._sqlite3_result_blob=u.asm.X).apply(null,arguments)},u._sqlite3_result_double=function(){return(u._sqlite3_result_double=u.asm.Y).apply(null,arguments)},u._sqlite3_result_error=function(){return(u._sqlite3_result_error=u.asm.Z).apply(null,arguments)},u._sqlite3_result_int=function(){return(u._sqlite3_result_int=u.asm._).apply(null,arguments)},u._sqlite3_result_int64=function(){return(u._sqlite3_result_int64=u.asm.$).apply(null,arguments)},u._sqlite3_result_null=function(){return(u._sqlite3_result_null=u.asm.aa).apply(null,arguments)},u._sqlite3_result_text=function(){return(u._sqlite3_result_text=u.asm.ba).apply(null,arguments)},u._sqlite3_sql=function(){return(u._sqlite3_sql=u.asm.ca).apply(null,arguments)},u._sqlite3_aggregate_context=function(){return(u._sqlite3_aggregate_context=u.asm.da).apply(null,arguments)},u._sqlite3_column_count=function(){return(u._sqlite3_column_count=u.asm.ea).apply(null,arguments)},u._sqlite3_data_count=function(){return(u._sqlite3_data_count=u.asm.fa).apply(null,arguments)},u._sqlite3_column_blob=function(){return(u._sqlite3_column_blob=u.asm.ga).apply(null,arguments)},u._sqlite3_column_bytes=function(){return(u._sqlite3_column_bytes=u.asm.ha).apply(null,arguments)},u._sqlite3_column_double=function(){return(u._sqlite3_column_double=u.asm.ia).apply(null,arguments)},u._sqlite3_column_text=function(){return(u._sqlite3_column_text=u.asm.ja).apply(null,arguments)},u._sqlite3_column_type=function(){return(u._sqlite3_column_type=u.asm.ka).apply(null,arguments)},u._sqlite3_column_name=function(){return(u._sqlite3_column_name=u.asm.la).apply(null,arguments)},u._sqlite3_bind_blob=function(){return(u._sqlite3_bind_blob=u.asm.ma).apply(null,arguments)},u._sqlite3_bind_double=function(){return(u._sqlite3_bind_double=u.asm.na).apply(null,arguments)},u._sqlite3_bind_int=function(){return(u._sqlite3_bind_int=u.asm.oa).apply(null,arguments)},u._sqlite3_bind_text=function(){return(u._sqlite3_bind_text=u.asm.pa).apply(null,arguments)},u._sqlite3_bind_parameter_index=function(){return(u._sqlite3_bind_parameter_index=u.asm.qa).apply(null,arguments)},u._sqlite3_normalized_sql=function(){return(u._sqlite3_normalized_sql=u.asm.ra).apply(null,arguments)},u._sqlite3_errmsg=function(){return(u._sqlite3_errmsg=u.asm.sa).apply(null,arguments)},u._sqlite3_exec=function(){return(u._sqlite3_exec=u.asm.ta).apply(null,arguments)},u._sqlite3_changes=function(){return(u._sqlite3_changes=u.asm.ua).apply(null,arguments)},u._sqlite3_close_v2=function(){return(u._sqlite3_close_v2=u.asm.va).apply(null,arguments)},u._sqlite3_create_function_v2=function(){return(u._sqlite3_create_function_v2=u.asm.wa).apply(null,arguments)},u._sqlite3_open=function(){return(u._sqlite3_open=u.asm.xa).apply(null,arguments)};var Xt=u._malloc=function(){return(Xt=u._malloc=u.asm.ya).apply(null,arguments)},Kr=u._free=function(){return(Kr=u._free=u.asm.za).apply(null,arguments)};u._RegisterExtensionFunctions=function(){return(u._RegisterExtensionFunctions=u.asm.Ba).apply(null,arguments)};var Qr,ki=u._emscripten_builtin_memalign=function(){return(ki=u._emscripten_builtin_memalign=u.asm.Ca).apply(null,arguments)},br=u.stackSave=function(){return(br=u.stackSave=u.asm.Da).apply(null,arguments)},wr=u.stackRestore=function(){return(wr=u.stackRestore=u.asm.Ea).apply(null,arguments)},Lt=u.stackAlloc=function(){return(Lt=u.stackAlloc=u.asm.Fa).apply(null,arguments)};function Pi(){function a(){if(!Qr&&(Qr=!0,u.calledRun=!0,!ue)){if(u.noFSInit||Vr||(Vr=!0,Hr(),u.stdin=u.stdin,u.stdout=u.stdout,u.stderr=u.stderr,u.stdin?Jt("stdin",u.stdin):mr("/dev/tty","/dev/stdin"),u.stdout?Jt("stdout",null,u.stdout):mr("/dev/tty","/dev/stdout"),u.stderr?Jt("stderr",null,u.stderr):mr("/dev/tty1","/dev/stderr"),lt("/dev/stdin",0),lt("/dev/stdout",1),lt("/dev/stderr",1)),Vt=!1,se(Ge),u.onRuntimeInitialized&&u.onRuntimeInitialized(),u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var l=u.postRun.shift();Re.unshift(l)}se(Re)}}if(!(0<Me)){if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)je();se(qe),0<Me||(u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),a()},1)):a())}}if(u.UTF8ToString=W,u.stackAlloc=Lt,u.stackSave=br,u.stackRestore=wr,u.cwrap=function(a,l,d,k){var R=(d=d||[]).every(Y=>"number"===Y||"boolean"===Y);return"string"!==l&&R&&!k?u["_"+a]:function(){return function gr(a,l,d,k){var R={string:Ce=>{var Ve=0;if(null!=Ce&&0!==Ce){var It=1+(Ce.length<<2);Ve=Lt(It),p(Ce,Se,Ve,It)}return Ve},array:Ce=>{var Ve=Lt(Ce.length);return te.set(Ce,Ve),Ve}};a=u["_"+a];var Ce,Y=[],re=0;if(k)for(var De=0;De<k.length;De++){var Le=R[d[De]];Le?(0===re&&(re=br()),Y[De]=Le(k[De])):Y[De]=k[De]}return Ce=d=a.apply(null,Y),0!==re&&wr(re),"string"===l?W(Ce):"boolean"===l?!!Ce:Ce}(a,l,d,arguments)}},Ue=function a(){Qr||Pi(),Qr||(Ue=a)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return Pi(),c}),e)};n.exports=r,n.exports.default=r});const ln=function(){var n=(0,F.Z)(function*(t,e){try{const r=yield e.getItem(t);return Promise.resolve(r)}catch(r){return Promise.reject(`GetDBFromStore: ${r.message}`)}});return function(e,r){return n.apply(this,arguments)}}(),Ws=function(){var n=(0,F.Z)(function*(t,e){try{return yield e.setItem(t,null),Promise.resolve()}catch(r){return Promise.reject(`SetInitialDBToStore: ${r.message}`)}});return function(e,r){return n.apply(this,arguments)}}(),Gs=function(){var n=(0,F.Z)(function*(t,e,r){try{const i=t.export();return yield kt(e,i,r),Promise.resolve()}catch(i){return Promise.reject(`SetDBToStore: ${i.message}`)}});return function(e,r,i){return n.apply(this,arguments)}}(),kt=function(){var n=(0,F.Z)(function*(t,e,r){try{return yield r.setItem(t,e),Promise.resolve()}catch(i){return Promise.reject(`SaveDBToStore: ${i.message}`)}});return function(e,r,i){return n.apply(this,arguments)}}(),qt=function(){var n=(0,F.Z)(function*(t,e){try{return yield e.removeItem(t),Promise.resolve()}catch(r){return Promise.reject(`RemoveDBFromStore: ${r.message}`)}});return function(e,r){return n.apply(this,arguments)}}(),_t=function(){var n=(0,F.Z)(function*(t,e){try{const r=yield e.getItem(t);return Promise.resolve(null!=r&&r.length>0)}catch(r){return Promise.reject(`IsDBInStore: ${r}`)}});return function(e,r){return n.apply(this,arguments)}}(),ri=function(){var n=(0,F.Z)(function*(t,e,r){const i=`${e}-${t}`;try{if(yield _t(i,r)){if(yield _t(t,r)){const c=yield ln(i,r);return yield kt(t,c,r),yield qt(i,r),Promise.resolve()}return Promise.reject(new Error(`RestoreDBFromStore: ${t} does not exist`))}return Promise.reject(new Error(`RestoreDBFromStore: ${i} does not exist`))}catch(s){return Promise.reject(`RestoreDBFromStore: ${s.message}`)}});return function(e,r,i){return n.apply(this,arguments)}}(),Hs=function(){var n=(0,F.Z)(function*(t,e,r){try{if(yield _t(t,r)){const s=yield ln(t,r);return yield kt(e,s,r),Promise.resolve()}return Promise.reject(new Error(`CopyDBToStore: ${t} does not exist`))}catch(i){return Promise.reject(`CopyDBToStore: ${i.message}`)}});return function(e,r,i){return n.apply(this,arguments)}}(),Vs=function(){var n=(0,F.Z)(function*(t){try{const e=yield t.keys();return Promise.resolve(e)}catch(e){return Promise.reject(`GetDBListFromStore: ${e.message}`)}});return function(e){return n.apply(this,arguments)}}(),fn=function(){var n=(0,F.Z)(function*(t){let e="SELECT name FROM sqlite_master WHERE ";e+="type='table' AND name NOT LIKE 'sync_table' ",e+="AND name NOT LIKE '_temp_%' ",e+="AND name NOT LIKE 'sqlite_%' ",e+="ORDER BY rootpage DESC;";const r=[];try{const i=yield Je(t,"SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sync_table' AND name NOT LIKE '_temp_%' AND name NOT LIKE 'sqlite_%' ORDER BY rootpage DESC;",[]);for(const s of i)r.push(s.name);return Promise.resolve(r)}catch(i){return Promise.reject(new Error(`GetTablesNames: ${i.message}`))}});return function(e){return n.apply(this,arguments)}}(),Rr=function(){var n=(0,F.Z)(function*(t,e){let r="",i="AND name NOT LIKE ('sqlite_%')";switch(e){case"index":r="DropIndexes";break;case"trigger":r="DropTriggers";break;case"table":r="DropTables",i+=" AND name NOT IN ('sync_table')";break;case"view":r="DropViews";break;default:return Promise.reject(new Error(`DropElements: ${e} not found`))}let s="SELECT name FROM sqlite_master WHERE ";s+=`type = '${e}' ${i};`;try{const o=yield Je(t,s,[]);if(o.length>0){const c=e.toUpperCase(),f=[];for(const u of o){let v=`DROP ${c} IF EXISTS `;v+=`${u.name};`,f.push(v)}for(const u of f)if((yield Ht(t,u,[],!1))<0)return Promise.reject(new Error(`DropElements: ${r}: lastId < 0`))}return Promise.resolve()}catch(o){return Promise.reject(new Error(`DropElements: ${r}: ${o.message}`))}});return function(e,r){return n.apply(this,arguments)}}(),Ys=function(){var n=(0,F.Z)(function*(t){try{return yield Rr(t,"table"),yield Rr(t,"index"),yield Rr(t,"trigger"),yield Rr(t,"view"),yield Ht(t,"VACUUM;",[],!1),Promise.resolve()}catch(e){return Promise.reject(new Error(`DropAll: ${e.message}`))}});return function(e){return n.apply(this,arguments)}}(),hn=function(){var n=(0,F.Z)(function*(t){const e=["database","version","overwrite","encrypted","mode","tables","views"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t)){if(-1===e.indexOf(r)||"database"===r&&"string"!=typeof t[r]||"version"===r&&"number"!=typeof t[r]||"overwrite"===r&&"boolean"!=typeof t[r]||"encrypted"===r&&"boolean"!=typeof t[r]||"mode"===r&&"string"!=typeof t[r]||"tables"===r&&"object"!=typeof t[r])return!1;if("tables"===r)for(const i of t[r])if(!(yield Ks(i)))return!1;if("views"===r&&"object"!=typeof t[r])return!1;if("views"===r)for(const i of t[r])if(!(yield Qs(i)))return!1}return!0});return function(e){return n.apply(this,arguments)}}(),Ks=function(){var n=(0,F.Z)(function*(t){const e=["name","schema","indexes","triggers","values"];let r=0;if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const i of Object.keys(t)){if(-1===e.indexOf(i)||"name"===i&&"string"!=typeof t[i]||"schema"===i&&"object"!=typeof t[i]||"indexes"===i&&"object"!=typeof t[i]||"triggers"===i&&"object"!=typeof t[i]||"values"===i&&"object"!=typeof t[i])return!1;if("schema"===i){t.schema.forEach(s=>{s.column&&r++});for(let s=0;s<r;s++)if(!(yield ni(t[i][s])))return!1}if("indexes"===i)for(const s of t[i])if(!(yield ii(s)))return!1;if("triggers"===i)for(const s of t[i])if(!(yield si(s)))return!1;if("values"===i&&r>0)for(const s of t[i])if("object"!=typeof s||s.length!=r)return!1}return!0});return function(e){return n.apply(this,arguments)}}(),ni=function(){var n=(0,F.Z)(function*(t){const e=["column","value","foreignkey","primarykey","constraint"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t))if(-1===e.indexOf(r)||"column"===r&&"string"!=typeof t[r]||"value"===r&&"string"!=typeof t[r]||"foreignkey"===r&&"string"!=typeof t[r]||"primarykey"===r&&"string"!=typeof t[r]||"constraint"===r&&"string"!=typeof t[r])return!1;return!0});return function(e){return n.apply(this,arguments)}}(),ii=function(){var n=(0,F.Z)(function*(t){const e=["name","value","mode"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t))if(-1===e.indexOf(r)||"name"===r&&"string"!=typeof t[r]||"value"===r&&"string"!=typeof t[r]||"mode"===r&&("string"!=typeof t[r]||"UNIQUE"!=t[r].toUpperCase()))return!1;return!0});return function(e){return n.apply(this,arguments)}}(),si=function(){var n=(0,F.Z)(function*(t){const e=["name","timeevent","condition","logic"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t))if(-1===e.indexOf(r)||"name"===r&&"string"!=typeof t[r]||"timeevent"===r&&"string"!=typeof t[r]||"condition"===r&&"string"!=typeof t[r]||"logic"===r&&"string"!=typeof t[r])return!1;return!0});return function(e){return n.apply(this,arguments)}}(),Qs=function(){var n=(0,F.Z)(function*(t){const e=["name","value"];if(null==t||0===Object.keys(t).length&&t.constructor===Object)return!1;for(const r of Object.keys(t))if(-1===e.indexOf(r)||"name"===r&&"string"!=typeof t[r]||"value"===r&&"string"!=typeof t[r])return!1;return!0});return function(e){return n.apply(this,arguments)}}(),oi=function(){var n=(0,F.Z)(function*(t){for(let e=0;e<t.length;e++){const r={},i=Object.keys(t[e]);if(i.includes("column")&&(r.column=t[e].column),i.includes("value")&&(r.value=t[e].value),i.includes("foreignkey")&&(r.foreignkey=t[e].foreignkey),i.includes("constraint")&&(r.constraint=t[e].constraint),!(yield ni(r)))return Promise.reject(new Error(`CheckSchemaValidity: schema[${e}] not valid`))}return Promise.resolve()});return function(e){return n.apply(this,arguments)}}(),ai=function(){var n=(0,F.Z)(function*(t){for(let e=0;e<t.length;e++){const r={},i=Object.keys(t[e]);if(i.includes("value")&&(r.value=t[e].value),i.includes("name")&&(r.name=t[e].name),i.includes("mode")&&(r.mode=t[e].mode),!(yield ii(r)))return Promise.reject(new Error(`CheckIndexesValidity: indexes[${e}] not valid`))}return Promise.resolve()});return function(e){return n.apply(this,arguments)}}(),ui=function(){var n=(0,F.Z)(function*(t){for(let e=0;e<t.length;e++){const r={},i=Object.keys(t[e]);if(i.includes("logic")&&(r.logic=t[e].logic),i.includes("name")&&(r.name=t[e].name),i.includes("timeevent")&&(r.timeevent=t[e].timeevent),i.includes("condition")&&(r.condition=t[e].condition),!(yield si(r)))return Promise.reject(new Error(`CheckTriggersValidity: triggers[${e}] not valid`))}return Promise.resolve()});return function(e){return n.apply(this,arguments)}}(),Ir=function(){var n=(0,F.Z)(function*(t,e){let r=[];const i=[],s=[],o=`PRAGMA table_info('${e}');`;try{if(r=yield Je(t,o,[]),r.length>0)for(const c of r)i.push(c.name),s.push(c.type);return Promise.resolve({names:i,types:s})}catch(c){return Promise.reject(new Error(`GetTableColumnNamesTypes: ${c.message}`))}});return function(e,r){return n.apply(this,arguments)}}(),dn=function(){var n=(0,F.Z)(function*(t,e,r){const i=[];try{const s=yield Ir(t,r);let o=[];if(!Object.keys(s).includes("names"))return Promise.reject(new Error(`GetValues: Table ${r} no names`));o=s.names;const c=yield Je(t,e,[]);for(const f of c){const u=[];for(const v of o)Object.keys(f).includes(v)?u.push(f[v]):u.push(null);i.push(u)}return Promise.resolve(i)}catch(s){return Promise.reject(new Error(`GetValues: ${s.message}`))}});return function(e,r,i){return n.apply(this,arguments)}}(),Zt=function(){var n=(0,F.Z)(function*(t,e){const r="BeginTransaction: ";if(!e)return Promise.reject(new Error(`${r}database not opened`));try{return t.exec("BEGIN TRANSACTION;"),Promise.resolve()}catch(s){return Promise.reject(new Error(`${r}${s.message}`))}});return function(e,r){return n.apply(this,arguments)}}(),Bt=function(){var n=(0,F.Z)(function*(t,e){const r="RollbackTransaction: ";if(!e)return Promise.reject(new Error(`${r}database not opened`));try{return t.exec("ROLLBACK TRANSACTION;"),Promise.resolve()}catch(s){return Promise.reject(new Error(`${r}${s.message}`))}});return function(e,r){return n.apply(this,arguments)}}(),Wt=function(){var n=(0,F.Z)(function*(t,e){const r="CommitTransaction: ";if(!e)return Promise.reject(new Error(`${r}database not opened`));try{return t.exec("COMMIT TRANSACTION;"),Promise.resolve()}catch(s){return Promise.reject(new Error(`${r}${s.message}`))}});return function(e,r){return n.apply(this,arguments)}}(),ut=function(){var n=(0,F.Z)(function*(t){let r=0;try{return r=t.exec("SELECT total_changes()")[0].values[0][0],Promise.resolve(r)}catch(i){return Promise.reject(new Error(`DbChanges failed: ${i.message}`))}});return function(e){return n.apply(this,arguments)}}(),mn=function(){var n=(0,F.Z)(function*(t){let r=-1;try{return r=t.exec("SELECT last_insert_rowid()")[0].values[0][0],Promise.resolve(r)}catch(i){return Promise.reject(new Error(`GetLastId failed: ${i.message}`))}});return function(e){return n.apply(this,arguments)}}(),nr=function(){var n=(0,F.Z)(function*(t,e){let r="PRAGMA foreign_keys=OFF";e&&(r="PRAGMA foreign_keys=ON");try{return t.run(r),Promise.resolve()}catch(i){return Promise.reject(new Error(`SetForeignKey: ${i.message?i.message:i}`))}});return function(e,r){return n.apply(this,arguments)}}(),ci=function(){var n=(0,F.Z)(function*(t){let e=0;try{return e=t.exec("PRAGMA user_version;")[0].values[0][0],Promise.resolve(e)}catch(r){return Promise.reject(new Error(`GetVersion: ${r.message}`))}});return function(e){return n.apply(this,arguments)}}(),li=function(){var n=(0,F.Z)(function*(t,e){try{return t.exec(`PRAGMA user_version = ${e}`),Promise.resolve()}catch(r){return Promise.reject(new Error(`SetVersion: ${r.message}`))}});return function(e,r){return n.apply(this,arguments)}}(),Gt=function(){var n=(0,F.Z)(function*(t,e,r){let i=-1,s=-1;try{s=yield ut(t);var o=e;if(!r&&e.toLowerCase().includes("DELETE FROM".toLowerCase())){let f=(o=e.replace(/\n/g,"")).split(";");var c=[];for(const u of f)if("DELETE FROM"===u.trim().substring(0,11).toUpperCase()&&u.toLowerCase().includes("WHERE".toLowerCase())){const m=u.trim(),b=yield fi(t,m,[]);c.push(b)}else c.push(u);o=c.join(";")}return t.exec(o),i=(yield ut(t))-s,Promise.resolve(i)}catch(f){return Promise.reject(new Error(`Execute: ${f.message}`))}});return function(e,r,i){return n.apply(this,arguments)}}(),Js=function(){var n=(0,F.Z)(function*(t,e,r){let i=-1;for(let s=0;s<e.length;s++){const o="statement"in e[s]?e[s].statement:null,c="values"in e[s]&&e[s].values.length>0?e[s].values:[];if(null==o){let f="ExecuteSet: Error No statement";return f+=` for index ${s}`,Promise.reject(new Error(f))}try{if(Array.isArray(c[0]))for(const f of c){const u=yield jr(f);yield Ht(t,o,u,r)}else{const f=yield jr(c);yield Ht(t,o,f,r)}i=yield mn(t)}catch(f){return Promise.reject(new Error(`ExecuteSet: ${f.message}`))}}return Promise.resolve(i)});return function(e,r,i){return n.apply(this,arguments)}}(),Je=function(){var n=(0,F.Z)(function*(t,e,r){const i=[];try{let s=[];if(s=null!=r&&r.length>0?t.exec(e,r):t.exec(e),0==s.length)return Promise.resolve([]);for(const o of s[0].values){const c={};for(let f=0;f<s[0].columns.length;f++)c[s[0].columns[f]]=o[f];i.push(c)}return Promise.resolve(i)}catch(s){return Promise.reject(new Error(`queryAll: ${s.message}`))}});return function(e,r,i){return n.apply(this,arguments)}}(),Ht=function(){var n=(0,F.Z)(function*(t,e,r,i){let s=e.replace(/\n/g,"").trim().substring(0,6).toUpperCase(),o=-1,c=e;try{if(!i&&"DELETE"===s&&(c=yield fi(t,e,r)),null!=r&&r.length>0){const f=yield jr(r);t.exec(c,f)}else t.exec(c);return o=yield mn(t),Promise.resolve(o)}catch(f){return Promise.reject(new Error(`run: ${f.message}`))}});return function(e,r,i,s){return n.apply(this,arguments)}}(),fi=function(){var n=(0,F.Z)(function*(t,e,r){let i=e;try{const s=yield di(t,!0),o=yield mi(t,!0);if(s&&o){const c=e.toUpperCase().indexOf("WHERE"),f=e.substring(0,c-1),u=e.substring(c,e.length),v=f.substring(11).trim();i=`UPDATE ${v} SET sql_deleted = 1 ${u}`,yield Xs(t,v,u,r)}return Promise.resolve(i)}catch(s){return Promise.reject(new Error(`deleteSQL: ${s.message}`))}});return function(e,r,i){return n.apply(this,arguments)}}(),Xs=function(){var n=(0,F.Z)(function*(t,e,r,i){try{const s=yield io(t,e),o=s.pop();for(const c of s){const f=yield eo(c);if(f.length<=0)continue;const u=yield ro(c);if(u.length<=0)continue;const v=yield to(c);if(v.length<=0)continue;const m=yield no(r,u,v);if(m.length<=6)continue;let b=o,y=v;o===e&&(b=f,y=u);const x="UPDATE "+b+" SET sql_deleted = 1 "+m;if(null!=i&&i.length>0){const S=yield jr(i);let E=r.split("?");";"===E[E.length-1]&&(E=E.slice(0,-1));let T=[];for(const[N,$]of E.entries())for(let A=0;A<y.length;A++)$.indexOf(y[A])>-1&&T.push(S[N]);t.exec(x,T)}else t.exec(x);if(-1==(yield mn(t))){const S=`UPDATE sql_deleted failed for references table: ${f}`;return Promise.reject(new Error(`findReferencesAndUpdate: ${S}`))}}return}catch(s){return Promise.reject(new Error(`findReferencesAndUpdate: ${s.message}`))}});return function(e,r,i,s){return n.apply(this,arguments)}}(),eo=function(){var n=(0,F.Z)(function*(t){var e="";if(t.length>0){const r=t.split(new RegExp("REFERENCES","i"));if(2===r.length){const i=r[1].indexOf("(");e=r[1].substring(0,i).trim()}}return e});return function(e){return n.apply(this,arguments)}}(),to=function(){var n=(0,F.Z)(function*(t){let e=[];if(t.length>0){const r=t.split(new RegExp("REFERENCES","i"));if(2===r.length){const i=r[1].indexOf("("),s=r[1].indexOf(")");e=r[1].substring(i+1,s).trim().split(",")}}return e});return function(e){return n.apply(this,arguments)}}(),ro=function(){var n=(0,F.Z)(function*(t){let e=[];if(t.length>0){const r=t.split(new RegExp("REFERENCES","i"));if(2===r.length){const i=r[0].indexOf("("),s=r[0].indexOf(")");e=r[0].substring(i+1,s).trim().split(",")}}return e});return function(e){return n.apply(this,arguments)}}(),no=function(){var n=(0,F.Z)(function*(t,e,r){var i="";if(t.length>0){const s=t.toLowerCase().indexOf("WHERE".toLowerCase()),o=t.substring(s+6);if(e.length===r.length){for(let c=0;c<e.length;c++){let f="withRefsNames",u=o.indexOf(e[c]);if(-1===u&&(u=o.indexOf(r[c]),f="colNames"),u>-1){let v="";const m=o.indexOf("=",u);if(m>-1){const b=o.indexOf("AND",m),y=o.indexOf("and",m);v=b>-1?o.substring(m+1,b-1).trim():y>-1?o.substring(m+1,y-1).trim():o.substring(m+1,o.length).trim(),c>0&&(i+=" AND "),i+="withRefsNames"===f?`${r[c]} = ${v}`:`${e[c]} = ${v}`}}}i="WHERE "+i}}return i});return function(e,r,i){return n.apply(this,arguments)}}(),io=function(){var n=(0,F.Z)(function*(t,e){const r="SELECT sql FROM sqlite_master WHERE sql LIKE('%FOREIGN KEY%') AND sql LIKE('%REFERENCES%') AND sql LIKE('%"+e+"%') AND sql LIKE('%ON DELETE%');";try{const i=yield Je(t,r,[]);let s=[];return i.length>0&&(s=so(i[0].sql)),Promise.resolve(s)}catch(i){return Promise.reject(new Error(`getReferences: ${i.message}`))}});return function(e,r){return n.apply(this,arguments)}}(),hi=function(){var n=(0,F.Z)(function*(t){try{const e=yield fn(t);return Promise.resolve(e)}catch(e){return Promise.reject(new Error(`getTableList: ${e.message}`))}});return function(e){return n.apply(this,arguments)}}(),Pt=function(){var n=(0,F.Z)(function*(t,e){try{let r="SELECT name FROM sqlite_master WHERE ";r+=`type='table' AND name='${e}';`;const s=(yield Je(t,r,[])).length>0;return Promise.resolve(s)}catch(r){return Promise.reject(new Error(`isTableExists: ${r.message}`))}});return function(e,r){return n.apply(this,arguments)}}(),di=function(){var n=(0,F.Z)(function*(t,e){if(!e)return Promise.reject("isLastModified: database not opened");try{const r=yield fn(t);for(const i of r)if((yield Ir(t,i)).names.includes("last_modified"))return Promise.resolve(!0)}catch(r){return Promise.reject(`isLastModified: ${r}`)}});return function(e,r){return n.apply(this,arguments)}}(),mi=function(){var n=(0,F.Z)(function*(t,e){if(!e)return Promise.reject("isSqlDeleted: database not opened");try{const r=yield fn(t);for(const i of r)if((yield Ir(t,i)).names.includes("sql_deleted"))return Promise.resolve(!0)}catch(r){return Promise.reject(`isSqlDeleted: ${r}`)}});return function(e,r){return n.apply(this,arguments)}}(),jr=function(){var n=(0,F.Z)(function*(t){const e=[];for(const r of t){let i=r;typeof r>"u"&&(i=null),e.push(i)}return Promise.resolve(e)});return function(e){return n.apply(this,arguments)}}(),so=n=>{let t=[];const e=n.split(new RegExp("FOREIGN KEY","i"));for(let r=1;r<e.length;r++)t.push(e[r].split(new RegExp("ON DELETE","i"))[0].trim());if(n.substring(0,12).toLowerCase()==="CREATE TABLE".toLowerCase()){const r=n.indexOf("("),i=n.substring(13,r).trim();t.push(i)}return t},oo=function(){var n=(0,F.Z)(function*(t,e){let r=-1;const i=e.version;try{return yield li(t,i),"full"===e.mode&&(yield Ys(t)),r=yield ao(t,e),Promise.resolve(r)}catch(s){return Promise.reject(new Error(`CreateDatabaseSchema: ${s.message}`))}});return function(e,r){return n.apply(this,arguments)}}(),ao=function(){var n=(0,F.Z)(function*(t,e){let r=0;try{yield Zt(t,!0)}catch(s){return Promise.reject(new Error(`CreateSchema: ${s.message}`))}const i=yield uo(e);if(i.length>0){const s=i.join("\n");try{if(r=yield Gt(t,s,!0),r<0)try{yield Bt(t,!0)}catch(o){return Promise.reject(new Error(`CreateSchema: changes < 0 ${o.message}`))}}catch(o){const c=o.message;try{return yield Bt(t,!0),Promise.reject(new Error(`CreateSchema: ${c}`))}catch(f){return Promise.reject(new Error(`CreateSchema: changes < 0 ${f.message}: ${c}`))}}}try{return yield Wt(t,!0),Promise.resolve(r)}catch(s){return Promise.reject(new Error(`CreateSchema: commit ${s.message}`))}});return function(e,r){return n.apply(this,arguments)}}(),uo=function(){var n=(0,F.Z)(function*(t){const e=[];let r=!1,i=!1;try{for(const s of t.tables){if(null!=s.schema&&s.schema.length>=1){e.push(`CREATE TABLE IF NOT EXISTS ${s.name} (`);for(let o=0;o<s.schema.length;o++)o===s.schema.length-1?s.schema[o].column?(e.push(`${s.schema[o].column} ${s.schema[o].value}`),"last_modified"===s.schema[o].column&&(r=!0),"sql_deleted"===s.schema[o].column&&(i=!0)):s.schema[o].foreignkey?e.push(`FOREIGN KEY (${s.schema[o].foreignkey}) ${s.schema[o].value}`):s.schema[o].constraint&&e.push(`CONSTRAINT ${s.schema[o].constraint} ${s.schema[o].value}`):s.schema[o].column?e.push(`${s.schema[o].column} ${s.schema[o].value},`):s.schema[o].foreignkey?e.push(`FOREIGN KEY (${s.schema[o].foreignkey}) ${s.schema[o].value},`):s.schema[o].primarykey?e.push(`FOREIGN KEY ${s.schema[o].value},`):s.schema[o].constraint&&e.push(`CONSTRAINT ${s.schema[o].constraint} ${s.schema[o].value},`);if(e.push(");"),r&&i){let o="CREATE TRIGGER IF NOT EXISTS ";o+=`${s.name}`,o+="_trigger_last_modified ",o+=`AFTER UPDATE ON ${s.name} `,o+="FOR EACH ROW WHEN NEW.last_modified < ",o+="OLD.last_modified BEGIN UPDATE ",o+=`${s.name} `,o+="SET last_modified = ",o+="(strftime('%s','now')) WHERE id=OLD.id; END;",e.push(o)}}if(null!=s.indexes&&s.indexes.length>=1)for(const o of s.indexes){const c=s.name;let f=`CREATE ${Object.keys(o).includes("mode")?o.mode+" ":""} INDEX IF NOT EXISTS `;f+=`${o.name} ON ${c} (${o.value});`,e.push(f)}if(null!=s.triggers&&s.triggers.length>=1)for(const o of s.triggers){const c=s.name;o.timeevent.toUpperCase().endsWith(" ON")&&(o.timeevent=o.timeevent.substring(0,o.timeevent.length-3));let f="CREATE TRIGGER IF NOT EXISTS ";f+=`${o.name} ${o.timeevent} ON ${c} `,o.condition&&(f+=`${o.condition} `),f+=`${o.logic};`,e.push(f)}}return Promise.resolve(e)}catch(s){return Promise.reject(s)}});return function(e){return n.apply(this,arguments)}}(),co=function(){var n=(0,F.Z)(function*(t,e,r){let i=0,s=!1,o=-1,c="",f=-1;try{f=yield ut(t),yield Zt(t,!0)}catch(u){return Promise.reject(new Error(`createTablesData: ${u.message}`))}for(const u of e.tables)if(null!=u.values&&u.values.length>=1)try{if(o=yield lo(t,u,e.mode),r.emit({progress:`create table data ${u.name}`}),o<0)break;s=!0}catch(v){c=v.message,s=!1;break}if(s)try{return yield Wt(t,!0),i=(yield ut(t))-f,Promise.resolve(i)}catch(u){return Promise.reject(new Error(`CreateTablesData: ${u.message}`))}else{if(!(c.length>0))return Promise.resolve(0);try{return yield Bt(t,!0),Promise.reject(new Error(`CreateTablesData: ${c}`))}catch(u){return Promise.reject(new Error(`CreateTablesData: ${u.message}: ${c}`))}}});return function(e,r,i){return n.apply(this,arguments)}}(),lo=function(){var n=(0,F.Z)(function*(t,e,r){let i=-1;try{if(!(yield Pt(t,e.name)))return Promise.reject(new Error(`CreateTableData: Table ${e.name} does not exist`));const o=yield Ir(t,e.name),f=o.names;if(0===o.types.length)return Promise.reject(new Error(`CreateTableData: Table ${e.name} info does not exist`));for(let u=0;u<e.values.length;u++){let v=e.values[u],m=!0;const b=yield fo(t,f,v,u,e.name,r);if(m=yield ho(t,b,v,e.name,f),m){if("DELETE"===b.substring(0,6).toUpperCase()&&(v=[]),i=yield Ht(t,b,v,!0),i<0)return Promise.reject(new Error("CreateTableData: lastId < 0"))}else i=0}return Promise.resolve(i)}catch(s){return Promise.reject(new Error(`CreateTableData: ${s.message}`))}});return function(e,r,i){return n.apply(this,arguments)}}(),fo=function(){var n=(0,F.Z)(function*(t,e,r,i,s,o){if(r.length!=e.length||0===r.length||0===e.length)return Promise.reject(new Error(`CreateRowStatement: Table ${s} values row ${i} not correct length`));try{const c=yield mo(t,s,e[0],r[0]);let f;if("full"===o||"partial"===o&&!c){const u=e.join(),v=yield po(e.length);f=`INSERT INTO ${s} (${u}) VALUES (`,f+=`${v});`}else{let u=!0;const m=e.findIndex(b=>"sql_deleted"===b);if(m>=0&&1===r[m]&&(u=!1,f=`DELETE FROM ${s} WHERE `,f+="string"==typeof r[0]?`${e[0]} = '${r[0]}';`:`${e[0]} = ${r[0]};`),u){const b=yield yo(e);if(0===b.length)return Promise.reject(new Error(`CreateRowStatement: Table ${s} values row ${i} not set to String`));f=`UPDATE ${s} SET ${b} WHERE `,f+="string"==typeof r[0]?`${e[0]} = '${r[0]}';`:`${e[0]} = ${r[0]};`}}return Promise.resolve(f)}catch(c){return Promise.reject(new Error(`CreateRowStatement: ${c.message}`))}});return function(e,r,i,s,o,c){return n.apply(this,arguments)}}(),ho=function(){var n=(0,F.Z)(function*(t,e,r,i,s){if("UPDATE"!==e.substring(0,6))return Promise.resolve(!0);try{let c=`SELECT * FROM ${i} WHERE `;c+="string"==typeof r[0]?`${s[0]} = '${r[0]}';`:`${s[0]} = ${r[0]};`;const f=yield dn(t,c,i);let u=[];if(f.length>0&&(u=f[0]),r.length>0&&u.length>0&&r.length===u.length){for(let v=0;v<r.length;v++)if(r[v]!==u[v])return Promise.resolve(!0);return Promise.resolve(!1)}return Promise.reject(new Error("CheckUpdate: Both arrays not the same length"))}catch(c){return Promise.reject(new Error(`CheckUpdate: ${c.message}`))}});return function(e,r,i,s,o){return n.apply(this,arguments)}}(),mo=function(){var n=(0,F.Z)(function*(t,e,r,i){let s=!1,o=`SELECT ${r} FROM ${e} WHERE ${r} = `;"number"==typeof i&&(o+=`${i};`),"string"==typeof i&&(o+=`'${i}';`);try{return 1===(yield Je(t,o,[])).length&&(s=!0),Promise.resolve(s)}catch(c){return Promise.reject(new Error(`IsIdExists: ${c.message}`))}});return function(e,r,i,s){return n.apply(this,arguments)}}(),po=function(){var n=(0,F.Z)(function*(t){let e="";for(let r=0;r<t;r++)e+="?,";return e.length>1?(e=e.slice(0,-1),Promise.resolve(e)):Promise.reject(new Error("CreateQuestionMarkString: length = 0"))});return function(e){return n.apply(this,arguments)}}(),yo=function(){var n=(0,F.Z)(function*(t){let e="";for(const r of t)e+=`${r} = ? ,`;return e.length>1?(e=e.slice(0,-1),Promise.resolve(e)):Promise.reject(new Error("SetNameForUpdate: length = 0"))});return function(e){return n.apply(this,arguments)}}(),_o=function(){var n=(0,F.Z)(function*(t,e){const r=`CREATE VIEW IF NOT EXISTS ${e.name} AS ${e.value};`;try{return(yield Gt(t,r,!0))<0?Promise.reject(new Error(`CreateView: ${e.name} failed`)):Promise.resolve()}catch(i){return Promise.reject(new Error(`CreateView: ${i.message}`))}});return function(e,r){return n.apply(this,arguments)}}(),vo=function(){var n=(0,F.Z)(function*(t,e){let r=!1,i="",s=-1,o=-1;try{s=yield ut(t),yield Zt(t,!0)}catch(c){return Promise.reject(new Error(`createViews: ${c.message}`))}for(const c of e.views)if(null!=c.value)try{yield _o(t,c),r=!0}catch(f){i=f.message,r=!1;break}if(r)try{return yield Wt(t,!0),o=(yield ut(t))-s,Promise.resolve(o)}catch(c){return Promise.reject(new Error(`createViews: ${c.message}`))}else{if(!(i.length>0))return Promise.resolve(0);try{return yield Bt(t,!0),Promise.reject(new Error(`createViews: ${i}`))}catch(c){return Promise.reject(new Error(`createViews: ${c.message}: ${i}`))}}});return function(e,r){return n.apply(this,arguments)}}(),go=function(){var n=(0,F.Z)(function*(t,e,r){const i={};let s=[],o=[],c="";try{o=yield bo(t);const f=yield So(t);if(0===f.length)return Promise.reject(new Error("createExportObject: table's names failed"));if(!(yield Pt(t,"sync_table"))&&"partial"===e.mode)return Promise.reject(new Error("No sync_table available"));switch(e.mode){case"partial":s=yield Eo(t,f,r);break;case"full":s=yield wo(t,f,r);break;default:c="createExportObject: expMode "+e.mode+" not defined"}return c.length>0?Promise.reject(new Error(c)):(s.length>0&&(i.database=e.database,i.version=e.version,i.encrypted=e.encrypted,i.mode=e.mode,i.tables=s,o.length>0&&(i.views=o)),Promise.resolve(i))}catch(f){return Promise.reject(new Error("createExportObject: "+f.message))}});return function(e,r,i){return n.apply(this,arguments)}}(),bo=function(){var n=(0,F.Z)(function*(t){const e=[];let r="SELECT name,sql FROM sqlite_master WHERE ";r+="type='view' AND name NOT LIKE 'sqlite_%';";let i=[];try{i=yield Je(t,"SELECT name,sql FROM sqlite_master WHERE type='view' AND name NOT LIKE 'sqlite_%';",[]);for(const s of i){const o={};o.name=s.name,o.value=s.sql.substring(s.sql.indexOf("AS ")+3),e.push(o)}return Promise.resolve(e)}catch(s){return Promise.reject(new Error(`getViewsName: ${s.message}`))}});return function(e){return n.apply(this,arguments)}}(),wo=function(){var n=(0,F.Z)(function*(t,e,r){const i=[];let s="";try{for(const o of e){let c,f;if(!o.name){s="GetTablesFull: no name";break}if(c=o.name,!o.sql){s="GetTablesFull: no sql";break}f=o.sql;const u={},v=yield pi(f);if(0===v.length){s="GetTablesFull: no Schema returned";break}yield oi(v);const m=yield yi(t,c);m.length>0&&(yield ai(m));const b=yield _i(t,c);b.length>0&&(yield ui(b));let y=`Full: Table ${c} schema export completed ...`;r.emit({progress:y});const x=`SELECT * FROM ${c};`,g=yield dn(t,x,c);if(u.name=c,!(v.length>0)){s="GetTablesFull: must contain schema";break}if(u.schema=v,m.length>0&&(u.indexes=m),b.length>0&&(u.triggers=b),g.length>0&&(u.values=g),Object.keys(u).length<=1){s=`GetTablesFull: table ${c} is not a jsonTable`;break}y=`Full: Table ${c} table data export completed ...`,r.emit({progress:y}),i.push(u)}return s.length>0?Promise.reject(new Error(s)):Promise.resolve(i)}catch(o){return Promise.reject(new Error(`GetTablesFull: ${o.message}`))}});return function(e,r,i){return n.apply(this,arguments)}}(),pi=function(){var n=(0,F.Z)(function*(t){const e=[],r=t.indexOf("("),i=t.lastIndexOf(")");let s=t.substring(r+1,i);try{s=yield Do(s);const o=s.split(",");for(let c=0;c<o.length;c++){let f=[];const u=o[c].replace(/\n/g,"").trim();f[0]=u.substring(0,u.indexOf(" ")),f[1]=u.substring(u.indexOf(" ")+1);const v={};if("FOREIGN"===f[0].toUpperCase()){const m=u.indexOf("("),b=u.indexOf(")"),x=u.substring(m+1,b).split("\xa7");f[0]=x.join(","),f[0]=f[0].replace(/, /g,","),f[1]=u.substring(b+2),v.foreignkey=f[0]}else if("PRIMARY"===f[0].toUpperCase()){const m=u.indexOf("("),b=u.indexOf(")"),x=u.substring(m+1,b).split("\xa7");f[0]="CPK_"+x.join("_"),f[0]=f[0].replace(/_ /g,"_"),f[1]=u,v.constraint=f[0]}else if("CONSTRAINT"===f[0].toUpperCase()){let m=[];const b=f[1].trim();m[0]=b.substring(0,b.indexOf(" ")),m[1]=b.substring(b.indexOf(" ")+1),f[0]=m[0],v.constraint=f[0],f[1]=m[1]}else v.column=f[0];v.value=f[1].replace(/\xa7/g,","),e.push(v)}return Promise.resolve(e)}catch(o){return Promise.reject(new Error(o.message))}});return function(e){return n.apply(this,arguments)}}(),yi=function(){var n=(0,F.Z)(function*(t,e){const r=[];let i="";try{let s="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";s+=`type = 'index' AND tbl_name = '${e}' `,s+="AND sql NOTNULL;";const o=yield Je(t,s,[]);if(o.length>0){for(const c of o){if(3!==Object.keys(c).length){i=`GetIndexes: Table ${e} creating indexes`;break}if(c.tbl_name!==e){i=`GetIndexes: Table ${e} doesn't match`;break}{const u=c.sql,v=u.includes("UNIQUE")?"UNIQUE":"",m=u.lastIndexOf("("),b=u.lastIndexOf(")"),y={};y.name=c.name,y.value=u.slice(m+1,b),v.length>0&&(y.mode=v),r.push(y)}}if(i.length>0)return Promise.reject(new Error(i))}return Promise.resolve(r)}catch(s){return Promise.reject(new Error(`GetIndexes: ${s.message}`))}});return function(e,r){return n.apply(this,arguments)}}(),_i=function(){var n=(0,F.Z)(function*(t,e){const r=[];try{let i="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";i+=`type = 'trigger' AND tbl_name = '${e}' `,i+="AND sql NOT NULL;";const s=yield Je(t,i,[]);if(s.length>0)for(const o of s){if(3!==Object.keys(o).length)return Promise.reject(new Error(`GetTriggers: Table ${e} creating indexes`));if(o.tbl_name!==e)return Promise.reject(new Error(`GetTriggers: Table ${e} doesn't match`));{const u=o.name;let v=o.sql.split(u);if(2!=v.length)return Promise.reject(new Error("GetTriggers: sql split name does not return 2 values"));if(!v[1].includes(e))return Promise.reject(new Error(`GetTriggers: sql split does not contains ${e}`));const m=v[1].split(e,1)[0].trim();if(v=v[1].split(m+" "+e),2!=v.length)return Promise.reject(new Error("GetTriggers: sql split tableName does not return 2 values"));let b="",y="";if("BEGIN"!==v[1].trim().substring(0,5).toUpperCase()){if(v=v[1].trim().split("BEGIN"),2!=v.length)return Promise.reject(new Error("GetTriggers: sql split BEGIN does not return 2 values"));b=v[0].trim(),y="BEGIN"+v[1]}else y=v[1].trim();const x={};x.name=u,x.logic=y,b.length>0&&(x.condition=b),x.timeevent=m,r.push(x)}}return Promise.resolve(r)}catch(i){return Promise.reject(new Error(`GetTriggers: ${i.message}`))}});return function(e,r){return n.apply(this,arguments)}}(),Eo=function(){var n=(0,F.Z)(function*(t,e,r){const i=[];let s={},o=0,c=[],f="";try{const u=yield xo(t,e);Object.keys(u).includes("syncDate")&&(o=u.syncDate),Object.keys(u).includes("modTables")&&(s=u.modTables,c=Object.keys(s));for(const v of e){let m="",b="";if(!v.name){f="GetTablesFull: no name";break}if(m=v.name,!v.sql){f="GetTablesFull: no sql";break}if(b=v.sql,0==c.length||-1===c.indexOf(m)||"No"==s[m])continue;const y={};let x=[],g=[],S=[];y.name=v,"Create"===s[y.name]&&(x=yield pi(b),x.length>0&&(yield oi(x)),g=yield yi(t,m),g.length>0&&(yield ai(g)),S=yield _i(t,m),S.length>0&&(yield ui(S)));let E=`Partial: Table ${m} schema export completed ...`;r.emit({progress:E});let T="";T="Create"===s[m]?`SELECT * FROM ${m};`:`SELECT * FROM ${m} WHERE last_modified > ${o};`;const N=yield dn(t,T,m);if(y.name=m,x.length>0&&(y.schema=x),g.length>0&&(y.indexes=g),S.length>0&&(y.triggers=S),N.length>0&&(y.values=N),Object.keys(y).length<=1){f=`GetTablesPartial: table ${m} is not a jsonTable`;break}E=`Partial: Table ${m} table data export completed ...`,r.emit({progress:E}),i.push(y)}return f.length>0?Promise.reject(new Error(f)):Promise.resolve(i)}catch(u){return Promise.reject(new Error(`GetTablesPartial: ${u.message}`))}});return function(e,r,i){return n.apply(this,arguments)}}(),xo=function(){var n=(0,F.Z)(function*(t,e){const r={};try{const i=yield vi(t);if(i<=0)return Promise.reject(new Error("GetPartialModeData: no syncDate"));const s=yield ko(t,e,i);return s.length<=0?Promise.reject(new Error("GetPartialModeData: no modTables")):(r.syncDate=i,r.modTables=s,Promise.resolve(r))}catch(i){return Promise.reject(new Error(`GetPartialModeData: ${i.message}`))}});return function(e,r){return n.apply(this,arguments)}}(),So=function(){var n=(0,F.Z)(function*(t){let e="SELECT name,sql FROM sqlite_master WHERE ";e+="type='table' AND name NOT LIKE 'sync_table' ",e+="AND name NOT LIKE '_temp_%' ",e+="AND name NOT LIKE 'sqlite_%';";try{const r=yield Je(t,"SELECT name,sql FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sync_table' AND name NOT LIKE '_temp_%' AND name NOT LIKE 'sqlite_%';",[]);return Promise.resolve(r)}catch(r){return Promise.reject(new Error(`getTablesNamesSQL: ${r.message}`))}});return function(e){return n.apply(this,arguments)}}(),ko=function(){var n=(0,F.Z)(function*(t,e,r){let i="";try{const s={};for(const o of e){let c,f="SELECT count(*) AS tcount  ";f+=`FROM ${o.name};`;let u=yield Je(t,f,[]);if(1!=u.length){i="GetTableModified: total count not returned";break}const v=u[0].tcount;if(f="SELECT count(*) AS mcount FROM ",f+=`${o.name} WHERE last_modified > `,f+=`${r};`,u=yield Je(t,f,[]),1!=u.length)break;const m=u[0].mcount;c=0===m?"No":v===m?"Create":"Modified",s[o.name]=c}return i.length>0?Promise.reject(new Error(i)):Promise.resolve(s)}catch(s){return Promise.reject(new Error(`GetTableModified: ${s.message}`))}});return function(e,r,i){return n.apply(this,arguments)}}(),vi=function(){var n=(0,F.Z)(function*(t){try{const r=yield Je(t,"SELECT sync_date FROM sync_table WHERE id = 1;",[]);return Promise.resolve(r[0].sync_date)}catch(e){return Promise.reject(new Error(`GetSynchroDate: ${e.message}`))}});return function(e){return n.apply(this,arguments)}}(),gi=function(){var n=(0,F.Z)(function*(t){try{const r=yield Je(t,"SELECT sync_date FROM sync_table WHERE id = 2;",[]);return Promise.resolve(0===r.length?-1:r[0].sync_date)}catch(e){return Promise.reject(new Error(`getLastExport: ${e.message}`))}});return function(e){return n.apply(this,arguments)}}(),Po=function(){var n=(0,F.Z)(function*(t,e){try{if(!(yield Pt(t,"sync_table")))return Promise.reject(new Error("setLastExportDate: No sync_table available"));const i=Math.round(new Date(e).getTime()/1e3);let s="";return s=(yield gi(t))>0?`UPDATE sync_table SET sync_date = ${i} WHERE id = 2;`:`INSERT INTO sync_table (sync_date) VALUES (${i});`,(yield Gt(t,s,!1))<0?{result:!1,message:"setLastExportDate failed"}:{result:!0}}catch(r){return{result:!1,message:`setLastExportDate failed: ${r.message}`}}});return function(e,r){return n.apply(this,arguments)}}(),To=function(){var n=(0,F.Z)(function*(t){let e;try{if(!(yield Pt(t,"sync_table")))return Promise.reject(new Error("DelExportedRows: No sync_table available"));if(e=yield gi(t),e<0)return Promise.reject(new Error("DelExportedRows: no last exported date available"));const i=yield hi(t);if(0===i.length)return Promise.reject(new Error("DelExportedRows: No table's names returned"));for(const s of i){let o=-1;const c=`DELETE FROM ${s}\n            WHERE sql_deleted = 1 AND last_modified < ${e};`;if(o=yield Ht(t,c,[],!0),o<0)return Promise.reject(new Error("DelExportedRows: lastId < 0"))}}catch(r){return Promise.reject(new Error(`DelExportedRows failed: ${r.message}`))}});return function(e){return n.apply(this,arguments)}}(),Do=function(){var n=(0,F.Z)(function*(t){const e=bi(t,"("),r=bi(t,")");if(e.length!=r.length)return Promise.reject("ModEmbeddedParentheses: Not same number of '(' & ')'");if(0===e.length)return Promise.resolve(t);let i=t.substring(0,e[0]-1);for(let s=0;s<e.length;s++){let o;s<e.length-1&&e[s+1]<r[s]?(o=t.substring(e[s]-1,r[s+1]),s++):o=t.substring(e[s]-1,r[s]),i+=o.replace(/,/g,"\xa7"),s<e.length-1&&(i+=t.substring(r[s],e[s+1]-1))}return i+=t.substring(r[r.length-1],t.length),Promise.resolve(i)});return function(e){return n.apply(this,arguments)}}(),bi=(n,t)=>{let e=[...n];return t=t.toLowerCase(),e.reduce((r,i,s)=>i.toLowerCase()===t?[...r,s]:r,[])},Ao=function(){var n=(0,F.Z)(function*(t,e,r,i){let s=-1;const o=new Int32Array(Object.keys(e).map(c=>parseInt(c))).sort();for(const c of o)if(c>r&&c<=i){const f=e[c].statements;if(0===f.length)return Promise.reject("onUpgrade: statements not given");try{yield nr(t,!1);const u=yield ut(t);yield Oo(t,f),yield li(t,c),yield nr(t,!0),s=(yield ut(t))-u}catch(u){return Promise.reject(new Error(`onUpgrade: ${u.message}`))}}return Promise.resolve(s)});return function(e,r,i,s){return n.apply(this,arguments)}}(),Oo=function(){var n=(0,F.Z)(function*(t,e){try{yield Zt(t,!0);for(const r of e)yield Gt(t,r,!1);return yield Wt(t,!0),Promise.resolve()}catch(r){return yield Bt(t,!0),Promise.reject(`ExecuteStatementProcess: ${r}`)}});return function(e,r){return n.apply(this,arguments)}}();class wi{constructor(t,e,r,i,s,o){this.vUpgDict={},this.autoSave=!1,this.wasmPath="/assets",this.isBackup=!1,this.isTransactionActive=!1,this.dbName=t,this.store=i,this.version=e,this.mDb=null,this.vUpgDict=r,this._isDBOpen=!1,this.autoSave=s,this.wasmPath=o}open(){var t=this;return(0,F.Z)(function*(){const e={locateFile:r=>`${t.wasmPath}/${r}`};return new Promise((r,i)=>{try{Zs(e).then(function(){var s=(0,F.Z)(function*(o){const c=yield ln(t.dbName,t.store);null!=c?t.mDb=new o.Database(c):(t.mDb=new o.Database,yield Ws(t.dbName,t.store)),t._isDBOpen=!0;let f=yield ci(t.mDb);if(t.version>f&&Object.keys(t.vUpgDict).length>0)try{if((yield _t(t.dbName,t.store))&&(yield Hs(t.dbName,`backup-${t.dbName}`,t.store),t.isBackup=!0),-1===(yield Ao(t.mDb,t.vUpgDict,f,t.version)))try{t.isBackup&&(yield ri(t.dbName,"backup",t.store))}catch(m){return i(new Error(`Open: ${m.message}`))}t.isBackup&&(yield qt(`backup-${t.dbName}`,t.store))}catch{try{t.isBackup&&(yield ri(t.dbName,"backup",t.store))}catch(v){return i(new Error(`Open: ${v.message}`))}}if(t.autoSave)try{yield t.saveToStore()}catch(u){return t._isDBOpen=!1,i(`Open: ${u}`)}return yield nr(t.mDb,!0),r()});return function(o){return s.apply(this,arguments)}}())}catch(s){return t._isDBOpen=!1,i(`in open ${s}`)}})})()}isDBOpen(){return this._isDBOpen}close(){var t=this;return(0,F.Z)(function*(){if(null!=t.mDb&&t._isDBOpen)try{yield t.saveToStore(!1),t.mDb.close(),t._isDBOpen=!1}catch(e){return t._isDBOpen=!1,Promise.reject(`in close ${e}`)}return Promise.resolve()})()}saveToStore(t=!0){var e=this;return(0,F.Z)(function*(){if(null!=e.mDb&&e._isDBOpen)try{yield Gs(e.mDb,e.dbName,e.store),t&&(yield nr(e.mDb,!0))}catch(r){return Promise.reject(`in saveToStore ${r}`)}return Promise.resolve()})()}exportDB(){var t=this;return(0,F.Z)(function*(){try{return t.mDb.export()}catch(e){return Promise.reject(`exportDB: ${e.message?e.message:e}`)}})()}getVersion(){var t=this;return(0,F.Z)(function*(){if(null!=t.mDb&&t._isDBOpen)try{const e=yield ci(t.mDb);return Promise.resolve(e)}catch(e){return t._isDBOpen=!1,Promise.reject(`in getVersion ${e}`)}})()}isDBExists(t){var e=this;return(0,F.Z)(function*(){try{const r=yield _t(t,e.store);return Promise.resolve(r)}catch(r){return Promise.reject(`in isDBExists ${r}`)}})()}deleteDB(t){var e=this;return(0,F.Z)(function*(){try{const r=yield e.isDBExists(t);return r&&!e._isDBOpen&&(yield e.open()),yield e.close(),r&&(yield qt(t,e.store)),Promise.resolve()}catch(r){return Promise.reject(new Error(`DeleteDB: ${r.message}`))}})()}executeSQL(t,e=!0){var r=this;return(0,F.Z)(function*(){if(!r._isDBOpen){let i=`ExecuteSQL: Database ${r.dbName} `;return i+="not opened",Promise.reject(new Error(i))}try{e&&!r.isTransactionActive&&(yield Zt(r.mDb,r._isDBOpen),r.isTransactionActive=!0)}catch(i){return Promise.reject(new Error(`executeSQL: ${i.message}`))}try{const i=yield Gt(r.mDb,t,!1);return i<0?Promise.reject(new Error("ExecuteSQL: changes < 0")):(e&&r.isTransactionActive&&(yield Wt(r.mDb,r._isDBOpen)),Promise.resolve(i))}catch(i){let s=`ExecuteSQL: ${i.message}`;try{e&&r.isTransactionActive&&(yield Bt(r.mDb,r._isDBOpen))}catch(o){s+=` : ${o.message}`}return Promise.reject(new Error(`ExecuteSQL: ${s}`))}finally{if(r.isTransactionActive=!1,r.autoSave)try{yield r.saveToStore()}catch(i){return r._isDBOpen=!1,Promise.reject(`ExecuteSQL: ${i}`)}}})()}execSet(t,e=!0){var r=this;return(0,F.Z)(function*(){if(!r._isDBOpen){let o=`ExecSet: Database ${r.dbName} `;return o+="not opened",Promise.reject(new Error(o))}const i={changes:-1,lastId:-1};let s=-1;try{s=yield ut(r.mDb),e&&!r.isTransactionActive&&(yield Zt(r.mDb,r._isDBOpen),r.isTransactionActive=!0)}catch(o){return Promise.reject(new Error(`ExecSet: ${o.message}`))}try{const o=yield Js(r.mDb,t,!1);if(o<0)return Promise.reject(new Error("ExecSet: changes < 0"));e&&r.isTransactionActive&&(yield Wt(r.mDb,r._isDBOpen));const c=(yield ut(r.mDb))-s;return i.changes=c,i.lastId=o,Promise.resolve(i)}catch(o){let c=`ExecSet: ${o.message}`;try{e&&r.isTransactionActive&&(yield Bt(r.mDb,r._isDBOpen))}catch(f){c+=` : ${f.message}`}return Promise.reject(new Error(`ExecSet: ${c}`))}finally{if(r.autoSave){r.isTransactionActive=!1;try{yield r.saveToStore()}catch(o){return r._isDBOpen=!1,Promise.reject(`ExecSet: ${o}`)}}}})()}selectSQL(t,e){var r=this;return(0,F.Z)(function*(){if(!r._isDBOpen){let i=`SelectSQL: Database ${r.dbName} `;return i+="not opened",Promise.reject(new Error(i))}try{let i=yield Je(r.mDb,t,e);return Promise.resolve(i)}catch(i){return Promise.reject(new Error(`SelectSQL: ${i.message}`))}})()}runSQL(t,e,r=!0){var i=this;return(0,F.Z)(function*(){let s=-1;if(!i._isDBOpen){let f=`RunSQL: Database ${i.dbName} `;return f+="not opened",Promise.reject(new Error(f))}const o={changes:-1,lastId:-1};let c=-1;try{c=yield ut(i.mDb),r&&!i.isTransactionActive&&(yield Zt(i.mDb,i._isDBOpen),i.isTransactionActive=!0)}catch(f){return Promise.reject(new Error(`RunSQL: ${f.message}`))}try{if(s=yield Ht(i.mDb,t,e,!1),s<0)return Promise.reject(new Error("RunSQL: lastId < 0"));r&&i.isTransactionActive&&(yield Wt(i.mDb,i._isDBOpen));const f=(yield ut(i.mDb))-c;return o.changes=f,o.lastId=s,Promise.resolve(o)}catch(f){let u=`RunSQL: ${f.message}`;try{r&&i.isTransactionActive&&(yield Bt(i.mDb,i._isDBOpen))}catch(v){u+=` : ${v.message}`}return Promise.reject(new Error(`${u}`))}finally{if(i.autoSave){i.isTransactionActive=!1;try{yield i.saveToStore()}catch(f){return i._isDBOpen=!1,Promise.reject(`ExecSet: ${f}`)}}}})()}getTableNames(){var t=this;return(0,F.Z)(function*(){if(!t._isDBOpen){let e=`GetTableNames: Database ${t.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{let e=yield hi(t.mDb);return Promise.resolve(e)}catch(e){return Promise.reject(new Error(`GetTableNames: ${e.message}`))}})()}isTable(t){var e=this;return(0,F.Z)(function*(){if(!e._isDBOpen){let r=`isTable: Database ${e.dbName} `;return r+="not opened",Promise.reject(new Error(r))}try{const r=yield Pt(e.mDb,t);return Promise.resolve(r)}catch(r){return Promise.reject(new Error(`IsTable: ${r.message}`))}})()}createSyncTable(){var t=this;return(0,F.Z)(function*(){if(!t._isDBOpen){let r=`createSyncTable: Database ${t.dbName} `;return r+="not opened",Promise.reject(new Error(r))}let e=-1;try{if(yield Pt(t.mDb,"sync_table"))return Promise.resolve(0);{const i=yield di(t.mDb,t._isDBOpen),s=yield mi(t.mDb,t._isDBOpen);if(i&&s){const o=Math.round((new Date).getTime()/1e3);let c="\n                          CREATE TABLE IF NOT EXISTS sync_table (\n                              id INTEGER PRIMARY KEY NOT NULL,\n                              sync_date INTEGER\n                              );";return c+=`INSERT INTO sync_table (sync_date) VALUES (\n                              "${o}");`,e=yield Gt(t.mDb,c,!1),Promise.resolve(e)}return Promise.reject(new Error("No last_modified/sql_deleted columns in tables"))}}catch(r){return Promise.reject(new Error(`CreateSyncTable: ${r.message}`))}})()}getSyncDate(){var t=this;return(0,F.Z)(function*(){if(!t._isDBOpen){let e=`getSyncDate: Database ${t.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{if(!(yield Pt(t.mDb,"sync_table")))return Promise.reject(new Error("No sync_table available"));const r=yield vi(t.mDb);return Promise.resolve(r)}catch(e){return Promise.reject(new Error(`getSyncDate: ${e.message}`))}})()}setSyncDate(t){var e=this;return(0,F.Z)(function*(){if(!e._isDBOpen){let r=`SetSyncDate: Database ${e.dbName} `;return r+="not opened",{result:!1,message:r}}try{if(!(yield Pt(e.mDb,"sync_table")))return Promise.reject(new Error("No sync_table available"));const i=Math.round(new Date(t).getTime()/1e3);let s="UPDATE sync_table SET sync_date = ";return s+=`${i} WHERE id = 1;`,(yield Gt(e.mDb,s,!1))<0?{result:!1,message:"setSyncDate failed"}:{result:!0}}catch(r){return{result:!1,message:`setSyncDate failed: ${r.message}`}}})()}importJson(t,e){var r=this;return(0,F.Z)(function*(){let i=0;if(!r._isDBOpen)return Promise.reject(new Error("ImportJson: database is closed"));try{return yield nr(r.mDb,!1),t.tables&&t.tables.length>0&&(i=yield oo(r.mDb,t),e.emit({progress:`Schema creation completed changes: ${i}`}),-1!=i&&(i+=(yield co(r.mDb,t,e)),e.emit({progress:`Tables data creation completed changes: ${i}`}))),t.views&&t.views.length>0&&(i+=(yield vo(r.mDb,t))),yield nr(r.mDb,!0),yield r.saveToStore(),Promise.resolve(i)}catch(s){return Promise.reject(new Error(`ImportJson: ${s.message}`))}})()}exportJson(t,e){var r=this;return(0,F.Z)(function*(){const i={};if(i.database=r.dbName.slice(0,-9),i.version=r.version,i.encrypted=!1,i.mode=t,!r._isDBOpen)return Promise.reject(new Error("ExportJson: database is closed"));try{(yield Pt(r.mDb,"sync_table"))&&(yield Po(r.mDb,(new Date).toISOString()));const o=yield go(r.mDb,i,e);return 0===Object.keys(o).length?Promise.reject(new Error("ExportJson: return Object is empty No data to synchronize")):hn(o)?Promise.resolve(o):Promise.reject(new Error("ExportJson: retJson not valid"))}catch(s){return Promise.reject(new Error(`ExportJson: ${s.message}`))}})()}deleteExportedRows(){var t=this;return(0,F.Z)(function*(){if(!t._isDBOpen)return Promise.reject(new Error("deleteExportedRows: database is closed"));try{return yield To(t.mDb),Promise.resolve()}catch(e){return Promise.reject(new Error(`deleteExportedRows: ${e.message}`))}})()}}var Ei=sn(function(n,t){n.exports=function e(r,i,s){function o(u,v){if(!i[u]){if(!r[u]){if(!v&&St)return St();if(c)return c(u,!0);var b=new Error("Cannot find module '"+u+"'");throw b.code="MODULE_NOT_FOUND",b}var y=i[u]={exports:{}};r[u][0].call(y.exports,function(x){return o(r[u][1][x]||x)},y,y.exports,e,r,i,s)}return i[u].exports}for(var c=St,f=0;f<s.length;f++)o(s[f]);return o}({1:[function(e,r,i){(function(s){var c,o=s.MutationObserver||s.WebKitMutationObserver;if(o){var f=0,u=new o(x),v=s.document.createTextNode("");u.observe(v,{characterData:!0}),c=function(){v.data=f=++f%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var m=new s.MessageChannel;m.port1.onmessage=x,c=function(){m.port2.postMessage(0)}}else c="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var S=s.document.createElement("script");S.onreadystatechange=function(){x(),S.onreadystatechange=null,S.parentNode.removeChild(S),S=null},s.document.documentElement.appendChild(S)}:function(){setTimeout(x,0)};var b,y=[];function x(){b=!0;for(var S,E,T=y.length;T;){for(E=y,y=[],S=-1;++S<T;)E[S]();T=y.length}b=!1}r.exports=function g(S){1===y.push(S)&&!b&&c()}}).call(this,typeof Ct<"u"?Ct:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(e,r,i){var s=e(1);function o(){}var c={},f=["REJECTED"],u=["FULFILLED"],v=["PENDING"];function m(A){if("function"!=typeof A)throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,A!==o&&g(this,A)}function b(A,H,U){this.promise=A,"function"==typeof H&&(this.onFulfilled=H,this.callFulfilled=this.otherCallFulfilled),"function"==typeof U&&(this.onRejected=U,this.callRejected=this.otherCallRejected)}function y(A,H,U){s(function(){var Q;try{Q=H(U)}catch(G){return c.reject(A,G)}Q===A?c.reject(A,new TypeError("Cannot resolve promise with itself")):c.resolve(A,Q)})}function x(A){var H=A&&A.then;if(A&&("object"==typeof A||"function"==typeof A)&&"function"==typeof H)return function(){H.apply(A,arguments)}}function g(A,H){var U=!1;function Q(O){U||(U=!0,c.reject(A,O))}function G(O){U||(U=!0,c.resolve(A,O))}var ge=S(function ue(){H(G,Q)});"error"===ge.status&&Q(ge.value)}function S(A,H){var U={};try{U.value=A(H),U.status="success"}catch(Q){U.status="error",U.value=Q}return U}r.exports=m,m.prototype.catch=function(A){return this.then(null,A)},m.prototype.then=function(A,H){if("function"!=typeof A&&this.state===u||"function"!=typeof H&&this.state===f)return this;var U=new this.constructor(o);return this.state!==v?y(U,this.state===u?A:H,this.outcome):this.queue.push(new b(U,A,H)),U},b.prototype.callFulfilled=function(A){c.resolve(this.promise,A)},b.prototype.otherCallFulfilled=function(A){y(this.promise,this.onFulfilled,A)},b.prototype.callRejected=function(A){c.reject(this.promise,A)},b.prototype.otherCallRejected=function(A){y(this.promise,this.onRejected,A)},c.resolve=function(A,H){var U=S(x,H);if("error"===U.status)return c.reject(A,U.value);var Q=U.value;if(Q)g(A,Q);else{A.state=u,A.outcome=H;for(var G=-1,ue=A.queue.length;++G<ue;)A.queue[G].callFulfilled(H)}return A},c.reject=function(A,H){A.state=f,A.outcome=H;for(var U=-1,Q=A.queue.length;++U<Q;)A.queue[U].callRejected(H);return A},m.resolve=function E(A){return A instanceof this?A:c.resolve(new this(o),A)},m.reject=function T(A){var H=new this(o);return c.reject(H,A)},m.all=function N(A){var H=this;if("[object Array]"!==Object.prototype.toString.call(A))return this.reject(new TypeError("must be an array"));var U=A.length,Q=!1;if(!U)return this.resolve([]);for(var G=new Array(U),ue=0,ge=-1,O=new this(o);++ge<U;)W(A[ge],ge);return O;function W(p,X){H.resolve(p).then(function ke(te){G[X]=te,++ue===U&&!Q&&(Q=!0,c.resolve(O,G))},function(te){Q||(Q=!0,c.reject(O,te))})}},m.race=function $(A){var H=this;if("[object Array]"!==Object.prototype.toString.call(A))return this.reject(new TypeError("must be an array"));var U=A.length,Q=!1;if(!U)return this.resolve([]);for(var G=-1,ue=new this(o);++G<U;)H.resolve(A[G]).then(function(W){Q||(Q=!0,c.resolve(ue,W))},function(W){Q||(Q=!0,c.reject(ue,W))});return ue}},{1:1}],3:[function(e,r,i){(function(s){"function"!=typeof s.Promise&&(s.Promise=e(2))}).call(this,typeof Ct<"u"?Ct:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(e,r,i){var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _};var f=function c(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}();function v(_,I){_=_||[],I=I||{};try{return new Blob(_,I)}catch(C){if("TypeError"!==C.name)throw C;for(var B=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),L=0;L<_.length;L+=1)B.append(_[L]);return B.getBlob(I.type)}}typeof Promise>"u"&&e(3);var m=Promise;function b(_,I){I&&_.then(function(P){I(null,P)},function(P){I(P)})}function y(_,I,P){"function"==typeof I&&_.then(I),"function"==typeof P&&_.catch(P)}function x(_){return"string"!=typeof _&&(console.warn(_+" used as a key, but it is not a string."),_=String(_)),_}function g(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var S="local-forage-detect-blob-support",E=void 0,T={},N=Object.prototype.toString,$="readonly",A="readwrite";function H(_){for(var I=_.length,P=new ArrayBuffer(I),B=new Uint8Array(P),L=0;L<I;L++)B[L]=_.charCodeAt(L);return P}function Q(_){return"boolean"==typeof E?m.resolve(E):function U(_){return new m(function(I){var P=_.transaction(S,A),B=v([""]);P.objectStore(S).put(B,"key"),P.onabort=function(L){L.preventDefault(),L.stopPropagation(),I(!1)},P.oncomplete=function(){var L=navigator.userAgent.match(/Chrome\/(\d+)/),C=navigator.userAgent.match(/Edge\//);I(C||!L||parseInt(L[1],10)>=43)}}).catch(function(){return!1})}(_).then(function(I){return E=I})}function G(_){var I=T[_.name],P={};P.promise=new m(function(B,L){P.resolve=B,P.reject=L}),I.deferredOperations.push(P),I.dbReady=I.dbReady?I.dbReady.then(function(){return P.promise}):P.promise}function ue(_){var P=T[_.name].deferredOperations.pop();if(P)return P.resolve(),P.promise}function ge(_,I){var B=T[_.name].deferredOperations.pop();if(B)return B.reject(I),B.promise}function O(_,I){return new m(function(P,B){if(T[_.name]=T[_.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},_.db){if(!I)return P(_.db);G(_),_.db.close()}var L=[_.name];I&&L.push(_.version);var C=f.open.apply(f,L);I&&(C.onupgradeneeded=function(J){var oe=C.result;try{oe.createObjectStore(_.storeName),J.oldVersion<=1&&oe.createObjectStore(S)}catch(le){if("ConstraintError"!==le.name)throw le;console.warn('The database "'+_.name+'" has been upgraded from version '+J.oldVersion+" to version "+J.newVersion+', but the storage "'+_.storeName+'" already exists.')}}),C.onerror=function(J){J.preventDefault(),B(C.error)},C.onsuccess=function(){var J=C.result;J.onversionchange=function(oe){oe.target.close()},P(J),ue(_)}})}function W(_){return O(_,!1)}function p(_){return O(_,!0)}function X(_,I){if(!_.db)return!0;var P=!_.db.objectStoreNames.contains(_.storeName),L=_.version>_.db.version;if(_.version<_.db.version&&(_.version!==I&&console.warn('The database "'+_.name+"\" can't be downgraded from version "+_.db.version+" to version "+_.version+"."),_.version=_.db.version),L||P){if(P){var C=_.db.version+1;C>_.version&&(_.version=C)}return!0}return!1}function te(_){return v([H(atob(_.data))],{type:_.type})}function Se(_){return _&&_.__local_forage_encoded_blob}function ce(_){var I=this,P=I._initReady().then(function(){var B=T[I._dbInfo.name];if(B&&B.dbReady)return B.dbReady});return y(P,_,_),P}function z(_,I,P,B){void 0===B&&(B=1);try{var L=_.db.transaction(_.storeName,I);P(null,L)}catch(C){if(B>0&&(!_.db||"InvalidStateError"===C.name||"NotFoundError"===C.name))return m.resolve().then(function(){if(!_.db||"NotFoundError"===C.name&&!_.db.objectStoreNames.contains(_.storeName)&&_.version<=_.db.version)return _.db&&(_.version=_.db.version+1),p(_)}).then(function(){return function fe(_){G(_);for(var I=T[_.name],P=I.forages,B=0;B<P.length;B++){var L=P[B];L._dbInfo.db&&(L._dbInfo.db.close(),L._dbInfo.db=null)}return _.db=null,W(_).then(function(C){return _.db=C,X(_)?p(_):C}).then(function(C){_.db=I.db=C;for(var J=0;J<P.length;J++)P[J]._dbInfo.db=C}).catch(function(C){throw ge(_,C),C})}(_).then(function(){z(_,I,P,B-1)})}).catch(P);P(C)}}var Xe={_driver:"asyncStorage",_initStorage:function xe(_){var I=this,P={db:null};if(_)for(var B in _)P[B]=_[B];var L=T[P.name];L||(T[P.name]=L={forages:[],db:null,dbReady:null,deferredOperations:[]}),L.forages.push(I),I._initReady||(I._initReady=I.ready,I.ready=ce);var C=[];function J(){return m.resolve()}for(var oe=0;oe<L.forages.length;oe++){var le=L.forages[oe];le!==I&&C.push(le._initReady().catch(J))}var de=L.forages.slice(0);return m.all(C).then(function(){return P.db=L.db,W(P)}).then(function(ye){return P.db=ye,X(P,I._defaultConfig.version)?p(P):ye}).then(function(ye){P.db=L.db=ye,I._dbInfo=P;for(var be=0;be<de.length;be++){var Oe=de[be];Oe!==I&&(Oe._dbInfo.db=P.db,Oe._dbInfo.version=P.version)}})},_support:function u(){try{if(!f||!f.open)return!1;var _=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),I="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!_||I)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}(),iterate:function pe(_,I){var P=this,B=new m(function(L,C){P.ready().then(function(){z(P._dbInfo,$,function(J,oe){if(J)return C(J);try{var de=oe.objectStore(P._dbInfo.storeName).openCursor(),ye=1;de.onsuccess=function(){var be=de.result;if(be){var Oe=be.value;Se(Oe)&&(Oe=te(Oe));var Ne=_(Oe,be.key,ye++);void 0!==Ne?L(Ne):be.continue()}else L()},de.onerror=function(){C(de.error)}}catch(be){C(be)}})}).catch(C)});return b(B,I),B},getItem:function ve(_,I){var P=this;_=x(_);var B=new m(function(L,C){P.ready().then(function(){z(P._dbInfo,$,function(J,oe){if(J)return C(J);try{var de=oe.objectStore(P._dbInfo.storeName).get(_);de.onsuccess=function(){var ye=de.result;void 0===ye&&(ye=null),Se(ye)&&(ye=te(ye)),L(ye)},de.onerror=function(){C(de.error)}}catch(ye){C(ye)}})}).catch(C)});return b(B,I),B},setItem:function qe(_,I,P){var B=this;_=x(_);var L=new m(function(C,J){var oe;B.ready().then(function(){return oe=B._dbInfo,"[object Blob]"===N.call(I)?Q(oe.db).then(function(le){return le?I:function ke(_){return new m(function(I,P){var B=new FileReader;B.onerror=P,B.onloadend=function(L){var C=btoa(L.target.result||"");I({__local_forage_encoded_blob:!0,data:C,type:_.type})},B.readAsBinaryString(_)})}(I)}):I}).then(function(le){z(B._dbInfo,A,function(de,ye){if(de)return J(de);try{var be=ye.objectStore(B._dbInfo.storeName);null===le&&(le=void 0);var Oe=be.put(le,_);ye.oncomplete=function(){void 0===le&&(le=null),C(le)},ye.onabort=ye.onerror=function(){J(Oe.error?Oe.error:Oe.transaction.error)}}catch(Ne){J(Ne)}})}).catch(J)});return b(L,P),L},removeItem:function Ge(_,I){var P=this;_=x(_);var B=new m(function(L,C){P.ready().then(function(){z(P._dbInfo,A,function(J,oe){if(J)return C(J);try{var de=oe.objectStore(P._dbInfo.storeName).delete(_);oe.oncomplete=function(){L()},oe.onerror=function(){C(de.error)},oe.onabort=function(){C(de.error?de.error:de.transaction.error)}}catch(ye){C(ye)}})}).catch(C)});return b(B,I),B},clear:function Re(_){var I=this,P=new m(function(B,L){I.ready().then(function(){z(I._dbInfo,A,function(C,J){if(C)return L(C);try{var le=J.objectStore(I._dbInfo.storeName).clear();J.oncomplete=function(){B()},J.onabort=J.onerror=function(){L(le.error?le.error:le.transaction.error)}}catch(de){L(de)}})}).catch(L)});return b(P,_),P},length:function je(_){var I=this,P=new m(function(B,L){I.ready().then(function(){z(I._dbInfo,$,function(C,J){if(C)return L(C);try{var le=J.objectStore(I._dbInfo.storeName).count();le.onsuccess=function(){B(le.result)},le.onerror=function(){L(le.error)}}catch(de){L(de)}})}).catch(L)});return b(P,_),P},key:function Me(_,I){var P=this,B=new m(function(L,C){_<0?L(null):P.ready().then(function(){z(P._dbInfo,$,function(J,oe){if(J)return C(J);try{var le=oe.objectStore(P._dbInfo.storeName),de=!1,ye=le.openKeyCursor();ye.onsuccess=function(){var be=ye.result;be?0===_||de?L(be.key):(de=!0,be.advance(_)):L(null)},ye.onerror=function(){C(ye.error)}}catch(be){C(be)}})}).catch(C)});return b(B,I),B},keys:function Ue(_){var I=this,P=new m(function(B,L){I.ready().then(function(){z(I._dbInfo,$,function(C,J){if(C)return L(C);try{var le=J.objectStore(I._dbInfo.storeName).openKeyCursor(),de=[];le.onsuccess=function(){var ye=le.result;ye?(de.push(ye.key),ye.continue()):B(de)},le.onerror=function(){L(le.error)}}catch(ye){L(ye)}})}).catch(L)});return b(P,_),P},dropInstance:function He(_,I){I=g.apply(this,arguments);var L,P=this.config();return(_="function"!=typeof _&&_||{}).name||(_.name=_.name||P.name,_.storeName=_.storeName||P.storeName),b(L=_.name?(_.name===P.name&&this._dbInfo.db?m.resolve(this._dbInfo.db):W(_).then(function(oe){var le=T[_.name],de=le.forages;le.db=oe;for(var ye=0;ye<de.length;ye++)de[ye]._dbInfo.db=oe;return oe})).then(_.storeName?function(oe){if(oe.objectStoreNames.contains(_.storeName)){var le=oe.version+1;G(_);var de=T[_.name],ye=de.forages;oe.close();for(var be=0;be<ye.length;be++){var Oe=ye[be];Oe._dbInfo.db=null,Oe._dbInfo.version=le}return new m(function(Be,We){var $e=f.open(_.name,le);$e.onerror=function(rt){$e.result.close(),We(rt)},$e.onupgradeneeded=function(){$e.result.deleteObjectStore(_.storeName)},$e.onsuccess=function(){var rt=$e.result;rt.close(),Be(rt)}}).then(function(Be){de.db=Be;for(var We=0;We<ye.length;We++){var $e=ye[We];$e._dbInfo.db=Be,ue($e._dbInfo)}}).catch(function(Be){throw(ge(_,Be)||m.resolve()).catch(function(){}),Be})}}:function(oe){G(_);var le=T[_.name],de=le.forages;oe.close();for(var ye=0;ye<de.length;ye++)de[ye]._dbInfo.db=null;return new m(function(Ne,Be){var We=f.deleteDatabase(_.name);We.onerror=function(){var $e=We.result;$e&&$e.close(),Be(We.error)},We.onblocked=function(){console.warn('dropInstance blocked for database "'+_.name+'" until all open connections are closed')},We.onsuccess=function(){var $e=We.result;$e&&$e.close(),Ne($e)}}).then(function(Ne){le.db=Ne;for(var Be=0;Be<de.length;Be++)ue(de[Be]._dbInfo)}).catch(function(Ne){throw(ge(_,Ne)||m.resolve()).catch(function(){}),Ne})}):m.reject("Invalid arguments"),I),L}};var K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D=/^~~local_forage_type~([^~]+)~/,w="__lfsc__:",se="arbf",ne="blob",q="si08",vt=Object.prototype.toString;function Ze(_){var B,C,J,oe,le,I=.75*_.length,P=_.length,L=0;"="===_[_.length-1]&&(I--,"="===_[_.length-2]&&I--);var de=new ArrayBuffer(I),ye=new Uint8Array(de);for(B=0;B<P;B+=4)C=K.indexOf(_[B]),J=K.indexOf(_[B+1]),oe=K.indexOf(_[B+2]),le=K.indexOf(_[B+3]),ye[L++]=C<<2|J>>4,ye[L++]=(15&J)<<4|oe>>2,ye[L++]=(3&oe)<<6|63&le;return de}function gt(_){var B,I=new Uint8Array(_),P="";for(B=0;B<I.length;B+=3)P+=K[I[B]>>2],P+=K[(3&I[B])<<4|I[B+1]>>4],P+=K[(15&I[B+1])<<2|I[B+2]>>6],P+=K[63&I[B+2]];return I.length%3==2?P=P.substring(0,P.length-1)+"=":I.length%3==1&&(P=P.substring(0,P.length-2)+"=="),P}var Tt={serialize:function Pe(_,I){var P="";if(_&&(P=vt.call(_)),_&&("[object ArrayBuffer]"===P||_.buffer&&"[object ArrayBuffer]"===vt.call(_.buffer))){var B,L=w;_ instanceof ArrayBuffer?(B=_,L+=se):(B=_.buffer,"[object Int8Array]"===P?L+=q:"[object Uint8Array]"===P?L+="ui08":"[object Uint8ClampedArray]"===P?L+="uic8":"[object Int16Array]"===P?L+="si16":"[object Uint16Array]"===P?L+="ur16":"[object Int32Array]"===P?L+="si32":"[object Uint32Array]"===P?L+="ui32":"[object Float32Array]"===P?L+="fl32":"[object Float64Array]"===P?L+="fl64":I(new Error("Failed to get type for BinaryArray"))),I(L+gt(B))}else if("[object Blob]"===P){var C=new FileReader;C.onload=function(){var J="~~local_forage_type~"+_.type+"~"+gt(this.result);I(w+ne+J)},C.readAsArrayBuffer(_)}else try{I(JSON.stringify(_))}catch(J){console.error("Couldn't convert value into a JSON string: ",_),I(null,J)}},deserialize:function nt(_){if(_.substring(0,9)!==w)return JSON.parse(_);var B,I=_.substring(13),P=_.substring(9,13);if(P===ne&&D.test(I)){var L=I.match(D);B=L[1],I=I.substring(L[0].length)}var C=Ze(I);switch(P){case se:return C;case ne:return v([C],{type:B});case q:return new Int8Array(C);case"ui08":return new Uint8Array(C);case"uic8":return new Uint8ClampedArray(C);case"si16":return new Int16Array(C);case"ur16":return new Uint16Array(C);case"si32":return new Int32Array(C);case"ui32":return new Uint32Array(C);case"fl32":return new Float32Array(C);case"fl64":return new Float64Array(C);default:throw new Error("Unkown type: "+P)}},stringToBuffer:Ze,bufferToString:gt};function st(_,I,P,B){_.executeSql("CREATE TABLE IF NOT EXISTS "+I.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],P,B)}function Ye(_,I,P,B,L,C){_.executeSql(P,B,L,function(J,oe){oe.code===oe.SYNTAX_ERR?J.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[I.storeName],function(le,de){de.rows.length?C(le,oe):st(le,I,function(){le.executeSql(P,B,L,C)},C)},C):C(J,oe)},C)}function mt(_,I,P,B){var L=this;_=x(_);var C=new m(function(J,oe){L.ready().then(function(){void 0===I&&(I=null);var le=I,de=L._dbInfo;de.serializer.serialize(I,function(ye,be){be?oe(be):de.db.transaction(function(Oe){Ye(Oe,de,"INSERT OR REPLACE INTO "+de.storeName+" (key, value) VALUES (?, ?)",[_,ye],function(){J(le)},function(Ne,Be){oe(Be)})},function(Oe){if(Oe.code===Oe.QUOTA_ERR){if(B>0)return void J(mt.apply(L,[_,le,P,B-1]));oe(Oe)}})})}).catch(oe)});return b(C,P),C}var Ft={_driver:"webSQLStorage",_initStorage:function lr(_){var I=this,P={db:null};if(_)for(var B in _)P[B]="string"!=typeof _[B]?_[B].toString():_[B];var L=new m(function(C,J){try{P.db=openDatabase(P.name,String(P.version),P.description,P.size)}catch(oe){return J(oe)}P.db.transaction(function(oe){st(oe,P,function(){I._dbInfo=P,C()},function(le,de){J(de)})},J)});return P.serializer=Tt,L},_support:function h(){return"function"==typeof openDatabase}(),iterate:function ee(_,I){var P=this,B=new m(function(L,C){P.ready().then(function(){var J=P._dbInfo;J.db.transaction(function(oe){Ye(oe,J,"SELECT * FROM "+J.storeName,[],function(le,de){for(var ye=de.rows,be=ye.length,Oe=0;Oe<be;Oe++){var Ne=ye.item(Oe),Be=Ne.value;if(Be&&(Be=J.serializer.deserialize(Be)),void 0!==(Be=_(Be,Ne.key,Oe+1)))return void L(Be)}L()},function(le,de){C(de)})})}).catch(C)});return b(B,I),B},getItem:function Vt(_,I){var P=this;_=x(_);var B=new m(function(L,C){P.ready().then(function(){var J=P._dbInfo;J.db.transaction(function(oe){Ye(oe,J,"SELECT * FROM "+J.storeName+" WHERE key = ? LIMIT 1",[_],function(le,de){var ye=de.rows.length?de.rows.item(0).value:null;ye&&(ye=J.serializer.deserialize(ye)),L(ye)},function(le,de){C(de)})})}).catch(C)});return b(B,I),B},setItem:function tt(_,I,P){return mt.apply(this,[_,I,P,1])},removeItem:function Yt(_,I){var P=this;_=x(_);var B=new m(function(L,C){P.ready().then(function(){var J=P._dbInfo;J.db.transaction(function(oe){Ye(oe,J,"DELETE FROM "+J.storeName+" WHERE key = ?",[_],function(){L()},function(le,de){C(de)})})}).catch(C)});return b(B,I),B},clear:function fr(_){var I=this,P=new m(function(B,L){I.ready().then(function(){var C=I._dbInfo;C.db.transaction(function(J){Ye(J,C,"DELETE FROM "+C.storeName,[],function(){B()},function(oe,le){L(le)})})}).catch(L)});return b(P,_),P},length:function Br(_){var I=this,P=new m(function(B,L){I.ready().then(function(){var C=I._dbInfo;C.db.transaction(function(J){Ye(J,C,"SELECT COUNT(key) as c FROM "+C.storeName,[],function(oe,le){var de=le.rows.item(0).c;B(de)},function(oe,le){L(le)})})}).catch(L)});return b(P,_),P},key:function Dt(_,I){var P=this,B=new m(function(L,C){P.ready().then(function(){var J=P._dbInfo;J.db.transaction(function(oe){Ye(oe,J,"SELECT key FROM "+J.storeName+" WHERE id = ? LIMIT 1",[_+1],function(le,de){var ye=de.rows.length?de.rows.item(0).key:null;L(ye)},function(le,de){C(de)})})}).catch(C)});return b(B,I),B},keys:function Fr(_){var I=this,P=new m(function(B,L){I.ready().then(function(){var C=I._dbInfo;C.db.transaction(function(J){Ye(J,C,"SELECT key FROM "+C.storeName,[],function(oe,le){for(var de=[],ye=0;ye<le.rows.length;ye++)de.push(le.rows.item(ye).key);B(de)},function(oe,le){L(le)})})}).catch(L)});return b(P,_),P},dropInstance:function Lr(_,I){I=g.apply(this,arguments);var P=this.config();(_="function"!=typeof _&&_||{}).name||(_.name=_.name||P.name,_.storeName=_.storeName||P.storeName);var L,B=this;return b(L=_.name?new m(function(C){var J;J=_.name===P.name?B._dbInfo.db:openDatabase(_.name,"","",0),C(_.storeName?{db:J,storeNames:[_.storeName]}:function _n(_){return new m(function(I,P){_.transaction(function(B){B.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(L,C){for(var J=[],oe=0;oe<C.rows.length;oe++)J.push(C.rows.item(oe).name);I({db:_,storeNames:J})},function(L,C){P(C)})},function(B){P(B)})})}(J))}).then(function(C){return new m(function(J,oe){C.db.transaction(function(le){function de(Ne){return new m(function(Be,We){le.executeSql("DROP TABLE IF EXISTS "+Ne,[],function(){Be()},function($e,rt){We(rt)})})}for(var ye=[],be=0,Oe=C.storeNames.length;be<Oe;be++)ye.push(de(C.storeNames[be]));m.all(ye).then(function(){J()}).catch(function(Ne){oe(Ne)})},function(le){oe(le)})})}):m.reject("Invalid arguments"),I),L}};function hr(_,I){var P=_.name+"/";return _.storeName!==I.storeName&&(P+=_.storeName+"/"),P}function zr(){return!function vn(){var _="_localforage_support_test";try{return localStorage.setItem(_,!0),localStorage.removeItem(_),!1}catch{return!0}}()||localStorage.length>0}var Kt={_driver:"localStorageWrapper",_initStorage:function gn(_){var P={};if(_)for(var B in _)P[B]=_[B];return P.keyPrefix=hr(_,this._defaultConfig),zr()?(this._dbInfo=P,P.serializer=Tt,m.resolve()):m.reject()},_support:function $r(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}(),iterate:function ir(_,I){var P=this,B=P.ready().then(function(){for(var L=P._dbInfo,C=L.keyPrefix,J=C.length,oe=localStorage.length,le=1,de=0;de<oe;de++){var ye=localStorage.key(de);if(0===ye.indexOf(C)){var be=localStorage.getItem(ye);if(be&&(be=L.serializer.deserialize(be)),void 0!==(be=_(be,ye.substring(J),le++)))return be}}});return b(B,I),B},getItem:function Ur(_,I){var P=this;_=x(_);var B=P.ready().then(function(){var L=P._dbInfo,C=localStorage.getItem(L.keyPrefix+_);return C&&(C=L.serializer.deserialize(C)),C});return b(B,I),B},setItem:function qr(_,I,P){var B=this;_=x(_);var L=B.ready().then(function(){void 0===I&&(I=null);var C=I;return new m(function(J,oe){var le=B._dbInfo;le.serializer.serialize(I,function(de,ye){if(ye)oe(ye);else try{localStorage.setItem(le.keyPrefix+_,de),J(C)}catch(be){("QuotaExceededError"===be.name||"NS_ERROR_DOM_QUOTA_REACHED"===be.name)&&oe(be),oe(be)}})})});return b(L,P),L},removeItem:function Mr(_,I){var P=this;_=x(_);var B=P.ready().then(function(){localStorage.removeItem(P._dbInfo.keyPrefix+_)});return b(B,I),B},clear:function dr(_){var I=this,P=I.ready().then(function(){for(var B=I._dbInfo.keyPrefix,L=localStorage.length-1;L>=0;L--){var C=localStorage.key(L);0===C.indexOf(B)&&localStorage.removeItem(C)}});return b(P,_),P},length:function mr(_){var P=this.keys().then(function(B){return B.length});return b(P,_),P},key:function ct(_,I){var P=this,B=P.ready().then(function(){var C,L=P._dbInfo;try{C=localStorage.key(_)}catch{C=null}return C&&(C=C.substring(L.keyPrefix.length)),C});return b(B,I),B},keys:function sr(_){var I=this,P=I.ready().then(function(){for(var B=I._dbInfo,L=localStorage.length,C=[],J=0;J<L;J++){var oe=localStorage.key(J);0===oe.indexOf(B.keyPrefix)&&C.push(oe.substring(B.keyPrefix.length))}return C});return b(P,_),P},dropInstance:function Zr(_,I){if(I=g.apply(this,arguments),!(_="function"!=typeof _&&_||{}).name){var P=this.config();_.name=_.name||P.name,_.storeName=_.storeName||P.storeName}var L,B=this;return b(L=_.name?new m(function(C){C(_.storeName?hr(_,B._defaultConfig):_.name+"/")}).then(function(C){for(var J=localStorage.length-1;J>=0;J--){var oe=localStorage.key(J);0===oe.indexOf(C)&&localStorage.removeItem(oe)}}):m.reject("Invalid arguments"),I),L}},Wr=function(I,P){return I===P||"number"==typeof I&&"number"==typeof P&&isNaN(I)&&isNaN(P)},or=function(I,P){for(var B=I.length,L=0;L<B;){if(Wr(I[L],P))return!0;L++}return!1},pr=Array.isArray||function(_){return"[object Array]"===Object.prototype.toString.call(_)},lt={},ar={},At={INDEXEDDB:Xe,WEBSQL:Ft,LOCALSTORAGE:Kt},Gr=[At.INDEXEDDB._driver,At.WEBSQL._driver,At.LOCALSTORAGE._driver],Qt=["dropInstance"],yr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Qt),Hr={description:"",driver:Gr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Vr(_,I){_[I]=function(){var P=arguments;return _.ready().then(function(){return _[I].apply(_,P)})}}function ur(){for(var _=1;_<arguments.length;_++){var I=arguments[_];if(I)for(var P in I)I.hasOwnProperty(P)&&(arguments[0][P]=pr(I[P])?I[P].slice():I[P])}return arguments[0]}var Jt=function(){function _(I){for(var P in function o(_,I){if(!(_ instanceof I))throw new TypeError("Cannot call a class as a function")}(this,_),At)if(At.hasOwnProperty(P)){var B=At[P],L=B._driver;this[P]=L,lt[L]||this.defineDriver(B)}this._defaultConfig=ur({},Hr),this._config=ur({},this._defaultConfig,I),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return _.prototype.config=function(P){if("object"===(typeof P>"u"?"undefined":s(P))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var B in P){if("storeName"===B&&(P[B]=P[B].replace(/\W/g,"_")),"version"===B&&"number"!=typeof P[B])return new Error("Database version must be a number.");this._config[B]=P[B]}return!("driver"in P)||!P.driver||this.setDriver(this._config.driver)}return"string"==typeof P?this._config[P]:this._config},_.prototype.defineDriver=function(P,B,L){var C=new m(function(J,oe){try{var le=P._driver,de=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!P._driver)return void oe(de);for(var ye=yr.concat("_initStorage"),be=0,Oe=ye.length;be<Oe;be++){var Ne=ye[be];if((!or(Qt,Ne)||P[Ne])&&"function"!=typeof P[Ne])return void oe(de)}!function(){for(var Ot=function(wn){return function(){var Yr=new Error("Method "+wn+" is not implemented by the current driver"),Xt=m.reject(Yr);return b(Xt,arguments[arguments.length-1]),Xt}},Rt=0,vr=Qt.length;Rt<vr;Rt++){var gr=Qt[Rt];P[gr]||(P[gr]=Ot(gr))}}();var $e=function(Ot){lt[le]&&console.info("Redefining LocalForage driver: "+le),lt[le]=P,ar[le]=Ot,J()};"_support"in P?P._support&&"function"==typeof P._support?P._support().then($e,oe):$e(!!P._support):$e(!0)}catch(rt){oe(rt)}});return y(C,B,L),C},_.prototype.driver=function(){return this._driver||null},_.prototype.getDriver=function(P,B,L){var C=lt[P]?m.resolve(lt[P]):m.reject(new Error("Driver not found."));return y(C,B,L),C},_.prototype.getSerializer=function(P){var B=m.resolve(Tt);return y(B,P),B},_.prototype.ready=function(P){var B=this,L=B._driverSet.then(function(){return null===B._ready&&(B._ready=B._initDriver()),B._ready});return y(L,P,P),L},_.prototype.setDriver=function(P,B,L){var C=this;pr(P)||(P=[P]);var J=this._getSupportedDrivers(P);function oe(){C._config.driver=C.driver()}function le(be){return C._extend(be),oe(),C._ready=C._initStorage(C._config),C._ready}var ye=null!==this._driverSet?this._driverSet.catch(function(){return m.resolve()}):m.resolve();return this._driverSet=ye.then(function(){var be=J[0];return C._dbInfo=null,C._ready=null,C.getDriver(be).then(function(Oe){C._driver=Oe._driver,oe(),C._wrapLibraryMethodsWithReady(),C._initDriver=function de(be){return function(){var Oe=0;return function Ne(){for(;Oe<be.length;){var Be=be[Oe];return Oe++,C._dbInfo=null,C._ready=null,C.getDriver(Be).then(le).catch(Ne)}oe();var We=new Error("No available storage method found.");return C._driverSet=m.reject(We),C._driverSet}()}}(J)})}).catch(function(){oe();var be=new Error("No available storage method found.");return C._driverSet=m.reject(be),C._driverSet}),y(this._driverSet,B,L),this._driverSet},_.prototype.supports=function(P){return!!ar[P]},_.prototype._extend=function(P){ur(this,P)},_.prototype._getSupportedDrivers=function(P){for(var B=[],L=0,C=P.length;L<C;L++){var J=P[L];this.supports(J)&&B.push(J)}return B},_.prototype._wrapLibraryMethodsWithReady=function(){for(var P=0,B=yr.length;P<B;P++)Vr(this,yr[P])},_.prototype.createInstance=function(P){return new _(P)},_}(),_r=new Jt;r.exports=_r},{3:3}]},{},[4])(4)}),Ro=sn(function(n,t){n.exports=function e(r,i,s){function o(u,v){if(!i[u]){if(!r[u]){if(!v&&St)return St();if(c)return c(u,!0);var b=new Error("Cannot find module '"+u+"'");throw b.code="MODULE_NOT_FOUND",b}var y=i[u]={exports:{}};r[u][0].call(y.exports,function(x){return o(r[u][1][x]||x)},y,y.exports,e,r,i,s)}return i[u].exports}for(var c=St,f=0;f<s.length;f++)o(s[f]);return o}({1:[function(e,r,i){var s=e("./utils"),o=e("./support"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(f){for(var u,v,m,y,x,g,S=[],E=0,T=f.length,N=T,$="string"!==s.getTypeOf(f);E<f.length;)N=T-E,m=$?(u=f[E++],v=E<T?f[E++]:0,E<T?f[E++]:0):(u=f.charCodeAt(E++),v=E<T?f.charCodeAt(E++):0,E<T?f.charCodeAt(E++):0),y=(3&u)<<4|v>>4,x=1<N?(15&v)<<2|m>>6:64,g=2<N?63&m:64,S.push(c.charAt(u>>2)+c.charAt(y)+c.charAt(x)+c.charAt(g));return S.join("")},i.decode=function(f){var u,v,m,b,y,x,g=0,S=0,E="data:";if(f.substr(0,5)===E)throw new Error("Invalid base64 input, it looks like a data url.");var T,N=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===c.charAt(64)&&N--,f.charAt(f.length-2)===c.charAt(64)&&N--,N%1!=0)throw new Error("Invalid base64 input, bad content length.");for(T=o.uint8array?new Uint8Array(0|N):new Array(0|N);g<f.length;)u=c.indexOf(f.charAt(g++))<<2|(b=c.indexOf(f.charAt(g++)))>>4,v=(15&b)<<4|(y=c.indexOf(f.charAt(g++)))>>2,m=(3&y)<<6|(x=c.indexOf(f.charAt(g++))),T[S++]=u,64!==y&&(T[S++]=v),64!==x&&(T[S++]=m);return T}},{"./support":30,"./utils":32}],2:[function(e,r,i){var s=e("./external"),o=e("./stream/DataWorker"),c=e("./stream/Crc32Probe"),f=e("./stream/DataLengthProbe");function u(v,m,b,y,x){this.compressedSize=v,this.uncompressedSize=m,this.crc32=b,this.compression=y,this.compressedContent=x}u.prototype={getContentWorker:function(){var v=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),m=this;return v.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),v},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(v,m,b){return v.pipe(new c).pipe(new f("uncompressedSize")).pipe(m.compressWorker(b)).pipe(new f("compressedSize")).withStreamInfo("compression",m)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,r,i){var s=e("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,r,i){var s=e("./utils"),o=function(){for(var c,f=[],u=0;u<256;u++){c=u;for(var v=0;v<8;v++)c=1&c?3988292384^c>>>1:c>>>1;f[u]=c}return f}();r.exports=function(c,f){return void 0!==c&&c.length?"string"!==s.getTypeOf(c)?function(u,v,m,b){var y=o,x=0+m;u^=-1;for(var g=0;g<x;g++)u=u>>>8^y[255&(u^v[g])];return-1^u}(0|f,c,c.length):function(u,v,m,b){var y=o,x=0+m;u^=-1;for(var g=0;g<x;g++)u=u>>>8^y[255&(u^v.charCodeAt(g))];return-1^u}(0|f,c,c.length):0}},{"./utils":32}],5:[function(e,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(e,r,i){var s;s=typeof Promise<"u"?Promise:e("lie"),r.exports={Promise:s}},{lie:37}],7:[function(e,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=e("pako"),c=e("./utils"),f=e("./stream/GenericWorker"),u=s?"uint8array":"array";function v(m,b){f.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=b,this.meta={}}i.magic="\b\0",c.inherits(v,f),v.prototype.processChunk=function(m){this.meta=m.meta,null===this._pako&&this._createPako(),this._pako.push(c.transformTo(u,m.data),!1)},v.prototype.flush=function(){f.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},v.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},v.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(b){m.push({data:b,meta:m.meta})}},i.compressWorker=function(m){return new v("Deflate",m)},i.uncompressWorker=function(){return new v("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,r,i){function s(y,x){var g,S="";for(g=0;g<x;g++)S+=String.fromCharCode(255&y),y>>>=8;return S}function o(y,x,g,S,E,T){var N,$,A=y.file,H=y.compression,U=T!==u.utf8encode,Q=c.transformTo("string",T(A.name)),G=c.transformTo("string",u.utf8encode(A.name)),ue=A.comment,ge=c.transformTo("string",T(ue)),O=c.transformTo("string",u.utf8encode(ue)),W=G.length!==A.name.length,p=O.length!==ue.length,X="",ke="",te="",Se=A.dir,ce=A.date,fe={crc32:0,compressedSize:0,uncompressedSize:0};x&&!g||(fe.crc32=y.crc32,fe.compressedSize=y.compressedSize,fe.uncompressedSize=y.uncompressedSize);var z=0;x&&(z|=8),U||!W&&!p||(z|=2048);var pe,Ge,Z=0,xe=0;Se&&(Z|=16),"UNIX"===E?(xe=798,Z|=(Ge=pe=A.unixPermissions,pe||(Ge=Se?16893:33204),(65535&Ge)<<16)):(xe=20,Z|=function(pe){return 63&(pe||0)}(A.dosPermissions)),N=ce.getUTCHours(),N<<=6,N|=ce.getUTCMinutes(),N<<=5,N|=ce.getUTCSeconds()/2,$=ce.getUTCFullYear()-1980,$<<=4,$|=ce.getUTCMonth()+1,$<<=5,$|=ce.getUTCDate(),W&&(ke=s(1,1)+s(v(Q),4)+G,X+="up"+s(ke.length,2)+ke),p&&(te=s(1,1)+s(v(ge),4)+O,X+="uc"+s(te.length,2)+te);var ve="";return ve+="\n\0",ve+=s(z,2),ve+=H.magic,ve+=s(N,2),ve+=s($,2),ve+=s(fe.crc32,4),ve+=s(fe.compressedSize,4),ve+=s(fe.uncompressedSize,4),ve+=s(Q.length,2),ve+=s(X.length,2),{fileRecord:m.LOCAL_FILE_HEADER+ve+Q+X,dirRecord:m.CENTRAL_FILE_HEADER+s(xe,2)+ve+s(ge.length,2)+"\0\0\0\0"+s(Z,4)+s(S,4)+Q+X+ge}}var c=e("../utils"),f=e("../stream/GenericWorker"),u=e("../utf8"),v=e("../crc32"),m=e("../signature");function b(y,x,g,S){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=x,this.zipPlatform=g,this.encodeFileName=S,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(b,f),b.prototype.push=function(y){var x=y.meta.percent||0,g=this.entriesCount,S=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,f.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:g?(x+100*(g-S-1))/g:100}}))},b.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var x=this.streamFiles&&!y.file.dir;if(x){var g=o(y,x,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(y){this.accumulate=!1;var S,x=this.streamFiles&&!y.file.dir,g=o(y,x,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),x)this.push({data:(S=y,m.DATA_DESCRIPTOR+s(S.crc32,4)+s(S.compressedSize,4)+s(S.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var y=this.bytesWritten,x=0;x<this.dirRecords.length;x++)this.push({data:this.dirRecords[x],meta:{percent:100}});var E,T,N,H,S=(E=this.dirRecords.length,T=this.bytesWritten-y,N=y,H=c.transformTo("string",(0,this.encodeFileName)(this.zipComment)),m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(E,2)+s(E,2)+s(T,4)+s(N,4)+s(H.length,2)+H);this.push({data:S,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(y){this._sources.push(y);var x=this;return y.on("data",function(g){x.processChunk(g)}),y.on("end",function(){x.closedSource(x.previous.streamInfo),x._sources.length?x.prepareNextSource():x.end()}),y.on("error",function(g){x.error(g)}),this},b.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(y){var x=this._sources;if(!f.prototype.error.call(this,y))return!1;for(var g=0;g<x.length;g++)try{x[g].error(y)}catch{}return!0},b.prototype.lock=function(){f.prototype.lock.call(this);for(var y=this._sources,x=0;x<y.length;x++)y[x].lock()},r.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,r,i){var s=e("../compressions"),o=e("./ZipFileWorker");i.generateWorker=function(c,f,u){var v=new o(f.streamFiles,u,f.platform,f.encodeFileName),m=0;try{c.forEach(function(b,y){m++;var x=function(T,N){var $=T||N,A=s[$];if(!A)throw new Error($+" is not a valid compression method !");return A}(y.options.compression,f.compression),S=y.dir,E=y.date;y._compressWorker(x,y.options.compressionOptions||f.compressionOptions||{}).withStreamInfo("file",{name:b,dir:S,date:E,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(v)}),v.entriesCount=m}catch(b){v.error(b)}return v}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var c in this)"function"!=typeof this[c]&&(o[c]=this[c]);return o}}(s.prototype=e("./object")).loadAsync=e("./load"),s.support=e("./support"),s.defaults=e("./defaults"),s.version="3.10.1",s.loadAsync=function(o,c){return(new s).loadAsync(o,c)},s.external=e("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,r,i){var s=e("./utils"),o=e("./external"),c=e("./utf8"),f=e("./zipEntries"),u=e("./stream/Crc32Probe"),v=e("./nodejsUtils");function m(b){return new o.Promise(function(y,x){var g=b.decompressed.getContentWorker().pipe(new u);g.on("error",function(S){x(S)}).on("end",function(){g.streamInfo.crc32!==b.decompressed.crc32?x(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}r.exports=function(b,y){var x=this;return y=s.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode}),v.isNode&&v.isStream(b)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",b,!0,y.optimizedBinaryString,y.base64).then(function(g){var S=new f(y);return S.load(g),S}).then(function(g){var S=[o.Promise.resolve(g)],E=g.files;if(y.checkCRC32)for(var T=0;T<E.length;T++)S.push(m(E[T]));return o.Promise.all(S)}).then(function(g){for(var S=g.shift(),E=S.files,T=0;T<E.length;T++){var N=E[T],$=N.fileNameStr,A=s.resolve(N.fileNameStr);x.file(A,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:y.createFolders}),N.dir||(x.file(A).unsafeOriginalName=$)}return S.zipComment.length&&(x.comment=S.zipComment),x})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,r,i){var s=e("../utils"),o=e("../stream/GenericWorker");function c(f,u){o.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(u)}s.inherits(c,o),c.prototype._bindStream=function(f){var u=this;(this._stream=f).pause(),f.on("data",function(v){u.push({data:v,meta:{percent:0}})}).on("error",function(v){u.isPaused?this.generatedError=v:u.error(v)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},c.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=c},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,r,i){var s=e("readable-stream").Readable;function o(c,f,u){s.call(this,f),this._helper=c;var v=this;c.on("data",function(m,b){v.push(m)||v._helper.pause(),u&&u(b)}).on("error",function(m){v.emit("error",m)}).on("end",function(){v.push(null)})}e("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(e,r,i){r.exports={isNode:!0,newBufferFrom:function(s,o){if(ie.from&&ie.from!==Uint8Array.from)return ie.from(s,o);if("number"==typeof s)throw new Error('The "data" argument must not be a number');return new ie(s,o)},allocBuffer:function(s){if(ie.alloc)return ie.alloc(s);var o=new ie(s);return o.fill(0),o},isBuffer:function(s){return ie.isBuffer(s)},isStream:function(s){return s&&"function"==typeof s.on&&"function"==typeof s.pause&&"function"==typeof s.resume}}},{}],15:[function(e,r,i){function s(A,H,U){var Q,G=c.getTypeOf(H),ue=c.extend(U||{},v);ue.date=ue.date||new Date,null!==ue.compression&&(ue.compression=ue.compression.toUpperCase()),"string"==typeof ue.unixPermissions&&(ue.unixPermissions=parseInt(ue.unixPermissions,8)),ue.unixPermissions&&16384&ue.unixPermissions&&(ue.dir=!0),ue.dosPermissions&&16&ue.dosPermissions&&(ue.dir=!0),ue.dir&&(A=E(A)),ue.createFolders&&(Q=S(A))&&T.call(this,Q,!0),U&&void 0!==U.binary||(ue.binary=!("string"===G&&!1===ue.binary&&!1===ue.base64)),(H instanceof m&&0===H.uncompressedSize||ue.dir||!H||0===H.length)&&(ue.base64=!1,ue.binary=!0,H="",ue.compression="STORE",G="string");var O;O=H instanceof m||H instanceof f?H:x.isNode&&x.isStream(H)?new g(A,H):c.prepareContent(A,H,ue.binary,ue.optimizedBinaryString,ue.base64);var W=new b(A,O,ue);this.files[A]=W}var o=e("./utf8"),c=e("./utils"),f=e("./stream/GenericWorker"),u=e("./stream/StreamHelper"),v=e("./defaults"),m=e("./compressedObject"),b=e("./zipObject"),y=e("./generate"),x=e("./nodejsUtils"),g=e("./nodejs/NodejsStreamInputAdapter"),S=function(A){"/"===A.slice(-1)&&(A=A.substring(0,A.length-1));var H=A.lastIndexOf("/");return 0<H?A.substring(0,H):""},E=function(A){return"/"!==A.slice(-1)&&(A+="/"),A},T=function(A,H){return H=void 0!==H?H:v.createFolders,A=E(A),this.files[A]||s.call(this,A,null,{dir:!0,createFolders:H}),this.files[A]};function N(A){return"[object RegExp]"===Object.prototype.toString.call(A)}var $={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var H,U,Q;for(H in this.files)Q=this.files[H],(U=H.slice(this.root.length,H.length))&&H.slice(0,this.root.length)===this.root&&A(U,Q)},filter:function(A){var H=[];return this.forEach(function(U,Q){A(U,Q)&&H.push(Q)}),H},file:function(A,H,U){if(1!==arguments.length)return s.call(this,A=this.root+A,H,U),this;if(N(A)){var Q=A;return this.filter(function(ue,ge){return!ge.dir&&Q.test(ue)})}var G=this.files[this.root+A];return G&&!G.dir?G:null},folder:function(A){if(!A)return this;if(N(A))return this.filter(function(G,ue){return ue.dir&&A.test(G)});var U=T.call(this,this.root+A),Q=this.clone();return Q.root=U.name,Q},remove:function(A){var H=this.files[A=this.root+A];if(H||("/"!==A.slice(-1)&&(A+="/"),H=this.files[A]),H&&!H.dir)delete this.files[A];else for(var U=this.filter(function(G,ue){return ue.name.slice(0,A.length)===A}),Q=0;Q<U.length;Q++)delete this.files[U[Q].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var H,U={};try{if((U=c.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=U.type.toLowerCase(),U.compression=U.compression.toUpperCase(),"binarystring"===U.type&&(U.type="string"),!U.type)throw new Error("No output type specified.");c.checkSupport(U.type),"darwin"!==U.platform&&"freebsd"!==U.platform&&"linux"!==U.platform&&"sunos"!==U.platform||(U.platform="UNIX"),"win32"===U.platform&&(U.platform="DOS"),H=y.generateWorker(this,U,U.comment||this.comment||"")}catch(G){(H=new f("error")).error(G)}return new u(H,U.type||"string",U.mimeType)},generateAsync:function(A,H){return this.generateInternalStream(A).accumulate(H)},generateNodeStream:function(A,H){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(H)}};r.exports=$},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,r,i){r.exports=e("stream")},{stream:void 0}],17:[function(e,r,i){var s=e("./DataReader");function o(c){s.call(this,c);for(var f=0;f<this.data.length;f++)c[f]=255&c[f]}e("../utils").inherits(o,s),o.prototype.byteAt=function(c){return this.data[this.zero+c]},o.prototype.lastIndexOfSignature=function(c){for(var f=c.charCodeAt(0),u=c.charCodeAt(1),v=c.charCodeAt(2),m=c.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===f&&this.data[b+1]===u&&this.data[b+2]===v&&this.data[b+3]===m)return b-this.zero;return-1},o.prototype.readAndCheckSignature=function(c){var f=c.charCodeAt(0),u=c.charCodeAt(1),v=c.charCodeAt(2),m=c.charCodeAt(3),b=this.readData(4);return f===b[0]&&u===b[1]&&v===b[2]&&m===b[3]},o.prototype.readData=function(c){if(this.checkOffset(c),0===c)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,f},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(e,r,i){var s=e("../utils");function o(c){this.data=c,this.length=c.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(c){this.checkIndex(this.index+c)},checkIndex:function(c){if(this.length<this.zero+c||c<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+c+"). Corrupted zip ?")},setIndex:function(c){this.checkIndex(c),this.index=c},skip:function(c){this.setIndex(this.index+c)},byteAt:function(){},readInt:function(c){var f,u=0;for(this.checkOffset(c),f=this.index+c-1;f>=this.index;f--)u=(u<<8)+this.byteAt(f);return this.index+=c,u},readString:function(c){return s.transformTo("string",this.readData(c))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var c=this.readInt(4);return new Date(Date.UTC(1980+(c>>25&127),(c>>21&15)-1,c>>16&31,c>>11&31,c>>5&63,(31&c)<<1))}},r.exports=o},{"../utils":32}],19:[function(e,r,i){var s=e("./Uint8ArrayReader");function o(c){s.call(this,c)}e("../utils").inherits(o,s),o.prototype.readData=function(c){this.checkOffset(c);var f=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,f},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,r,i){var s=e("./DataReader");function o(c){s.call(this,c)}e("../utils").inherits(o,s),o.prototype.byteAt=function(c){return this.data.charCodeAt(this.zero+c)},o.prototype.lastIndexOfSignature=function(c){return this.data.lastIndexOf(c)-this.zero},o.prototype.readAndCheckSignature=function(c){return c===this.readData(4)},o.prototype.readData=function(c){this.checkOffset(c);var f=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,f},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(e,r,i){var s=e("./ArrayReader");function o(c){s.call(this,c)}e("../utils").inherits(o,s),o.prototype.readData=function(c){if(this.checkOffset(c),0===c)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+c);return this.index+=c,f},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(e,r,i){var s=e("../utils"),o=e("../support"),c=e("./ArrayReader"),f=e("./StringReader"),u=e("./NodeBufferReader"),v=e("./Uint8ArrayReader");r.exports=function(m){var b=s.getTypeOf(m);return s.checkSupport(b),"string"!==b||o.uint8array?"nodebuffer"===b?new u(m):o.uint8array?new v(s.transformTo("uint8array",m)):new c(s.transformTo("array",m)):new f(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,r,i){i.LOCAL_FILE_HEADER="PK\x03\x04",i.CENTRAL_FILE_HEADER="PK\x01\x02",i.CENTRAL_DIRECTORY_END="PK\x05\x06",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,r,i){var s=e("./GenericWorker"),o=e("../utils");function c(f){s.call(this,"ConvertWorker to "+f),this.destType=f}o.inherits(c,s),c.prototype.processChunk=function(f){this.push({data:o.transformTo(this.destType,f.data),meta:f.meta})},r.exports=c},{"../utils":32,"./GenericWorker":28}],25:[function(e,r,i){var s=e("./GenericWorker"),o=e("../crc32");function c(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(c,s),c.prototype.processChunk=function(f){this.streamInfo.crc32=o(f.data,this.streamInfo.crc32||0),this.push(f)},r.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,r,i){var s=e("../utils"),o=e("./GenericWorker");function c(f){o.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}s.inherits(c,o),c.prototype.processChunk=function(f){f&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+f.data.length),o.prototype.processChunk.call(this,f)},r.exports=c},{"../utils":32,"./GenericWorker":28}],27:[function(e,r,i){var s=e("../utils"),o=e("./GenericWorker");function c(f){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(v){u.dataIsReady=!0,u.data=v,u.max=v&&v.length||0,u.type=s.getTypeOf(v),u.isPaused||u._tickAndRepeat()},function(v){u.error(v)})}s.inherits(c,o),c.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,u);break;case"uint8array":f=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":f=this.data.slice(this.index,u)}return this.index=u,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(e,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,c){return this._listeners[o].push(c),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,c){if(this._listeners[o])for(var f=0;f<this._listeners[o].length;f++)this._listeners[o][f].call(this,c)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var c=this;return o.on("data",function(f){c.processChunk(f)}),o.on("end",function(){c.end()}),o.on("error",function(f){c.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,c){return this.extraStreamInfo[o]=c,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(e,r,i){var s=e("../utils"),o=e("./ConvertWorker"),c=e("./GenericWorker"),f=e("../base64"),u=e("../support"),v=e("../external"),m=null;if(u.nodestream)try{m=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(x,g,S){var E=g;switch(g){case"blob":case"arraybuffer":E="uint8array";break;case"base64":E="string"}try{this._internalType=E,this._outputType=g,this._mimeType=S,s.checkSupport(E),this._worker=x.pipe(new o(E)),x.lock()}catch(T){this._worker=new c("error"),this._worker.error(T)}}y.prototype={accumulate:function(x){return function b(x,g){return new v.Promise(function(S,E){var T=[],N=x._internalType,$=x._outputType,A=x._mimeType;x.on("data",function(H,U){T.push(H),g&&g(U)}).on("error",function(H){T=[],E(H)}).on("end",function(){try{var H=function(U,Q,G){switch(U){case"blob":return s.newBlob(s.transformTo("arraybuffer",Q),G);case"base64":return f.encode(Q);default:return s.transformTo(U,Q)}}($,function(U,Q){var G,ue=0,ge=null,O=0;for(G=0;G<Q.length;G++)O+=Q[G].length;switch(U){case"string":return Q.join("");case"array":return Array.prototype.concat.apply([],Q);case"uint8array":for(ge=new Uint8Array(O),G=0;G<Q.length;G++)ge.set(Q[G],ue),ue+=Q[G].length;return ge;case"nodebuffer":return ie.concat(Q);default:throw new Error("concat : unsupported type '"+U+"'")}}(N,T),A);S(H)}catch(U){E(U)}T=[]}).resume()})}(this,x)},on:function(x,g){var S=this;return this._worker.on(x,"data"===x?function(E){g.call(S,E.data,E.meta)}:function(){s.delay(g,arguments,S)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(x){if(s.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:"nodebuffer"!==this._outputType},x)}},r.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=!0,i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=0===new Blob([s],{type:"application/zip"}).size}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=0===o.getBlob("application/zip").size}catch{i.blob=!1}}}try{i.nodestream=!!e("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(e,r,i){for(var s=e("./utils"),o=e("./support"),c=e("./nodejsUtils"),f=e("./stream/GenericWorker"),u=new Array(256),v=0;v<256;v++)u[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;function m(){f.call(this,"utf-8 decode"),this.leftOver=null}function b(){f.call(this,"utf-8 encode")}u[254]=u[254]=1,i.utf8encode=function(y){return o.nodebuffer?c.newBufferFrom(y,"utf-8"):function(x){var g,S,E,T,N,$=x.length,A=0;for(T=0;T<$;T++)55296==(64512&(S=x.charCodeAt(T)))&&T+1<$&&56320==(64512&(E=x.charCodeAt(T+1)))&&(S=65536+(S-55296<<10)+(E-56320),T++),A+=S<128?1:S<2048?2:S<65536?3:4;for(g=o.uint8array?new Uint8Array(A):new Array(A),T=N=0;N<A;T++)55296==(64512&(S=x.charCodeAt(T)))&&T+1<$&&56320==(64512&(E=x.charCodeAt(T+1)))&&(S=65536+(S-55296<<10)+(E-56320),T++),S<128?g[N++]=S:(S<2048?g[N++]=192|S>>>6:(S<65536?g[N++]=224|S>>>12:(g[N++]=240|S>>>18,g[N++]=128|S>>>12&63),g[N++]=128|S>>>6&63),g[N++]=128|63&S);return g}(y)},i.utf8decode=function(y){return o.nodebuffer?s.transformTo("nodebuffer",y).toString("utf-8"):function(x){var g,S,E,T,N=x.length,$=new Array(2*N);for(g=S=0;g<N;)if((E=x[g++])<128)$[S++]=E;else if(4<(T=u[E]))$[S++]=65533,g+=T-1;else{for(E&=2===T?31:3===T?15:7;1<T&&g<N;)E=E<<6|63&x[g++],T--;1<T?$[S++]=65533:E<65536?$[S++]=E:($[S++]=55296|(E-=65536)>>10&1023,$[S++]=56320|1023&E)}return $.length!==S&&($.subarray?$=$.subarray(0,S):$.length=S),s.applyFromCharCode($)}(y=s.transformTo(o.uint8array?"uint8array":"array",y))},s.inherits(m,f),m.prototype.processChunk=function(y){var x=s.transformTo(o.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var g=x;(x=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),x.set(g,this.leftOver.length)}else x=this.leftOver.concat(x);this.leftOver=null}var S=function(T,N){var $;for((N=N||T.length)>T.length&&(N=T.length),$=N-1;0<=$&&128==(192&T[$]);)$--;return $<0||0===$?N:$+u[T[$]]>N?$:N}(x),E=x;S!==x.length&&(o.uint8array?(E=x.subarray(0,S),this.leftOver=x.subarray(S,x.length)):(E=x.slice(0,S),this.leftOver=x.slice(S,x.length))),this.push({data:i.utf8decode(E),meta:y.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=m,s.inherits(b,f),b.prototype.processChunk=function(y){this.push({data:i.utf8encode(y.data),meta:y.meta})},i.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,r,i){var s=e("./support"),o=e("./base64"),c=e("./nodejsUtils"),f=e("./external");function u(g){return g}function v(g,S){for(var E=0;E<g.length;++E)S[E]=255&g.charCodeAt(E);return S}e("setimmediate"),i.newBlob=function(g,S){i.checkSupport("blob");try{return new Blob([g],{type:S})}catch{try{var E=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return E.append(g),E.getBlob(S)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(g,S,E){var T=[],N=0,$=g.length;if($<=E)return String.fromCharCode.apply(null,g);for(;N<$;)T.push(String.fromCharCode.apply(null,"array"===S||"nodebuffer"===S?g.slice(N,Math.min(N+E,$)):g.subarray(N,Math.min(N+E,$)))),N+=E;return T.join("")},stringifyByChar:function(g){for(var S="",E=0;E<g.length;E++)S+=String.fromCharCode(g[E]);return S},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&1===String.fromCharCode.apply(null,c.allocBuffer(1)).length}catch{return!1}}()}};function b(g){var S=65536,E=i.getTypeOf(g),T=!0;if("uint8array"===E?T=m.applyCanBeUsed.uint8array:"nodebuffer"===E&&(T=m.applyCanBeUsed.nodebuffer),T)for(;1<S;)try{return m.stringifyByChunk(g,E,S)}catch{S=Math.floor(S/2)}return m.stringifyByChar(g)}function y(g,S){for(var E=0;E<g.length;E++)S[E]=g[E];return S}i.applyFromCharCode=b;var x={};x.string={string:u,array:function(g){return v(g,new Array(g.length))},arraybuffer:function(g){return x.string.uint8array(g).buffer},uint8array:function(g){return v(g,new Uint8Array(g.length))},nodebuffer:function(g){return v(g,c.allocBuffer(g.length))}},x.array={string:b,array:u,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return c.newBufferFrom(g)}},x.arraybuffer={string:function(g){return b(new Uint8Array(g))},array:function(g){return y(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:u,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return c.newBufferFrom(new Uint8Array(g))}},x.uint8array={string:b,array:function(g){return y(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:u,nodebuffer:function(g){return c.newBufferFrom(g)}},x.nodebuffer={string:b,array:function(g){return y(g,new Array(g.length))},arraybuffer:function(g){return x.nodebuffer.uint8array(g).buffer},uint8array:function(g){return y(g,new Uint8Array(g.length))},nodebuffer:u},i.transformTo=function(g,S){if(S=S||"",!g)return S;i.checkSupport(g);var E=i.getTypeOf(S);return x[E][g](S)},i.resolve=function(g){for(var S=g.split("/"),E=[],T=0;T<S.length;T++){var N=S[T];"."===N||""===N&&0!==T&&T!==S.length-1||(".."===N?E.pop():E.push(N))}return E.join("/")},i.getTypeOf=function(g){return"string"==typeof g?"string":"[object Array]"===Object.prototype.toString.call(g)?"array":s.nodebuffer&&c.isBuffer(g)?"nodebuffer":s.uint8array&&g instanceof Uint8Array?"uint8array":s.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(g){if(!s[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(g){var S,E,T="";for(E=0;E<(g||"").length;E++)T+="\\x"+((S=g.charCodeAt(E))<16?"0":"")+S.toString(16).toUpperCase();return T},i.delay=function(g,S,E){setImmediate(function(){g.apply(E||null,S||[])})},i.inherits=function(g,S){function E(){}E.prototype=S.prototype,g.prototype=new E},i.extend=function(){var g,S,E={};for(g=0;g<arguments.length;g++)for(S in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],S)&&void 0===E[S]&&(E[S]=arguments[g][S]);return E},i.prepareContent=function(g,S,E,T,N){return f.Promise.resolve(S).then(function($){return s.blob&&($ instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call($)))&&typeof FileReader<"u"?new f.Promise(function(A,H){var U=new FileReader;U.onload=function(Q){A(Q.target.result)},U.onerror=function(Q){H(Q.target.error)},U.readAsArrayBuffer($)}):$}).then(function($){var H,A=i.getTypeOf($);return A?("arraybuffer"===A?$=i.transformTo("uint8array",$):"string"===A&&(N?$=o.decode($):E&&!0!==T&&($=v(H=$,s.uint8array?new Uint8Array(H.length):new Array(H.length)))),$):f.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,r,i){var s=e("./reader/readerFor"),o=e("./utils"),c=e("./signature"),f=e("./zipEntry"),u=e("./support");function v(m){this.files=[],this.loadOptions=m}v.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(b)+", expected "+o.pretty(m)+")")}},isSignature:function(m,b){var y=this.reader.index;this.reader.setIndex(m);var x=this.reader.readString(4)===b;return this.reader.setIndex(y),x},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),y=o.transformTo(u.uint8array?"uint8array":"array",m);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,b,y,x=this.zip64EndOfCentralSize-44;0<x;)m=this.reader.readInt(2),b=this.reader.readInt(4),y=this.reader.readData(b),this.zip64ExtensibleData[m]={id:m,length:b,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,b;for(m=0;m<this.files.length;m++)this.reader.setIndex((b=this.files[m]).localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER);)(m=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,c.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var b=m;if(this.checkSignature(c.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var x=b-y;if(0<x)this.isSignature(b,c.CENTRAL_FILE_HEADER)||(this.reader.zero=x);else if(x<0)throw new Error("Corrupted zip: missing "+Math.abs(x)+" bytes.")},prepareReader:function(m){this.reader=s(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=v},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,r,i){var s=e("./reader/readerFor"),o=e("./utils"),c=e("./compressedObject"),f=e("./crc32"),u=e("./utf8"),v=e("./compressions"),m=e("./support");function b(y,x){this.options=y,this.loadOptions=x}b.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(y){var x,g;if(y.skip(22),this.fileNameLength=y.readInt(2),g=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(g),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(x=function(S){for(var E in v)if(Object.prototype.hasOwnProperty.call(v,E)&&v[E].magic===S)return v[E];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,x,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var x=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(x),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==y&&(this.dosPermissions=63&this.externalFileAttributes),3==y&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var x,g,S,E=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<E;)x=y.readInt(2),g=y.readInt(2),S=y.readData(g),this.extraFields[x]={id:x,length:g,value:S};y.setIndex(E)},handleUTF8:function(){var y=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var x=this.findExtraFieldUnicodePath();if(null!==x)this.fileNameStr=x;else{var g=o.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var S=this.findExtraFieldUnicodeComment();if(null!==S)this.fileCommentStr=S;else{var E=o.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(E)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var x=s(y.value);return 1!==x.readInt(1)||f(this.fileName)!==x.readInt(4)?null:u.utf8decode(x.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var x=s(y.value);return 1!==x.readInt(1)||f(this.fileComment)!==x.readInt(4)?null:u.utf8decode(x.readData(y.length-5))}return null}},r.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,r,i){function s(x,g,S){this.name=x,this.dir=S.dir,this.date=S.date,this.comment=S.comment,this.unixPermissions=S.unixPermissions,this.dosPermissions=S.dosPermissions,this._data=g,this._dataBinary=S.binary,this.options={compression:S.compression,compressionOptions:S.compressionOptions}}var o=e("./stream/StreamHelper"),c=e("./stream/DataWorker"),f=e("./utf8"),u=e("./compressedObject"),v=e("./stream/GenericWorker");s.prototype={internalStream:function(x){var g=null,S="string";try{if(!x)throw new Error("No output type specified.");var E="string"===(S=x.toLowerCase())||"text"===S;"binarystring"!==S&&"text"!==S||(S="string"),g=this._decompressWorker();var T=!this._dataBinary;T&&!E&&(g=g.pipe(new f.Utf8EncodeWorker)),!T&&E&&(g=g.pipe(new f.Utf8DecodeWorker))}catch(N){(g=new v("error")).error(N)}return new o(g,S,"")},async:function(x,g){return this.internalStream(x).accumulate(g)},nodeStream:function(x,g){return this.internalStream(x||"nodebuffer").toNodejsStream(g)},_compressWorker:function(x,g){if(this._data instanceof u&&this._data.compression.magic===x.magic)return this._data.getCompressedWorker();var S=this._decompressWorker();return this._dataBinary||(S=S.pipe(new f.Utf8EncodeWorker)),u.createWorkerFrom(S,x,g)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof v?this._data:new c(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<m.length;y++)s.prototype[m[y]]=b;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,r,i){(function(s){var o,c,f=s.MutationObserver||s.WebKitMutationObserver;if(f){var u=0,v=new f(x),m=s.document.createTextNode("");v.observe(m,{characterData:!0}),o=function(){m.data=u=++u%2}}else if(s.setImmediate||void 0===s.MessageChannel)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var g=s.document.createElement("script");g.onreadystatechange=function(){x(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:function(){setTimeout(x,0)};else{var b=new s.MessageChannel;b.port1.onmessage=x,o=function(){b.port2.postMessage(0)}}var y=[];function x(){var g,S;c=!0;for(var E=y.length;E;){for(S=y,y=[],g=-1;++g<E;)S[g]();E=y.length}c=!1}r.exports=function(g){1!==y.push(g)||c||o()}}).call(this,typeof Ct<"u"?Ct:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,r,i){var s=e("immediate");function o(){}var c={},f=["REJECTED"],u=["FULFILLED"],v=["PENDING"];function m(E){if("function"!=typeof E)throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,E!==o&&g(this,E)}function b(E,T,N){this.promise=E,"function"==typeof T&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),"function"==typeof N&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function y(E,T,N){s(function(){var $;try{$=T(N)}catch(A){return c.reject(E,A)}$===E?c.reject(E,new TypeError("Cannot resolve promise with itself")):c.resolve(E,$)})}function x(E){var T=E&&E.then;if(E&&("object"==typeof E||"function"==typeof E)&&"function"==typeof T)return function(){T.apply(E,arguments)}}function g(E,T){var N=!1;function $(U){N||(N=!0,c.reject(E,U))}function A(U){N||(N=!0,c.resolve(E,U))}var H=S(function(){T(A,$)});"error"===H.status&&$(H.value)}function S(E,T){var N={};try{N.value=E(T),N.status="success"}catch($){N.status="error",N.value=$}return N}(r.exports=m).prototype.finally=function(E){if("function"!=typeof E)return this;var T=this.constructor;return this.then(function(N){return T.resolve(E()).then(function(){return N})},function(N){return T.resolve(E()).then(function(){throw N})})},m.prototype.catch=function(E){return this.then(null,E)},m.prototype.then=function(E,T){if("function"!=typeof E&&this.state===u||"function"!=typeof T&&this.state===f)return this;var N=new this.constructor(o);return this.state!==v?y(N,this.state===u?E:T,this.outcome):this.queue.push(new b(N,E,T)),N},b.prototype.callFulfilled=function(E){c.resolve(this.promise,E)},b.prototype.otherCallFulfilled=function(E){y(this.promise,this.onFulfilled,E)},b.prototype.callRejected=function(E){c.reject(this.promise,E)},b.prototype.otherCallRejected=function(E){y(this.promise,this.onRejected,E)},c.resolve=function(E,T){var N=S(x,T);if("error"===N.status)return c.reject(E,N.value);var $=N.value;if($)g(E,$);else{E.state=u,E.outcome=T;for(var A=-1,H=E.queue.length;++A<H;)E.queue[A].callFulfilled(T)}return E},c.reject=function(E,T){E.state=f,E.outcome=T;for(var N=-1,$=E.queue.length;++N<$;)E.queue[N].callRejected(T);return E},m.resolve=function(E){return E instanceof this?E:c.resolve(new this(o),E)},m.reject=function(E){var T=new this(o);return c.reject(T,E)},m.all=function(E){var T=this;if("[object Array]"!==Object.prototype.toString.call(E))return this.reject(new TypeError("must be an array"));var N=E.length,$=!1;if(!N)return this.resolve([]);for(var A=new Array(N),H=0,U=-1,Q=new this(o);++U<N;)G(E[U],U);return Q;function G(ue,ge){T.resolve(ue).then(function(O){A[ge]=O,++H!==N||$||($=!0,c.resolve(Q,A))},function(O){$||($=!0,c.reject(Q,O))})}},m.race=function(E){if("[object Array]"!==Object.prototype.toString.call(E))return this.reject(new TypeError("must be an array"));var N=E.length,$=!1;if(!N)return this.resolve([]);for(var A=-1,H=new this(o);++A<N;)this.resolve(E[A]).then(function(Q){$||($=!0,c.resolve(H,Q))},function(Q){$||($=!0,c.reject(H,Q))});return H}},{immediate:36}],38:[function(e,r,i){var s={};(0,e("./lib/utils/common").assign)(s,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,r,i){var s=e("./zlib/deflate"),o=e("./utils/common"),c=e("./utils/strings"),f=e("./zlib/messages"),u=e("./zlib/zstream"),v=Object.prototype.toString,m=0,b=-1,y=0,x=8;function g(E){if(!(this instanceof g))return new g(E);this.options=o.assign({level:b,method:x,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},E||{});var T=this.options;T.raw&&0<T.windowBits?T.windowBits=-T.windowBits:T.gzip&&0<T.windowBits&&T.windowBits<16&&(T.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var N=s.deflateInit2(this.strm,T.level,T.method,T.windowBits,T.memLevel,T.strategy);if(N!==m)throw new Error(f[N]);if(T.header&&s.deflateSetHeader(this.strm,T.header),T.dictionary){var $;if($="string"==typeof T.dictionary?c.string2buf(T.dictionary):"[object ArrayBuffer]"===v.call(T.dictionary)?new Uint8Array(T.dictionary):T.dictionary,(N=s.deflateSetDictionary(this.strm,$))!==m)throw new Error(f[N]);this._dict_set=!0}}function S(E,T){var N=new g(T);if(N.push(E,!0),N.err)throw N.msg||f[N.err];return N.result}g.prototype.push=function(E,T){var N,$,A=this.strm,H=this.options.chunkSize;if(this.ended)return!1;$=T===~~T?T:!0===T?4:0,A.input="string"==typeof E?c.string2buf(E):"[object ArrayBuffer]"===v.call(E)?new Uint8Array(E):E,A.next_in=0,A.avail_in=A.input.length;do{if(0===A.avail_out&&(A.output=new o.Buf8(H),A.next_out=0,A.avail_out=H),1!==(N=s.deflate(A,$))&&N!==m)return this.onEnd(N),!(this.ended=!0);0!==A.avail_out&&(0!==A.avail_in||4!==$&&2!==$)||this.onData("string"===this.options.to?c.buf2binstring(o.shrinkBuf(A.output,A.next_out)):o.shrinkBuf(A.output,A.next_out))}while((0<A.avail_in||0===A.avail_out)&&1!==N);return 4===$?(N=s.deflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===m):2!==$||(this.onEnd(m),!(A.avail_out=0))},g.prototype.onData=function(E){this.chunks.push(E)},g.prototype.onEnd=function(E){E===m&&(this.result="string"===this.options.to?this.chunks.join(""):o.flattenChunks(this.chunks)),this.chunks=[],this.err=E,this.msg=this.strm.msg},i.Deflate=g,i.deflate=S,i.deflateRaw=function(E,T){return(T=T||{}).raw=!0,S(E,T)},i.gzip=function(E,T){return(T=T||{}).gzip=!0,S(E,T)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,r,i){var s=e("./zlib/inflate"),o=e("./utils/common"),c=e("./utils/strings"),f=e("./zlib/constants"),u=e("./zlib/messages"),v=e("./zlib/zstream"),m=e("./zlib/gzheader"),b=Object.prototype.toString;function y(g){if(!(this instanceof y))return new y(g);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},g||{});var S=this.options;S.raw&&0<=S.windowBits&&S.windowBits<16&&(S.windowBits=-S.windowBits,0===S.windowBits&&(S.windowBits=-15)),!(0<=S.windowBits&&S.windowBits<16)||g&&g.windowBits||(S.windowBits+=32),15<S.windowBits&&S.windowBits<48&&!(15&S.windowBits)&&(S.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var E=s.inflateInit2(this.strm,S.windowBits);if(E!==f.Z_OK)throw new Error(u[E]);this.header=new m,s.inflateGetHeader(this.strm,this.header)}function x(g,S){var E=new y(S);if(E.push(g,!0),E.err)throw E.msg||u[E.err];return E.result}y.prototype.push=function(g,S){var E,T,N,$,A,H,U=this.strm,Q=this.options.chunkSize,G=this.options.dictionary,ue=!1;if(this.ended)return!1;T=S===~~S?S:!0===S?f.Z_FINISH:f.Z_NO_FLUSH,U.input="string"==typeof g?c.binstring2buf(g):"[object ArrayBuffer]"===b.call(g)?new Uint8Array(g):g,U.next_in=0,U.avail_in=U.input.length;do{if(0===U.avail_out&&(U.output=new o.Buf8(Q),U.next_out=0,U.avail_out=Q),(E=s.inflate(U,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&G&&(H="string"==typeof G?c.string2buf(G):"[object ArrayBuffer]"===b.call(G)?new Uint8Array(G):G,E=s.inflateSetDictionary(this.strm,H)),E===f.Z_BUF_ERROR&&!0===ue&&(E=f.Z_OK,ue=!1),E!==f.Z_STREAM_END&&E!==f.Z_OK)return this.onEnd(E),!(this.ended=!0);U.next_out&&(0!==U.avail_out&&E!==f.Z_STREAM_END&&(0!==U.avail_in||T!==f.Z_FINISH&&T!==f.Z_SYNC_FLUSH)||("string"===this.options.to?(N=c.utf8border(U.output,U.next_out),$=U.next_out-N,A=c.buf2string(U.output,N),U.next_out=$,U.avail_out=Q-$,$&&o.arraySet(U.output,U.output,N,$,0),this.onData(A)):this.onData(o.shrinkBuf(U.output,U.next_out)))),0===U.avail_in&&0===U.avail_out&&(ue=!0)}while((0<U.avail_in||0===U.avail_out)&&E!==f.Z_STREAM_END);return E===f.Z_STREAM_END&&(T=f.Z_FINISH),T===f.Z_FINISH?(E=s.inflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===f.Z_OK):T!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(U.avail_out=0))},y.prototype.onData=function(g){this.chunks.push(g)},y.prototype.onEnd=function(g){g===f.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},i.Inflate=y,i.inflate=x,i.inflateRaw=function(g,S){return(S=S||{}).raw=!0,x(g,S)},i.ungzip=x},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(f){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var v=u.shift();if(v){if("object"!=typeof v)throw new TypeError(v+"must be non-object");for(var m in v)v.hasOwnProperty(m)&&(f[m]=v[m])}}return f},i.shrinkBuf=function(f,u){return f.length===u?f:f.subarray?f.subarray(0,u):(f.length=u,f)};var o={arraySet:function(f,u,v,m,b){if(u.subarray&&f.subarray)f.set(u.subarray(v,v+m),b);else for(var y=0;y<m;y++)f[b+y]=u[v+y]},flattenChunks:function(f){var u,v,m,b,y,x;for(u=m=0,v=f.length;u<v;u++)m+=f[u].length;for(x=new Uint8Array(m),u=b=0,v=f.length;u<v;u++)x.set(y=f[u],b),b+=y.length;return x}},c={arraySet:function(f,u,v,m,b){for(var y=0;y<m;y++)f[b+y]=u[v+y]},flattenChunks:function(f){return[].concat.apply([],f)}};i.setTyped=function(f){f?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,c))},i.setTyped(s)},{}],42:[function(e,r,i){var s=e("./common"),o=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var f=new s.Buf8(256),u=0;u<256;u++)f[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function v(m,b){if(b<65537&&(m.subarray&&c||!m.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(m,b));for(var y="",x=0;x<b;x++)y+=String.fromCharCode(m[x]);return y}f[254]=f[254]=1,i.string2buf=function(m){var b,y,x,g,S,E=m.length,T=0;for(g=0;g<E;g++)55296==(64512&(y=m.charCodeAt(g)))&&g+1<E&&56320==(64512&(x=m.charCodeAt(g+1)))&&(y=65536+(y-55296<<10)+(x-56320),g++),T+=y<128?1:y<2048?2:y<65536?3:4;for(b=new s.Buf8(T),g=S=0;S<T;g++)55296==(64512&(y=m.charCodeAt(g)))&&g+1<E&&56320==(64512&(x=m.charCodeAt(g+1)))&&(y=65536+(y-55296<<10)+(x-56320),g++),y<128?b[S++]=y:(y<2048?b[S++]=192|y>>>6:(y<65536?b[S++]=224|y>>>12:(b[S++]=240|y>>>18,b[S++]=128|y>>>12&63),b[S++]=128|y>>>6&63),b[S++]=128|63&y);return b},i.buf2binstring=function(m){return v(m,m.length)},i.binstring2buf=function(m){for(var b=new s.Buf8(m.length),y=0,x=b.length;y<x;y++)b[y]=m.charCodeAt(y);return b},i.buf2string=function(m,b){var y,x,g,S,E=b||m.length,T=new Array(2*E);for(y=x=0;y<E;)if((g=m[y++])<128)T[x++]=g;else if(4<(S=f[g]))T[x++]=65533,y+=S-1;else{for(g&=2===S?31:3===S?15:7;1<S&&y<E;)g=g<<6|63&m[y++],S--;1<S?T[x++]=65533:g<65536?T[x++]=g:(T[x++]=55296|(g-=65536)>>10&1023,T[x++]=56320|1023&g)}return v(T,x)},i.utf8border=function(m,b){var y;for((b=b||m.length)>m.length&&(b=m.length),y=b-1;0<=y&&128==(192&m[y]);)y--;return y<0||0===y?b:y+f[m[y]]>b?y:b}},{"./common":41}],43:[function(e,r,i){r.exports=function(s,o,c,f){for(var u=65535&s|0,v=s>>>16&65535|0,m=0;0!==c;){for(c-=m=2e3<c?2e3:c;v=v+(u=u+o[f++]|0)|0,--m;);u%=65521,v%=65521}return u|v<<16|0}},{}],44:[function(e,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,r,i){var s=function(){for(var o,c=[],f=0;f<256;f++){o=f;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;c[f]=o}return c}();r.exports=function(o,c,f,u){var v=s,m=u+f;o^=-1;for(var b=u;b<m;b++)o=o>>>8^v[255&(o^c[b])];return-1^o}},{}],46:[function(e,r,i){var s,o=e("../utils/common"),c=e("./trees"),f=e("./adler32"),u=e("./crc32"),v=e("./messages"),m=0,b=4,y=0,x=-2,E=2,T=8,$=286,A=30,H=19,U=2*$+1,Q=15,G=3,ue=258,ge=ue+G+1,O=42,W=113,p=1,X=2,ke=3,te=4;function Se(h,K){return h.msg=v[K],K}function ce(h){return(h<<1)-(4<h?9:0)}function fe(h){for(var K=h.length;0<=--K;)h[K]=0}function z(h){var K=h.state,V=K.pending;V>h.avail_out&&(V=h.avail_out),0!==V&&(o.arraySet(h.output,K.pending_buf,K.pending_out,V,h.next_out),h.next_out+=V,K.pending_out+=V,h.total_out+=V,h.avail_out-=V,K.pending-=V,0===K.pending&&(K.pending_out=0))}function Z(h,K){c._tr_flush_block(h,0<=h.block_start?h.block_start:-1,h.strstart-h.block_start,K),h.block_start=h.strstart,z(h.strm)}function xe(h,K){h.pending_buf[h.pending++]=K}function ve(h,K){h.pending_buf[h.pending++]=K>>>8&255,h.pending_buf[h.pending++]=255&K}function pe(h,K){var V,D,w=h.max_chain_length,j=h.strstart,se=h.prev_length,ne=h.nice_match,q=h.strstart>h.w_size-ge?h.strstart-(h.w_size-ge):0,he=h.window,_e=h.w_mask,me=h.prev,we=h.strstart+ue,Fe=he[j+se-1],Ae=he[j+se];h.prev_length>=h.good_match&&(w>>=2),ne>h.lookahead&&(ne=h.lookahead);do{if(he[(V=K)+se]===Ae&&he[V+se-1]===Fe&&he[V]===he[j]&&he[++V]===he[j+1]){j+=2,V++;do{}while(he[++j]===he[++V]&&he[++j]===he[++V]&&he[++j]===he[++V]&&he[++j]===he[++V]&&he[++j]===he[++V]&&he[++j]===he[++V]&&he[++j]===he[++V]&&he[++j]===he[++V]&&j<we);if(D=ue-(we-j),j=we-ue,se<D){if(h.match_start=K,ne<=(se=D))break;Fe=he[j+se-1],Ae=he[j+se]}}}while((K=me[K&_e])>q&&0!=--w);return se<=h.lookahead?se:h.lookahead}function qe(h){var K,V,D,w,j,se,ne,q,he,_e,me=h.w_size;do{if(w=h.window_size-h.lookahead-h.strstart,h.strstart>=me+(me-ge)){for(o.arraySet(h.window,h.window,me,me,0),h.match_start-=me,h.strstart-=me,h.block_start-=me,K=V=h.hash_size;D=h.head[--K],h.head[K]=me<=D?D-me:0,--V;);for(K=V=me;D=h.prev[--K],h.prev[K]=me<=D?D-me:0,--V;);w+=me}if(0===h.strm.avail_in)break;if(ne=h.window,q=h.strstart+h.lookahead,_e=void 0,(he=w)<(_e=(se=h.strm).avail_in)&&(_e=he),V=0===_e?0:(se.avail_in-=_e,o.arraySet(ne,se.input,se.next_in,_e,q),1===se.state.wrap?se.adler=f(se.adler,ne,_e,q):2===se.state.wrap&&(se.adler=u(se.adler,ne,_e,q)),se.next_in+=_e,se.total_in+=_e,_e),h.lookahead+=V,h.lookahead+h.insert>=G)for(h.ins_h=h.window[j=h.strstart-h.insert],h.ins_h=(h.ins_h<<h.hash_shift^h.window[j+1])&h.hash_mask;h.insert&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[j+G-1])&h.hash_mask,h.prev[j&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=j,j++,h.insert--,!(h.lookahead+h.insert<G)););}while(h.lookahead<ge&&0!==h.strm.avail_in)}function Ge(h,K){for(var V,D;;){if(h.lookahead<ge){if(qe(h),h.lookahead<ge&&K===m)return p;if(0===h.lookahead)break}if(V=0,h.lookahead>=G&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+G-1])&h.hash_mask,V=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),0!==V&&h.strstart-V<=h.w_size-ge&&(h.match_length=pe(h,V)),h.match_length>=G)if(D=c._tr_tally(h,h.strstart-h.match_start,h.match_length-G),h.lookahead-=h.match_length,h.match_length<=h.max_lazy_match&&h.lookahead>=G){for(h.match_length--;h.strstart++,h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+G-1])&h.hash_mask,V=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart,0!=--h.match_length;);h.strstart++}else h.strstart+=h.match_length,h.match_length=0,h.ins_h=h.window[h.strstart],h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+1])&h.hash_mask;else D=c._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++;if(D&&(Z(h,!1),0===h.strm.avail_out))return p}return h.insert=h.strstart<G-1?h.strstart:G-1,K===b?(Z(h,!0),0===h.strm.avail_out?ke:te):h.last_lit&&(Z(h,!1),0===h.strm.avail_out)?p:X}function Re(h,K){for(var V,D,w;;){if(h.lookahead<ge){if(qe(h),h.lookahead<ge&&K===m)return p;if(0===h.lookahead)break}if(V=0,h.lookahead>=G&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+G-1])&h.hash_mask,V=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),h.prev_length=h.match_length,h.prev_match=h.match_start,h.match_length=G-1,0!==V&&h.prev_length<h.max_lazy_match&&h.strstart-V<=h.w_size-ge&&(h.match_length=pe(h,V),h.match_length<=5&&(1===h.strategy||h.match_length===G&&4096<h.strstart-h.match_start)&&(h.match_length=G-1)),h.prev_length>=G&&h.match_length<=h.prev_length){for(w=h.strstart+h.lookahead-G,D=c._tr_tally(h,h.strstart-1-h.prev_match,h.prev_length-G),h.lookahead-=h.prev_length-1,h.prev_length-=2;++h.strstart<=w&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+G-1])&h.hash_mask,V=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),0!=--h.prev_length;);if(h.match_available=0,h.match_length=G-1,h.strstart++,D&&(Z(h,!1),0===h.strm.avail_out))return p}else if(h.match_available){if((D=c._tr_tally(h,0,h.window[h.strstart-1]))&&Z(h,!1),h.strstart++,h.lookahead--,0===h.strm.avail_out)return p}else h.match_available=1,h.strstart++,h.lookahead--}return h.match_available&&(D=c._tr_tally(h,0,h.window[h.strstart-1]),h.match_available=0),h.insert=h.strstart<G-1?h.strstart:G-1,K===b?(Z(h,!0),0===h.strm.avail_out?ke:te):h.last_lit&&(Z(h,!1),0===h.strm.avail_out)?p:X}function je(h,K,V,D,w){this.good_length=h,this.max_lazy=K,this.nice_length=V,this.max_chain=D,this.func=w}function Me(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=T,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*U),this.dyn_dtree=new o.Buf16(2*(2*A+1)),this.bl_tree=new o.Buf16(2*(2*H+1)),fe(this.dyn_ltree),fe(this.dyn_dtree),fe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(Q+1),this.heap=new o.Buf16(2*$+1),fe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*$+1),fe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ue(h){var K;return h&&h.state?(h.total_in=h.total_out=0,h.data_type=E,(K=h.state).pending=0,K.pending_out=0,K.wrap<0&&(K.wrap=-K.wrap),K.status=K.wrap?O:W,h.adler=2===K.wrap?0:1,K.last_flush=m,c._tr_init(K),y):Se(h,x)}function He(h){var V,K=Ue(h);return K===y&&((V=h.state).window_size=2*V.w_size,fe(V.head),V.max_lazy_match=s[V.level].max_lazy,V.good_match=s[V.level].good_length,V.nice_match=s[V.level].nice_length,V.max_chain_length=s[V.level].max_chain,V.strstart=0,V.block_start=0,V.lookahead=0,V.insert=0,V.match_length=V.prev_length=G-1,V.match_available=0,V.ins_h=0),K}function Xe(h,K,V,D,w,j){if(!h)return x;var se=1;if(-1===K&&(K=6),D<0?(se=0,D=-D):15<D&&(se=2,D-=16),w<1||9<w||V!==T||D<8||15<D||K<0||9<K||j<0||4<j)return Se(h,x);8===D&&(D=9);var ne=new Me;return(h.state=ne).strm=h,ne.wrap=se,ne.gzhead=null,ne.w_bits=D,ne.w_size=1<<ne.w_bits,ne.w_mask=ne.w_size-1,ne.hash_bits=w+7,ne.hash_size=1<<ne.hash_bits,ne.hash_mask=ne.hash_size-1,ne.hash_shift=~~((ne.hash_bits+G-1)/G),ne.window=new o.Buf8(2*ne.w_size),ne.head=new o.Buf16(ne.hash_size),ne.prev=new o.Buf16(ne.w_size),ne.lit_bufsize=1<<w+6,ne.pending_buf_size=4*ne.lit_bufsize,ne.pending_buf=new o.Buf8(ne.pending_buf_size),ne.d_buf=1*ne.lit_bufsize,ne.l_buf=3*ne.lit_bufsize,ne.level=K,ne.strategy=j,ne.method=V,He(h)}s=[new je(0,0,0,0,function(h,K){var V=65535;for(V>h.pending_buf_size-5&&(V=h.pending_buf_size-5);;){if(h.lookahead<=1){if(qe(h),0===h.lookahead&&K===m)return p;if(0===h.lookahead)break}h.strstart+=h.lookahead,h.lookahead=0;var D=h.block_start+V;if((0===h.strstart||h.strstart>=D)&&(h.lookahead=h.strstart-D,h.strstart=D,Z(h,!1),0===h.strm.avail_out)||h.strstart-h.block_start>=h.w_size-ge&&(Z(h,!1),0===h.strm.avail_out))return p}return h.insert=0,K===b?(Z(h,!0),0===h.strm.avail_out?ke:te):(h.strstart>h.block_start&&Z(h,!1),p)}),new je(4,4,8,4,Ge),new je(4,5,16,8,Ge),new je(4,6,32,32,Ge),new je(4,4,16,16,Re),new je(8,16,32,32,Re),new je(8,16,128,128,Re),new je(8,32,128,256,Re),new je(32,128,258,1024,Re),new je(32,258,258,4096,Re)],i.deflateInit=function(h,K){return Xe(h,K,T,15,8,0)},i.deflateInit2=Xe,i.deflateReset=He,i.deflateResetKeep=Ue,i.deflateSetHeader=function(h,K){return h&&h.state?2!==h.state.wrap?x:(h.state.gzhead=K,y):x},i.deflate=function(h,K){var V,D,w,j;if(!h||!h.state||5<K||K<0)return h?Se(h,x):x;if(D=h.state,!h.output||!h.input&&0!==h.avail_in||666===D.status&&K!==b)return Se(h,0===h.avail_out?-5:x);if(D.strm=h,V=D.last_flush,D.last_flush=K,D.status===O)if(2===D.wrap)h.adler=0,xe(D,31),xe(D,139),xe(D,8),D.gzhead?(xe(D,(D.gzhead.text?1:0)+(D.gzhead.hcrc?2:0)+(D.gzhead.extra?4:0)+(D.gzhead.name?8:0)+(D.gzhead.comment?16:0)),xe(D,255&D.gzhead.time),xe(D,D.gzhead.time>>8&255),xe(D,D.gzhead.time>>16&255),xe(D,D.gzhead.time>>24&255),xe(D,9===D.level?2:2<=D.strategy||D.level<2?4:0),xe(D,255&D.gzhead.os),D.gzhead.extra&&D.gzhead.extra.length&&(xe(D,255&D.gzhead.extra.length),xe(D,D.gzhead.extra.length>>8&255)),D.gzhead.hcrc&&(h.adler=u(h.adler,D.pending_buf,D.pending,0)),D.gzindex=0,D.status=69):(xe(D,0),xe(D,0),xe(D,0),xe(D,0),xe(D,0),xe(D,9===D.level?2:2<=D.strategy||D.level<2?4:0),xe(D,3),D.status=W);else{var se=T+(D.w_bits-8<<4)<<8;se|=(2<=D.strategy||D.level<2?0:D.level<6?1:6===D.level?2:3)<<6,0!==D.strstart&&(se|=32),se+=31-se%31,D.status=W,ve(D,se),0!==D.strstart&&(ve(D,h.adler>>>16),ve(D,65535&h.adler)),h.adler=1}if(69===D.status)if(D.gzhead.extra){for(w=D.pending;D.gzindex<(65535&D.gzhead.extra.length)&&(D.pending!==D.pending_buf_size||(D.gzhead.hcrc&&D.pending>w&&(h.adler=u(h.adler,D.pending_buf,D.pending-w,w)),z(h),w=D.pending,D.pending!==D.pending_buf_size));)xe(D,255&D.gzhead.extra[D.gzindex]),D.gzindex++;D.gzhead.hcrc&&D.pending>w&&(h.adler=u(h.adler,D.pending_buf,D.pending-w,w)),D.gzindex===D.gzhead.extra.length&&(D.gzindex=0,D.status=73)}else D.status=73;if(73===D.status)if(D.gzhead.name){w=D.pending;do{if(D.pending===D.pending_buf_size&&(D.gzhead.hcrc&&D.pending>w&&(h.adler=u(h.adler,D.pending_buf,D.pending-w,w)),z(h),w=D.pending,D.pending===D.pending_buf_size)){j=1;break}j=D.gzindex<D.gzhead.name.length?255&D.gzhead.name.charCodeAt(D.gzindex++):0,xe(D,j)}while(0!==j);D.gzhead.hcrc&&D.pending>w&&(h.adler=u(h.adler,D.pending_buf,D.pending-w,w)),0===j&&(D.gzindex=0,D.status=91)}else D.status=91;if(91===D.status)if(D.gzhead.comment){w=D.pending;do{if(D.pending===D.pending_buf_size&&(D.gzhead.hcrc&&D.pending>w&&(h.adler=u(h.adler,D.pending_buf,D.pending-w,w)),z(h),w=D.pending,D.pending===D.pending_buf_size)){j=1;break}j=D.gzindex<D.gzhead.comment.length?255&D.gzhead.comment.charCodeAt(D.gzindex++):0,xe(D,j)}while(0!==j);D.gzhead.hcrc&&D.pending>w&&(h.adler=u(h.adler,D.pending_buf,D.pending-w,w)),0===j&&(D.status=103)}else D.status=103;if(103===D.status&&(D.gzhead.hcrc?(D.pending+2>D.pending_buf_size&&z(h),D.pending+2<=D.pending_buf_size&&(xe(D,255&h.adler),xe(D,h.adler>>8&255),h.adler=0,D.status=W)):D.status=W),0!==D.pending){if(z(h),0===h.avail_out)return D.last_flush=-1,y}else if(0===h.avail_in&&ce(K)<=ce(V)&&K!==b)return Se(h,-5);if(666===D.status&&0!==h.avail_in)return Se(h,-5);if(0!==h.avail_in||0!==D.lookahead||K!==m&&666!==D.status){var ne=2===D.strategy?function(q,he){for(var _e;;){if(0===q.lookahead&&(qe(q),0===q.lookahead)){if(he===m)return p;break}if(q.match_length=0,_e=c._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++,_e&&(Z(q,!1),0===q.strm.avail_out))return p}return q.insert=0,he===b?(Z(q,!0),0===q.strm.avail_out?ke:te):q.last_lit&&(Z(q,!1),0===q.strm.avail_out)?p:X}(D,K):3===D.strategy?function(q,he){for(var _e,me,we,Fe,Ae=q.window;;){if(q.lookahead<=ue){if(qe(q),q.lookahead<=ue&&he===m)return p;if(0===q.lookahead)break}if(q.match_length=0,q.lookahead>=G&&0<q.strstart&&(me=Ae[we=q.strstart-1])===Ae[++we]&&me===Ae[++we]&&me===Ae[++we]){Fe=q.strstart+ue;do{}while(me===Ae[++we]&&me===Ae[++we]&&me===Ae[++we]&&me===Ae[++we]&&me===Ae[++we]&&me===Ae[++we]&&me===Ae[++we]&&me===Ae[++we]&&we<Fe);q.match_length=ue-(Fe-we),q.match_length>q.lookahead&&(q.match_length=q.lookahead)}if(q.match_length>=G?(_e=c._tr_tally(q,1,q.match_length-G),q.lookahead-=q.match_length,q.strstart+=q.match_length,q.match_length=0):(_e=c._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++),_e&&(Z(q,!1),0===q.strm.avail_out))return p}return q.insert=0,he===b?(Z(q,!0),0===q.strm.avail_out?ke:te):q.last_lit&&(Z(q,!1),0===q.strm.avail_out)?p:X}(D,K):s[D.level].func(D,K);if(ne!==ke&&ne!==te||(D.status=666),ne===p||ne===ke)return 0===h.avail_out&&(D.last_flush=-1),y;if(ne===X&&(1===K?c._tr_align(D):5!==K&&(c._tr_stored_block(D,0,0,!1),3===K&&(fe(D.head),0===D.lookahead&&(D.strstart=0,D.block_start=0,D.insert=0))),z(h),0===h.avail_out))return D.last_flush=-1,y}return K!==b?y:D.wrap<=0?1:(2===D.wrap?(xe(D,255&h.adler),xe(D,h.adler>>8&255),xe(D,h.adler>>16&255),xe(D,h.adler>>24&255),xe(D,255&h.total_in),xe(D,h.total_in>>8&255),xe(D,h.total_in>>16&255),xe(D,h.total_in>>24&255)):(ve(D,h.adler>>>16),ve(D,65535&h.adler)),z(h),0<D.wrap&&(D.wrap=-D.wrap),0!==D.pending?y:1)},i.deflateEnd=function(h){var K;return h&&h.state?(K=h.state.status)!==O&&69!==K&&73!==K&&91!==K&&103!==K&&K!==W&&666!==K?Se(h,x):(h.state=null,K===W?Se(h,-3):y):x},i.deflateSetDictionary=function(h,K){var V,D,w,j,se,ne,q,he,_e=K.length;if(!h||!h.state||2===(j=(V=h.state).wrap)||1===j&&V.status!==O||V.lookahead)return x;for(1===j&&(h.adler=f(h.adler,K,_e,0)),V.wrap=0,_e>=V.w_size&&(0===j&&(fe(V.head),V.strstart=0,V.block_start=0,V.insert=0),he=new o.Buf8(V.w_size),o.arraySet(he,K,_e-V.w_size,V.w_size,0),K=he,_e=V.w_size),se=h.avail_in,ne=h.next_in,q=h.input,h.avail_in=_e,h.next_in=0,h.input=K,qe(V);V.lookahead>=G;){for(D=V.strstart,w=V.lookahead-(G-1);V.ins_h=(V.ins_h<<V.hash_shift^V.window[D+G-1])&V.hash_mask,V.prev[D&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=D,D++,--w;);V.strstart=D,V.lookahead=G-1,qe(V)}return V.strstart+=V.lookahead,V.block_start=V.strstart,V.insert=V.lookahead,V.lookahead=0,V.match_length=V.prev_length=G-1,V.match_available=0,h.next_in=ne,h.input=q,h.avail_in=se,V.wrap=j,y},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,r,i){r.exports=function(s,o){var c,f,u,v,m,b,y,x,g,S,E,T,N,$,A,H,U,Q,G,ue,ge,O,W,p,X;p=s.input,u=(f=s.next_in)+(s.avail_in-5),X=s.output,m=(v=s.next_out)-(o-s.avail_out),b=v+(s.avail_out-257),y=(c=s.state).dmax,x=c.wsize,g=c.whave,S=c.wnext,E=c.window,T=c.hold,N=c.bits,$=c.lencode,A=c.distcode,H=(1<<c.lenbits)-1,U=(1<<c.distbits)-1;e:do{N<15&&(T+=p[f++]<<N,T+=p[f++]<<(N+=8),N+=8),Q=$[T&H];t:for(;;){if(T>>>=G=Q>>>24,N-=G,0==(G=Q>>>16&255))X[v++]=65535&Q;else{if(!(16&G)){if(!(64&G)){Q=$[(65535&Q)+(T&(1<<G)-1)];continue t}if(32&G){c.mode=12;break e}s.msg="invalid literal/length code",c.mode=30;break e}ue=65535&Q,(G&=15)&&(N<G&&(T+=p[f++]<<N,N+=8),ue+=T&(1<<G)-1,T>>>=G,N-=G),N<15&&(T+=p[f++]<<N,T+=p[f++]<<(N+=8),N+=8),Q=A[T&U];r:for(;;){if(T>>>=G=Q>>>24,N-=G,!(16&(G=Q>>>16&255))){if(!(64&G)){Q=A[(65535&Q)+(T&(1<<G)-1)];continue r}s.msg="invalid distance code",c.mode=30;break e}if(ge=65535&Q,N<(G&=15)&&(T+=p[f++]<<N,(N+=8)<G&&(T+=p[f++]<<N,N+=8)),y<(ge+=T&(1<<G)-1)){s.msg="invalid distance too far back",c.mode=30;break e}if(T>>>=G,N-=G,(G=v-m)<ge){if(g<(G=ge-G)&&c.sane){s.msg="invalid distance too far back",c.mode=30;break e}if(W=E,(O=0)===S){if(O+=x-G,G<ue){for(ue-=G;X[v++]=E[O++],--G;);O=v-ge,W=X}}else if(S<G){if(O+=x+S-G,(G-=S)<ue){for(ue-=G;X[v++]=E[O++],--G;);if(O=0,S<ue){for(ue-=G=S;X[v++]=E[O++],--G;);O=v-ge,W=X}}}else if(O+=S-G,G<ue){for(ue-=G;X[v++]=E[O++],--G;);O=v-ge,W=X}for(;2<ue;)X[v++]=W[O++],X[v++]=W[O++],X[v++]=W[O++],ue-=3;ue&&(X[v++]=W[O++],1<ue&&(X[v++]=W[O++]))}else{for(O=v-ge;X[v++]=X[O++],X[v++]=X[O++],X[v++]=X[O++],2<(ue-=3););ue&&(X[v++]=X[O++],1<ue&&(X[v++]=X[O++]))}break}}break}}while(f<u&&v<b);f-=ue=N>>3,T&=(1<<(N-=ue<<3))-1,s.next_in=f,s.next_out=v,s.avail_in=f<u?u-f+5:5-(f-u),s.avail_out=v<b?b-v+257:257-(v-b),c.hold=T,c.bits=N}},{}],49:[function(e,r,i){var s=e("../utils/common"),o=e("./adler32"),c=e("./crc32"),f=e("./inffast"),u=e("./inftrees"),v=1,m=2,b=0,y=-2,x=1,g=852,S=592;function E(O){return(O>>>24&255)+(O>>>8&65280)+((65280&O)<<8)+((255&O)<<24)}function T(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function N(O){var W;return O&&O.state?(O.total_in=O.total_out=(W=O.state).total=0,O.msg="",W.wrap&&(O.adler=1&W.wrap),W.mode=x,W.last=0,W.havedict=0,W.dmax=32768,W.head=null,W.hold=0,W.bits=0,W.lencode=W.lendyn=new s.Buf32(g),W.distcode=W.distdyn=new s.Buf32(S),W.sane=1,W.back=-1,b):y}function $(O){var W;return O&&O.state?((W=O.state).wsize=0,W.whave=0,W.wnext=0,N(O)):y}function A(O,W){var p,X;return O&&O.state?(X=O.state,W<0?(p=0,W=-W):(p=1+(W>>4),W<48&&(W&=15)),W&&(W<8||15<W)?y:(null!==X.window&&X.wbits!==W&&(X.window=null),X.wrap=p,X.wbits=W,$(O))):y}function H(O,W){var p,X;return O?(X=new T,(O.state=X).window=null,(p=A(O,W))!==b&&(O.state=null),p):y}var U,Q,G=!0;function ue(O){if(G){var W;for(U=new s.Buf32(512),Q=new s.Buf32(32),W=0;W<144;)O.lens[W++]=8;for(;W<256;)O.lens[W++]=9;for(;W<280;)O.lens[W++]=7;for(;W<288;)O.lens[W++]=8;for(u(v,O.lens,0,288,U,0,O.work,{bits:9}),W=0;W<32;)O.lens[W++]=5;u(m,O.lens,0,32,Q,0,O.work,{bits:5}),G=!1}O.lencode=U,O.lenbits=9,O.distcode=Q,O.distbits=5}function ge(O,W,p,X){var ke,te=O.state;return null===te.window&&(te.wsize=1<<te.wbits,te.wnext=0,te.whave=0,te.window=new s.Buf8(te.wsize)),X>=te.wsize?(s.arraySet(te.window,W,p-te.wsize,te.wsize,0),te.wnext=0,te.whave=te.wsize):(X<(ke=te.wsize-te.wnext)&&(ke=X),s.arraySet(te.window,W,p-X,ke,te.wnext),(X-=ke)?(s.arraySet(te.window,W,p-X,X,0),te.wnext=X,te.whave=te.wsize):(te.wnext+=ke,te.wnext===te.wsize&&(te.wnext=0),te.whave<te.wsize&&(te.whave+=ke))),0}i.inflateReset=$,i.inflateReset2=A,i.inflateResetKeep=N,i.inflateInit=function(O){return H(O,15)},i.inflateInit2=H,i.inflate=function(O,W){var p,X,ke,te,Se,ce,fe,z,Z,xe,ve,pe,qe,Ge,Re,je,Me,Ue,He,Xe,h,K,V,D,w=0,j=new s.Buf8(4),se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!O||!O.state||!O.output||!O.input&&0!==O.avail_in)return y;12===(p=O.state).mode&&(p.mode=13),Se=O.next_out,ke=O.output,te=O.next_in,X=O.input,z=p.hold,Z=p.bits,xe=ce=O.avail_in,ve=fe=O.avail_out,K=b;e:for(;;)switch(p.mode){case x:if(0===p.wrap){p.mode=13;break}for(;Z<16;){if(0===ce)break e;ce--,z+=X[te++]<<Z,Z+=8}if(2&p.wrap&&35615===z){j[p.check=0]=255&z,j[1]=z>>>8&255,p.check=c(p.check,j,2,0),Z=z=0,p.mode=2;break}if(p.flags=0,p.head&&(p.head.done=!1),!(1&p.wrap)||(((255&z)<<8)+(z>>8))%31){O.msg="incorrect header check",p.mode=30;break}if(8!=(15&z)){O.msg="unknown compression method",p.mode=30;break}if(Z-=4,h=8+(15&(z>>>=4)),0===p.wbits)p.wbits=h;else if(h>p.wbits){O.msg="invalid window size",p.mode=30;break}p.dmax=1<<h,O.adler=p.check=1,p.mode=512&z?10:12,Z=z=0;break;case 2:for(;Z<16;){if(0===ce)break e;ce--,z+=X[te++]<<Z,Z+=8}if(p.flags=z,8!=(255&p.flags)){O.msg="unknown compression method",p.mode=30;break}if(57344&p.flags){O.msg="unknown header flags set",p.mode=30;break}p.head&&(p.head.text=z>>8&1),512&p.flags&&(j[0]=255&z,j[1]=z>>>8&255,p.check=c(p.check,j,2,0)),Z=z=0,p.mode=3;case 3:for(;Z<32;){if(0===ce)break e;ce--,z+=X[te++]<<Z,Z+=8}p.head&&(p.head.time=z),512&p.flags&&(j[0]=255&z,j[1]=z>>>8&255,j[2]=z>>>16&255,j[3]=z>>>24&255,p.check=c(p.check,j,4,0)),Z=z=0,p.mode=4;case 4:for(;Z<16;){if(0===ce)break e;ce--,z+=X[te++]<<Z,Z+=8}p.head&&(p.head.xflags=255&z,p.head.os=z>>8),512&p.flags&&(j[0]=255&z,j[1]=z>>>8&255,p.check=c(p.check,j,2,0)),Z=z=0,p.mode=5;case 5:if(1024&p.flags){for(;Z<16;){if(0===ce)break e;ce--,z+=X[te++]<<Z,Z+=8}p.length=z,p.head&&(p.head.extra_len=z),512&p.flags&&(j[0]=255&z,j[1]=z>>>8&255,p.check=c(p.check,j,2,0)),Z=z=0}else p.head&&(p.head.extra=null);p.mode=6;case 6:if(1024&p.flags&&(ce<(pe=p.length)&&(pe=ce),pe&&(p.head&&(h=p.head.extra_len-p.length,p.head.extra||(p.head.extra=new Array(p.head.extra_len)),s.arraySet(p.head.extra,X,te,pe,h)),512&p.flags&&(p.check=c(p.check,X,pe,te)),ce-=pe,te+=pe,p.length-=pe),p.length))break e;p.length=0,p.mode=7;case 7:if(2048&p.flags){if(0===ce)break e;for(pe=0;h=X[te+pe++],p.head&&h&&p.length<65536&&(p.head.name+=String.fromCharCode(h)),h&&pe<ce;);if(512&p.flags&&(p.check=c(p.check,X,pe,te)),ce-=pe,te+=pe,h)break e}else p.head&&(p.head.name=null);p.length=0,p.mode=8;case 8:if(4096&p.flags){if(0===ce)break e;for(pe=0;h=X[te+pe++],p.head&&h&&p.length<65536&&(p.head.comment+=String.fromCharCode(h)),h&&pe<ce;);if(512&p.flags&&(p.check=c(p.check,X,pe,te)),ce-=pe,te+=pe,h)break e}else p.head&&(p.head.comment=null);p.mode=9;case 9:if(512&p.flags){for(;Z<16;){if(0===ce)break e;ce--,z+=X[te++]<<Z,Z+=8}if(z!==(65535&p.check)){O.msg="header crc mismatch",p.mode=30;break}Z=z=0}p.head&&(p.head.hcrc=p.flags>>9&1,p.head.done=!0),O.adler=p.check=0,p.mode=12;break;case 10:for(;Z<32;){if(0===ce)break e;ce--,z+=X[te++]<<Z,Z+=8}O.adler=p.check=E(z),Z=z=0,p.mode=11;case 11:if(0===p.havedict)return O.next_out=Se,O.avail_out=fe,O.next_in=te,O.avail_in=ce,p.hold=z,p.bits=Z,2;O.adler=p.check=1,p.mode=12;case 12:if(5===W||6===W)break e;case 13:if(p.last){z>>>=7&Z,Z-=7&Z,p.mode=27;break}for(;Z<3;){if(0===ce)break e;ce--,z+=X[te++]<<Z,Z+=8}switch(p.last=1&z,Z-=1,3&(z>>>=1)){case 0:p.mode=14;break;case 1:if(ue(p),p.mode=20,6!==W)break;z>>>=2,Z-=2;break e;case 2:p.mode=17;break;case 3:O.msg="invalid block type",p.mode=30}z>>>=2,Z-=2;break;case 14:for(z>>>=7&Z,Z-=7&Z;Z<32;){if(0===ce)break e;ce--,z+=X[te++]<<Z,Z+=8}if((65535&z)!=(z>>>16^65535)){O.msg="invalid stored block lengths",p.mode=30;break}if(p.length=65535&z,Z=z=0,p.mode=15,6===W)break e;case 15:p.mode=16;case 16:if(pe=p.length){if(ce<pe&&(pe=ce),fe<pe&&(pe=fe),0===pe)break e;s.arraySet(ke,X,te,pe,Se),ce-=pe,te+=pe,fe-=pe,Se+=pe,p.length-=pe;break}p.mode=12;break;case 17:for(;Z<14;){if(0===ce)break e;ce--,z+=X[te++]<<Z,Z+=8}if(p.nlen=257+(31&z),Z-=5,p.ndist=1+(31&(z>>>=5)),Z-=5,p.ncode=4+(15&(z>>>=5)),z>>>=4,Z-=4,286<p.nlen||30<p.ndist){O.msg="too many length or distance symbols",p.mode=30;break}p.have=0,p.mode=18;case 18:for(;p.have<p.ncode;){for(;Z<3;){if(0===ce)break e;ce--,z+=X[te++]<<Z,Z+=8}p.lens[se[p.have++]]=7&z,z>>>=3,Z-=3}for(;p.have<19;)p.lens[se[p.have++]]=0;if(p.lencode=p.lendyn,p.lenbits=7,K=u(0,p.lens,0,19,p.lencode,0,p.work,V={bits:p.lenbits}),p.lenbits=V.bits,K){O.msg="invalid code lengths set",p.mode=30;break}p.have=0,p.mode=19;case 19:for(;p.have<p.nlen+p.ndist;){for(;je=(w=p.lencode[z&(1<<p.lenbits)-1])>>>16&255,Me=65535&w,!((Re=w>>>24)<=Z);){if(0===ce)break e;ce--,z+=X[te++]<<Z,Z+=8}if(Me<16)z>>>=Re,Z-=Re,p.lens[p.have++]=Me;else{if(16===Me){for(D=Re+2;Z<D;){if(0===ce)break e;ce--,z+=X[te++]<<Z,Z+=8}if(z>>>=Re,Z-=Re,0===p.have){O.msg="invalid bit length repeat",p.mode=30;break}h=p.lens[p.have-1],pe=3+(3&z),z>>>=2,Z-=2}else if(17===Me){for(D=Re+3;Z<D;){if(0===ce)break e;ce--,z+=X[te++]<<Z,Z+=8}Z-=Re,h=0,pe=3+(7&(z>>>=Re)),z>>>=3,Z-=3}else{for(D=Re+7;Z<D;){if(0===ce)break e;ce--,z+=X[te++]<<Z,Z+=8}Z-=Re,h=0,pe=11+(127&(z>>>=Re)),z>>>=7,Z-=7}if(p.have+pe>p.nlen+p.ndist){O.msg="invalid bit length repeat",p.mode=30;break}for(;pe--;)p.lens[p.have++]=h}}if(30===p.mode)break;if(0===p.lens[256]){O.msg="invalid code -- missing end-of-block",p.mode=30;break}if(p.lenbits=9,K=u(v,p.lens,0,p.nlen,p.lencode,0,p.work,V={bits:p.lenbits}),p.lenbits=V.bits,K){O.msg="invalid literal/lengths set",p.mode=30;break}if(p.distbits=6,p.distcode=p.distdyn,K=u(m,p.lens,p.nlen,p.ndist,p.distcode,0,p.work,V={bits:p.distbits}),p.distbits=V.bits,K){O.msg="invalid distances set",p.mode=30;break}if(p.mode=20,6===W)break e;case 20:p.mode=21;case 21:if(6<=ce&&258<=fe){O.next_out=Se,O.avail_out=fe,O.next_in=te,O.avail_in=ce,p.hold=z,p.bits=Z,f(O,ve),Se=O.next_out,ke=O.output,fe=O.avail_out,te=O.next_in,X=O.input,ce=O.avail_in,z=p.hold,Z=p.bits,12===p.mode&&(p.back=-1);break}for(p.back=0;je=(w=p.lencode[z&(1<<p.lenbits)-1])>>>16&255,Me=65535&w,!((Re=w>>>24)<=Z);){if(0===ce)break e;ce--,z+=X[te++]<<Z,Z+=8}if(je&&!(240&je)){for(Ue=Re,He=je,Xe=Me;je=(w=p.lencode[Xe+((z&(1<<Ue+He)-1)>>Ue)])>>>16&255,Me=65535&w,!(Ue+(Re=w>>>24)<=Z);){if(0===ce)break e;ce--,z+=X[te++]<<Z,Z+=8}z>>>=Ue,Z-=Ue,p.back+=Ue}if(z>>>=Re,Z-=Re,p.back+=Re,p.length=Me,0===je){p.mode=26;break}if(32&je){p.back=-1,p.mode=12;break}if(64&je){O.msg="invalid literal/length code",p.mode=30;break}p.extra=15&je,p.mode=22;case 22:if(p.extra){for(D=p.extra;Z<D;){if(0===ce)break e;ce--,z+=X[te++]<<Z,Z+=8}p.length+=z&(1<<p.extra)-1,z>>>=p.extra,Z-=p.extra,p.back+=p.extra}p.was=p.length,p.mode=23;case 23:for(;je=(w=p.distcode[z&(1<<p.distbits)-1])>>>16&255,Me=65535&w,!((Re=w>>>24)<=Z);){if(0===ce)break e;ce--,z+=X[te++]<<Z,Z+=8}if(!(240&je)){for(Ue=Re,He=je,Xe=Me;je=(w=p.distcode[Xe+((z&(1<<Ue+He)-1)>>Ue)])>>>16&255,Me=65535&w,!(Ue+(Re=w>>>24)<=Z);){if(0===ce)break e;ce--,z+=X[te++]<<Z,Z+=8}z>>>=Ue,Z-=Ue,p.back+=Ue}if(z>>>=Re,Z-=Re,p.back+=Re,64&je){O.msg="invalid distance code",p.mode=30;break}p.offset=Me,p.extra=15&je,p.mode=24;case 24:if(p.extra){for(D=p.extra;Z<D;){if(0===ce)break e;ce--,z+=X[te++]<<Z,Z+=8}p.offset+=z&(1<<p.extra)-1,z>>>=p.extra,Z-=p.extra,p.back+=p.extra}if(p.offset>p.dmax){O.msg="invalid distance too far back",p.mode=30;break}p.mode=25;case 25:if(0===fe)break e;if(p.offset>(pe=ve-fe)){if((pe=p.offset-pe)>p.whave&&p.sane){O.msg="invalid distance too far back",p.mode=30;break}qe=pe>p.wnext?p.wsize-(pe-=p.wnext):p.wnext-pe,pe>p.length&&(pe=p.length),Ge=p.window}else Ge=ke,qe=Se-p.offset,pe=p.length;for(fe<pe&&(pe=fe),fe-=pe,p.length-=pe;ke[Se++]=Ge[qe++],--pe;);0===p.length&&(p.mode=21);break;case 26:if(0===fe)break e;ke[Se++]=p.length,fe--,p.mode=21;break;case 27:if(p.wrap){for(;Z<32;){if(0===ce)break e;ce--,z|=X[te++]<<Z,Z+=8}if(O.total_out+=ve-=fe,p.total+=ve,ve&&(O.adler=p.check=p.flags?c(p.check,ke,ve,Se-ve):o(p.check,ke,ve,Se-ve)),ve=fe,(p.flags?z:E(z))!==p.check){O.msg="incorrect data check",p.mode=30;break}Z=z=0}p.mode=28;case 28:if(p.wrap&&p.flags){for(;Z<32;){if(0===ce)break e;ce--,z+=X[te++]<<Z,Z+=8}if(z!==(4294967295&p.total)){O.msg="incorrect length check",p.mode=30;break}Z=z=0}p.mode=29;case 29:K=1;break e;case 30:K=-3;break e;case 31:return-4;default:return y}return O.next_out=Se,O.avail_out=fe,O.next_in=te,O.avail_in=ce,p.hold=z,p.bits=Z,(p.wsize||ve!==O.avail_out&&p.mode<30&&(p.mode<27||4!==W))&&ge(O,O.output,O.next_out,ve-O.avail_out)?(p.mode=31,-4):(ve-=O.avail_out,O.total_in+=xe-=O.avail_in,O.total_out+=ve,p.total+=ve,p.wrap&&ve&&(O.adler=p.check=p.flags?c(p.check,ke,ve,O.next_out-ve):o(p.check,ke,ve,O.next_out-ve)),O.data_type=p.bits+(p.last?64:0)+(12===p.mode?128:0)+(20===p.mode||15===p.mode?256:0),(0==xe&&0===ve||4===W)&&K===b&&(K=-5),K)},i.inflateEnd=function(O){if(!O||!O.state)return y;var W=O.state;return W.window&&(W.window=null),O.state=null,b},i.inflateGetHeader=function(O,W){var p;return O&&O.state&&2&(p=O.state).wrap?((p.head=W).done=!1,b):y},i.inflateSetDictionary=function(O,W){var p,X=W.length;return O&&O.state?0!==(p=O.state).wrap&&11!==p.mode?y:11===p.mode&&o(1,W,X,0)!==p.check?-3:ge(O,W,X,X)?(p.mode=31,-4):(p.havedict=1,b):y},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,r,i){var s=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(v,m,b,y,x,g,S,E){var T,N,$,A,H,U,Q,G,ue,ge=E.bits,O=0,W=0,p=0,X=0,ke=0,te=0,Se=0,ce=0,fe=0,z=0,Z=null,xe=0,ve=new s.Buf16(16),pe=new s.Buf16(16),qe=null,Ge=0;for(O=0;O<=15;O++)ve[O]=0;for(W=0;W<y;W++)ve[m[b+W]]++;for(ke=ge,X=15;1<=X&&0===ve[X];X--);if(X<ke&&(ke=X),0===X)return x[g++]=20971520,x[g++]=20971520,E.bits=1,0;for(p=1;p<X&&0===ve[p];p++);for(ke<p&&(ke=p),O=ce=1;O<=15;O++)if(ce<<=1,(ce-=ve[O])<0)return-1;if(0<ce&&(0===v||1!==X))return-1;for(pe[1]=0,O=1;O<15;O++)pe[O+1]=pe[O]+ve[O];for(W=0;W<y;W++)0!==m[b+W]&&(S[pe[m[b+W]]++]=W);if(U=0===v?(Z=qe=S,19):1===v?(Z=o,xe-=257,qe=c,Ge-=257,256):(Z=f,qe=u,-1),O=p,H=g,Se=W=z=0,$=-1,A=(fe=1<<(te=ke))-1,1===v&&852<fe||2===v&&592<fe)return 1;for(;;){for(Q=O-Se,ue=S[W]<U?(G=0,S[W]):S[W]>U?(G=qe[Ge+S[W]],Z[xe+S[W]]):(G=96,0),T=1<<O-Se,p=N=1<<te;x[H+(z>>Se)+(N-=T)]=Q<<24|G<<16|ue|0,0!==N;);for(T=1<<O-1;z&T;)T>>=1;if(0!==T?(z&=T-1,z+=T):z=0,W++,0==--ve[O]){if(O===X)break;O=m[b+S[W]]}if(ke<O&&(z&A)!==$){for(0===Se&&(Se=ke),H+=p,ce=1<<(te=O-Se);te+Se<X&&!((ce-=ve[te+Se])<=0);)te++,ce<<=1;if(fe+=1<<te,1===v&&852<fe||2===v&&592<fe)return 1;x[$=z&A]=ke<<24|te<<16|H-g|0}}return 0!==z&&(x[H+z]=O-Se<<24|64<<16|0),E.bits=ke,0}},{"../utils/common":41}],51:[function(e,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,r,i){var s=e("../utils/common");function f(w){for(var j=w.length;0<=--j;)w[j]=0}var m=256,b=m+1+29,y=30,x=19,g=2*b+1,S=15,E=16,N=256,U=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ue=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ge=new Array(2*(b+2));f(ge);var O=new Array(60);f(O);var W=new Array(512);f(W);var p=new Array(256);f(p);var X=new Array(29);f(X);var ke,te,Se,ce=new Array(y);function fe(w,j,se,ne,q){this.static_tree=w,this.extra_bits=j,this.extra_base=se,this.elems=ne,this.max_length=q,this.has_stree=w&&w.length}function z(w,j){this.dyn_tree=w,this.max_code=0,this.stat_desc=j}function Z(w){return w<256?W[w]:W[256+(w>>>7)]}function xe(w,j){w.pending_buf[w.pending++]=255&j,w.pending_buf[w.pending++]=j>>>8&255}function ve(w,j,se){w.bi_valid>E-se?(w.bi_buf|=j<<w.bi_valid&65535,xe(w,w.bi_buf),w.bi_buf=j>>E-w.bi_valid,w.bi_valid+=se-E):(w.bi_buf|=j<<w.bi_valid&65535,w.bi_valid+=se)}function pe(w,j,se){ve(w,se[2*j],se[2*j+1])}function qe(w,j){for(var se=0;se|=1&w,w>>>=1,se<<=1,0<--j;);return se>>>1}function Ge(w,j,se){var ne,q,he=new Array(S+1),_e=0;for(ne=1;ne<=S;ne++)he[ne]=_e=_e+se[ne-1]<<1;for(q=0;q<=j;q++){var me=w[2*q+1];0!==me&&(w[2*q]=qe(he[me]++,me))}}function Re(w){var j;for(j=0;j<b;j++)w.dyn_ltree[2*j]=0;for(j=0;j<y;j++)w.dyn_dtree[2*j]=0;for(j=0;j<x;j++)w.bl_tree[2*j]=0;w.dyn_ltree[2*N]=1,w.opt_len=w.static_len=0,w.last_lit=w.matches=0}function je(w){8<w.bi_valid?xe(w,w.bi_buf):0<w.bi_valid&&(w.pending_buf[w.pending++]=w.bi_buf),w.bi_buf=0,w.bi_valid=0}function Me(w,j,se,ne){var q=2*j,he=2*se;return w[q]<w[he]||w[q]===w[he]&&ne[j]<=ne[se]}function Ue(w,j,se){for(var ne=w.heap[se],q=se<<1;q<=w.heap_len&&(q<w.heap_len&&Me(j,w.heap[q+1],w.heap[q],w.depth)&&q++,!Me(j,ne,w.heap[q],w.depth));)w.heap[se]=w.heap[q],se=q,q<<=1;w.heap[se]=ne}function He(w,j,se){var ne,q,he,_e,me=0;if(0!==w.last_lit)for(;ne=w.pending_buf[w.d_buf+2*me]<<8|w.pending_buf[w.d_buf+2*me+1],q=w.pending_buf[w.l_buf+me],me++,0===ne?pe(w,q,j):(pe(w,(he=p[q])+m+1,j),0!==(_e=U[he])&&ve(w,q-=X[he],_e),pe(w,he=Z(--ne),se),0!==(_e=Q[he])&&ve(w,ne-=ce[he],_e)),me<w.last_lit;);pe(w,N,j)}function Xe(w,j){var se,ne,q,he=j.dyn_tree,_e=j.stat_desc.static_tree,me=j.stat_desc.has_stree,we=j.stat_desc.elems,Fe=-1;for(w.heap_len=0,w.heap_max=g,se=0;se<we;se++)0!==he[2*se]?(w.heap[++w.heap_len]=Fe=se,w.depth[se]=0):he[2*se+1]=0;for(;w.heap_len<2;)he[2*(q=w.heap[++w.heap_len]=Fe<2?++Fe:0)]=1,w.depth[q]=0,w.opt_len--,me&&(w.static_len-=_e[2*q+1]);for(j.max_code=Fe,se=w.heap_len>>1;1<=se;se--)Ue(w,he,se);for(q=we;se=w.heap[1],w.heap[1]=w.heap[w.heap_len--],Ue(w,he,1),ne=w.heap[1],w.heap[--w.heap_max]=se,w.heap[--w.heap_max]=ne,he[2*q]=he[2*se]+he[2*ne],w.depth[q]=(w.depth[se]>=w.depth[ne]?w.depth[se]:w.depth[ne])+1,he[2*se+1]=he[2*ne+1]=q,w.heap[1]=q++,Ue(w,he,1),2<=w.heap_len;);w.heap[--w.heap_max]=w.heap[1],function(Ae,Qe){var dt,et,vt,Ze,gt,Pe,nt=Qe.dyn_tree,Tt=Qe.max_code,st=Qe.stat_desc.static_tree,lr=Qe.stat_desc.has_stree,Ye=Qe.stat_desc.extra_bits,Vt=Qe.stat_desc.extra_base,ee=Qe.stat_desc.max_length,mt=0;for(Ze=0;Ze<=S;Ze++)Ae.bl_count[Ze]=0;for(nt[2*Ae.heap[Ae.heap_max]+1]=0,dt=Ae.heap_max+1;dt<g;dt++)ee<(Ze=nt[2*nt[2*(et=Ae.heap[dt])+1]+1]+1)&&(Ze=ee,mt++),nt[2*et+1]=Ze,Tt<et||(Ae.bl_count[Ze]++,gt=0,Vt<=et&&(gt=Ye[et-Vt]),Ae.opt_len+=(Pe=nt[2*et])*(Ze+gt),lr&&(Ae.static_len+=Pe*(st[2*et+1]+gt)));if(0!==mt){do{for(Ze=ee-1;0===Ae.bl_count[Ze];)Ze--;Ae.bl_count[Ze]--,Ae.bl_count[Ze+1]+=2,Ae.bl_count[ee]--,mt-=2}while(0<mt);for(Ze=ee;0!==Ze;Ze--)for(et=Ae.bl_count[Ze];0!==et;)Tt<(vt=Ae.heap[--dt])||(nt[2*vt+1]!==Ze&&(Ae.opt_len+=(Ze-nt[2*vt+1])*nt[2*vt],nt[2*vt+1]=Ze),et--)}}(w,j),Ge(he,Fe,w.bl_count)}function h(w,j,se){var ne,q,he=-1,_e=j[1],me=0,we=7,Fe=4;for(0===_e&&(we=138,Fe=3),j[2*(se+1)+1]=65535,ne=0;ne<=se;ne++)q=_e,_e=j[2*(ne+1)+1],++me<we&&q===_e||(me<Fe?w.bl_tree[2*q]+=me:0!==q?(q!==he&&w.bl_tree[2*q]++,w.bl_tree[32]++):me<=10?w.bl_tree[34]++:w.bl_tree[36]++,he=q,Fe=(me=0)===_e?(we=138,3):q===_e?(we=6,3):(we=7,4))}function K(w,j,se){var ne,q,he=-1,_e=j[1],me=0,we=7,Fe=4;for(0===_e&&(we=138,Fe=3),ne=0;ne<=se;ne++)if(q=_e,_e=j[2*(ne+1)+1],!(++me<we&&q===_e)){if(me<Fe)for(;pe(w,q,w.bl_tree),0!=--me;);else 0!==q?(q!==he&&(pe(w,q,w.bl_tree),me--),pe(w,16,w.bl_tree),ve(w,me-3,2)):me<=10?(pe(w,17,w.bl_tree),ve(w,me-3,3)):(pe(w,18,w.bl_tree),ve(w,me-11,7));he=q,Fe=(me=0)===_e?(we=138,3):q===_e?(we=6,3):(we=7,4)}}f(ce);var V=!1;function D(w,j,se,ne){var q,he,_e;ve(w,0+(ne?1:0),3),he=j,_e=se,je(q=w),xe(q,_e),xe(q,~_e),s.arraySet(q.pending_buf,q.window,he,_e,q.pending),q.pending+=_e}i._tr_init=function(w){V||(function(){var j,se,ne,q,he,_e=new Array(S+1);for(q=ne=0;q<28;q++)for(X[q]=ne,j=0;j<1<<U[q];j++)p[ne++]=q;for(p[ne-1]=q,q=he=0;q<16;q++)for(ce[q]=he,j=0;j<1<<Q[q];j++)W[he++]=q;for(he>>=7;q<y;q++)for(ce[q]=he<<7,j=0;j<1<<Q[q]-7;j++)W[256+he++]=q;for(se=0;se<=S;se++)_e[se]=0;for(j=0;j<=143;)ge[2*j+1]=8,j++,_e[8]++;for(;j<=255;)ge[2*j+1]=9,j++,_e[9]++;for(;j<=279;)ge[2*j+1]=7,j++,_e[7]++;for(;j<=287;)ge[2*j+1]=8,j++,_e[8]++;for(Ge(ge,b+1,_e),j=0;j<y;j++)O[2*j+1]=5,O[2*j]=qe(j,5);ke=new fe(ge,U,m+1,b,S),te=new fe(O,Q,0,y,S),Se=new fe(new Array(0),G,0,x,7)}(),V=!0),w.l_desc=new z(w.dyn_ltree,ke),w.d_desc=new z(w.dyn_dtree,te),w.bl_desc=new z(w.bl_tree,Se),w.bi_buf=0,w.bi_valid=0,Re(w)},i._tr_stored_block=D,i._tr_flush_block=function(w,j,se,ne){var q,he,_e=0;0<w.level?(2===w.strm.data_type&&(w.strm.data_type=function(me){var we,Fe=4093624447;for(we=0;we<=31;we++,Fe>>>=1)if(1&Fe&&0!==me.dyn_ltree[2*we])return 0;if(0!==me.dyn_ltree[18]||0!==me.dyn_ltree[20]||0!==me.dyn_ltree[26])return 1;for(we=32;we<m;we++)if(0!==me.dyn_ltree[2*we])return 1;return 0}(w)),Xe(w,w.l_desc),Xe(w,w.d_desc),_e=function(me){var we;for(h(me,me.dyn_ltree,me.l_desc.max_code),h(me,me.dyn_dtree,me.d_desc.max_code),Xe(me,me.bl_desc),we=x-1;3<=we&&0===me.bl_tree[2*ue[we]+1];we--);return me.opt_len+=3*(we+1)+5+5+4,we}(w),(he=w.static_len+3+7>>>3)<=(q=w.opt_len+3+7>>>3)&&(q=he)):q=he=se+5,se+4<=q&&-1!==j?D(w,j,se,ne):4===w.strategy||he===q?(ve(w,2+(ne?1:0),3),He(w,ge,O)):(ve(w,4+(ne?1:0),3),function(me,we,Fe,Ae){var Qe;for(ve(me,we-257,5),ve(me,Fe-1,5),ve(me,Ae-4,4),Qe=0;Qe<Ae;Qe++)ve(me,me.bl_tree[2*ue[Qe]+1],3);K(me,me.dyn_ltree,we-1),K(me,me.dyn_dtree,Fe-1)}(w,w.l_desc.max_code+1,w.d_desc.max_code+1,_e+1),He(w,w.dyn_ltree,w.dyn_dtree)),Re(w),ne&&je(w)},i._tr_tally=function(w,j,se){return w.pending_buf[w.d_buf+2*w.last_lit]=j>>>8&255,w.pending_buf[w.d_buf+2*w.last_lit+1]=255&j,w.pending_buf[w.l_buf+w.last_lit]=255&se,w.last_lit++,0===j?w.dyn_ltree[2*se]++:(w.matches++,j--,w.dyn_ltree[2*(p[se]+m+1)]++,w.dyn_dtree[2*Z(j)]++),w.last_lit===w.lit_bufsize-1},i._tr_align=function(w){var j;ve(w,2,3),pe(w,N,ge),16===(j=w).bi_valid?(xe(j,j.bi_buf),j.bi_buf=0,j.bi_valid=0):8<=j.bi_valid&&(j.pending_buf[j.pending++]=255&j.bi_buf,j.bi_buf>>=8,j.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,r,i){(function(s){!function(o,c){if(!o.setImmediate){var f,u,v,m,b=1,y={},x=!1,g=o.document,S=Object.getPrototypeOf&&Object.getPrototypeOf(o);S=S&&S.setTimeout?S:o,f="[object process]"==={}.toString.call(o.process)?function($){Et.nextTick(function(){T($)})}:function(){if(o.postMessage&&!o.importScripts){var $=!0,A=o.onmessage;return o.onmessage=function(){$=!1},o.postMessage("","*"),o.onmessage=A,$}}()?(m="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",N,!1):o.attachEvent("onmessage",N),function($){o.postMessage(m+$,"*")}):o.MessageChannel?((v=new MessageChannel).port1.onmessage=function($){T($.data)},function($){v.port2.postMessage($)}):g&&"onreadystatechange"in g.createElement("script")?(u=g.documentElement,function($){var A=g.createElement("script");A.onreadystatechange=function(){T($),A.onreadystatechange=null,u.removeChild(A),A=null},u.appendChild(A)}):function($){setTimeout(T,0,$)},S.setImmediate=function($){"function"!=typeof $&&($=new Function(""+$));for(var A=new Array(arguments.length-1),H=0;H<A.length;H++)A[H]=arguments[H+1];return y[b]={callback:$,args:A},f(b),b++},S.clearImmediate=E}function E($){delete y[$]}function T($){if(x)setTimeout(T,0,$);else{var A=y[$];if(A){x=!0;try{!function(H){var U=H.callback,Q=H.args;switch(Q.length){case 0:U();break;case 1:U(Q[0]);break;case 2:U(Q[0],Q[1]);break;case 3:U(Q[0],Q[1],Q[2]);break;default:U.apply(c,Q)}}(A)}finally{E($),x=!1}}}}function N($){$.source===o&&"string"==typeof $.data&&0===$.data.indexOf(m)&&T(+$.data.slice(m.length))}}(typeof self>"u"?void 0===s?this:s:self)}).call(this,typeof Ct<"u"?Ct:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)});const Nr=!(typeof self>"u")&&"showOpenFilePicker"in self,Io=Nr?Promise.resolve().then(function(){return Lo}):Promise.resolve().then(function(){return Zo});function pn(){return(pn=(0,F.Z)(function*(...n){return(yield Io).default(...n)})).apply(this,arguments)}Nr?Promise.resolve().then(function(){return zo}):Promise.resolve().then(function(){return Go});const No=Nr?Promise.resolve().then(function(){return Mo}):Promise.resolve().then(function(){return Vo});function yn(){return(yn=(0,F.Z)(function*(...n){return(yield No).default(...n)})).apply(this,arguments)}const Bo=function(){var n=(0,F.Z)(function*(t){const e=yield t.getFile();return e.handle=t,e});return function(e){return n.apply(this,arguments)}}();var Lo={__proto__:null,default:function(){var n=(0,F.Z)(function*(t=[{}]){Array.isArray(t)||(t=[t]);const e=[];t.forEach((s,o)=>{e[o]={description:s.description||"Files",accept:{}},s.mimeTypes?s.mimeTypes.map(c=>{e[o].accept[c]=s.extensions||[]}):e[o].accept["*/*"]=s.extensions||[]});const r=yield window.showOpenFilePicker({id:t[0].id,startIn:t[0].startIn,types:e,multiple:t[0].multiple||!1,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1}),i=yield Promise.all(r.map(Bo));return t[0].multiple?i:i[0]});return function(){return n.apply(this,arguments)}}()};function Cr(n){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var r=e.done;return Promise.resolve(e.value).then(function(i){return{value:i,done:r}})}return(Cr=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Cr(n)}const xi=function(){var n=(0,F.Z)(function*(t,e,r=t.name,i){const s=[],o=[];var c,f=!1,u=!1;try{for(var v,m=function(b){var y,x,g,S=2;for(typeof Symbol<"u"&&(x=Symbol.asyncIterator,g=Symbol.iterator);S--;){if(x&&null!=(y=b[x]))return y.call(b);if(g&&null!=(y=b[g]))return new Cr(y.call(b));x="@@asyncIterator",g="@@iterator"}throw new TypeError("Object is not async iterable")}(t.values());f=!(v=yield m.next()).done;f=!1){const b=v.value,y=`${r}/${b.name}`;"file"===b.kind?o.push(b.getFile().then(x=>(x.directoryHandle=t,x.handle=b,Object.defineProperty(x,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>y})))):"directory"!==b.kind||!e||i&&i(b)||s.push(xi(b,e,y,i))}}catch(b){u=!0,c=b}finally{try{f&&null!=m.return&&(yield m.return())}finally{if(u)throw c}}return[...(yield Promise.all(s)).flat(),...yield Promise.all(o)]});return function(e,r){return n.apply(this,arguments)}}();var zo={__proto__:null,default:function(){var n=(0,F.Z)(function*(t={}){t.recursive=t.recursive||!1,t.mode=t.mode||"read";const e=yield window.showDirectoryPicker({id:t.id,startIn:t.startIn,mode:t.mode});return(yield(yield e.values()).next()).done?[e]:xi(e,t.recursive,void 0,t.skipDirectory)});return function(){return n.apply(this,arguments)}}()},Mo={__proto__:null,default:function(){var n=(0,F.Z)(function*(t,e=[{}],r=null,i=!1,s=null){Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";const o=[];let c=null;if(t instanceof Blob&&t.type?c=t.type:t.headers&&t.headers.get("content-type")&&(c=t.headers.get("content-type")),e.forEach((v,m)=>{o[m]={description:v.description||"Files",accept:{}},v.mimeTypes?(0===m&&c&&v.mimeTypes.push(c),v.mimeTypes.map(b=>{o[m].accept[b]=v.extensions||[]})):c?o[m].accept[c]=v.extensions||[]:o[m].accept["*/*"]=v.extensions||[]}),r)try{yield r.getFile()}catch(v){if(r=null,i)throw v}const f=r||(yield window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:o,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}));!r&&s&&s(f);const u=yield f.createWritable();return"stream"in t?(yield t.stream().pipeTo(u),f):"body"in t?(yield t.body.pipeTo(u),f):(yield u.write(yield t),yield u.close(),f)});return function(e){return n.apply(this,arguments)}}()},Zo={__proto__:null,default:function(){var n=(0,F.Z)(function*(t=[{}]){return Array.isArray(t)||(t=[t]),new Promise((e,r)=>{const i=document.createElement("input");i.type="file";const s=[...t.map(u=>u.mimeTypes||[]),...t.map(u=>u.extensions||[])].join();i.multiple=t[0].multiple||!1,i.accept=s||"",i.style.display="none",document.body.append(i);const o=u=>{"function"==typeof c&&c(),e(u)},c=t[0].legacySetup&&t[0].legacySetup(o,()=>c(r),i),f=()=>{window.removeEventListener("focus",f),i.remove()};i.addEventListener("click",()=>{window.addEventListener("focus",f)}),i.addEventListener("change",()=>{window.removeEventListener("focus",f),i.remove(),o(i.multiple?Array.from(i.files):i.files[0])}),"showPicker"in HTMLInputElement.prototype?i.showPicker():i.click()})});return function(){return n.apply(this,arguments)}}()},Go={__proto__:null,default:function(){var n=(0,F.Z)(function*(t=[{}]){return Array.isArray(t)||(t=[t]),t[0].recursive=t[0].recursive||!1,new Promise((e,r)=>{const i=document.createElement("input");i.type="file",i.webkitdirectory=!0;const s=c=>{"function"==typeof o&&o(),e(c)},o=t[0].legacySetup&&t[0].legacySetup(s,()=>o(r),i);i.addEventListener("change",()=>{let c=Array.from(i.files);t[0].recursive?t[0].recursive&&t[0].skipDirectory&&(c=c.filter(f=>f.webkitRelativePath.split("/").every(u=>!t[0].skipDirectory({name:u,kind:"directory"})))):c=c.filter(f=>2===f.webkitRelativePath.split("/").length),s(c)}),"showPicker"in HTMLInputElement.prototype?i.showPicker():i.click()})});return function(){return n.apply(this,arguments)}}()},Vo={__proto__:null,default:function(){var n=(0,F.Z)(function*(t,e={}){Array.isArray(e)&&(e=e[0]);const r=document.createElement("a");let i=t;var c;"body"in t&&(i=yield(c=(0,F.Z)(function*(f,u){const v=f.getReader(),m=new ReadableStream({start:x=>function(){var g=(0,F.Z)(function*(){return v.read().then(({done:E,value:T})=>{if(!E)return x.enqueue(T),S();x.close()})});function S(){return g.apply(this,arguments)}return S}()()}),b=new Response(m),y=yield b.blob();return v.releaseLock(),new Blob([y],{type:u})}),function(f,u){return c.apply(this,arguments)})(t.body,t.headers.get("content-type"))),r.download=e.fileName||"Untitled",r.href=URL.createObjectURL(yield i);const s=()=>{"function"==typeof o&&o()},o=e.legacySetup&&e.legacySetup(s,()=>o(),r);return r.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(r.href),3e4),s()}),r.click(),null});return function(e){return n.apply(this,arguments)}}()};const Si=class{constructor(n){(0,$t.r)(this,n),this.importProgress=(0,$t.c)(this,"jeepSqliteImportProgress",7),this.exportProgress=(0,$t.c)(this,"jeepSqliteExportProgress",7),this.HTTPRequestEnded=(0,$t.c)(this,"jeepSqliteHTTPRequestEnded",7),this.PickDatabaseEnded=(0,$t.c)(this,"jeepSqlitePickDatabaseEnded",7),this.SaveDatabaseEnded=(0,$t.c)(this,"jeepSqliteSaveDatabaseToDisk",7),this.isStore=!1,this._dbDict={},this.databaseList={},this._versionUpgrades={},this._overwrite=!0,this.autoSave=!1,this.wasmPath=void 0,this.pickText=void 0,this.saveText=void 0,this.buttonOptions=void 0,this.innerAutoSave=void 0,this.innerWasmPath=void 0,this.innerPickText=void 0,this.innerSaveText=void 0,this.innerButtonOptions=void 0}parseAutoSave(n){this.innerAutoSave=n}parseWasmPath(n){this.innerWasmPath=n}parsePickText(n){this.innerPickText=n}parseSaveText(n){this.innerSaveText=n}parseButtonOptions(n){this.innerButtonOptions=JSON.parse(n);const t=Object.keys(this.innerButtonOptions);for(const e of t)switch(e){case"top":this.el.style.setProperty("--jeep-sqlite-top",this.innerButtonOptions[e]);break;case"right":this.el.style.setProperty("--jeep-sqlite-right",this.innerButtonOptions[e]);break;case"fontSize":this.el.style.setProperty("--jeep-sqlite-font-size",this.innerButtonOptions[e]);break;case"padding":this.el.style.setProperty("--jeep-sqlite-padding",this.innerButtonOptions[e]);break;case"backgroundColor":this.el.style.setProperty("--jeep-sqlite-background-color",this.innerButtonOptions[e]);break;case"color":this.el.style.setProperty("--jeep-sqlite-color",this.innerButtonOptions[e])}}echo(n){return(0,F.Z)(function*(){return n})()}createConnection(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(n).includes("database"))return Promise.reject("Must provide a database name");const r=n.database,i=n.version?n.version:1,s=!!n.readonly&&n.readonly;try{return yield t._createConnection(r,i,s),Promise.resolve()}catch(o){return Promise.reject(o)}})()}isConnection(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(n).includes("database"))return Promise.reject("Must provide a database name");const r=n.database,i=!!n.readonly&&n.readonly,s=yield t._isConnection(r,i);return Promise.resolve(s)})()}closeConnection(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(n).includes("database"))return Promise.reject("Must provide a database name");const r=n.database,i=!!n.readonly&&n.readonly;try{return yield t._closeConnection(r,i),Promise.resolve()}catch(s){return Promise.reject(s)}})()}open(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(n).includes("database"))return Promise.reject("Must provide a database name");const r=n.database,i=!!n.readonly&&n.readonly;try{return yield t._open(r,i),Promise.resolve()}catch(s){return Promise.reject(s)}})()}close(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(n).includes("database"))return Promise.reject("Must provide a database name");const r=n.database,i=!!n.readonly&&n.readonly;try{return yield t._close(r,i),Promise.resolve()}catch(s){return Promise.reject(s)}})()}getVersion(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(n).includes("database"))return Promise.reject("Must provide a database name");const r=n.database,i=!!n.readonly&&n.readonly;try{const s=yield t._getVersion(r,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})()}execute(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(n);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("statements")||0===n.statements.length)return Promise.reject("Must provide raw SQL statements");const r=n.database,i=n.statements;let s=!0;const o=!!n.readonly&&n.readonly;e.includes("transaction")&&(s=n.transaction);try{const c=yield t._execute(r,i,s,o);return Promise.resolve(c)}catch(c){return Promise.reject(c)}})()}executeSet(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(n);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("set")||0===n.set.length)return Promise.reject("Must provide a non-empty set of SQL statements");const r=n.database,i=n.set;let s=!0;e.includes("transaction")&&(s=n.transaction);const o=!!n.readonly&&n.readonly;try{const c=yield t._executeSet(r,i,s,o);return Promise.resolve(c)}catch(c){return Promise.reject(c)}})()}run(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(n);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("statement")||0===n.statement.length)return Promise.reject("Must provide a run statement");const r=n.database,i=n.statement;let s=[];e.includes("values")&&(s=n.values.length>0?n.values:[]);let o=!0;e.includes("transaction")&&(o=n.transaction);const c=!!n.readonly&&n.readonly;try{const f=yield t._run(r,i,s,o,c);return Promise.resolve(f)}catch(f){return Promise.reject(f)}})()}query(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(n);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("statement")||0===n.statement.length)return Promise.reject("Must provide a query statement");let r=[];e.includes("values")&&(r=n.values.length>0?n.values:[]);const i=n.database,s=n.statement,o=!!n.readonly&&n.readonly;try{const c=yield t._query(i,s,r,o);return Promise.resolve(c)}catch(c){return Promise.reject(c)}})()}getTableList(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(n).includes("database"))return Promise.reject("Must provide a database name");const r=n.database,i=!!n.readonly&&n.readonly;try{const s=yield t._getTableList(r,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})()}isDBExists(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(n).includes("database"))return Promise.reject("Must provide a database name");const r=n.database,i=!!n.readonly&&n.readonly;try{const s=yield t._isDBExists(r,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})()}isDBOpen(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(n).includes("database"))return Promise.reject("Must provide a database name");const r=n.database,i=!!n.readonly&&n.readonly;try{const s=yield t._isDBOpen(r,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})()}deleteDatabase(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(n).includes("database"))return Promise.reject("Must provide a database name");const r=n.database,i=!!n.readonly&&n.readonly;try{return yield t._deleteDatabase(r,i)}catch(s){return Promise.reject(s)}})()}isStoreOpen(){var n=this;return(0,F.Z)(function*(){return Promise.resolve(n.isStore)})()}copyFromAssets(n){var t=this;return(0,F.Z)(function*(){let e;if(e=null==n||!Object.keys(n).includes("overwrite")||n.overwrite,!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);try{return yield t._copyFromAssets(e),Promise.resolve()}catch(r){return Promise.reject(r)}})()}isTableExists(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);const e=Object.keys(n);if(!e.includes("database"))return Promise.reject("Must provide a database name");const r=n.database;if(!e.includes("table"))return Promise.reject("Must provide a table name");const i=n.table,s=!!n.readonly&&n.readonly;try{const o=yield t._isTableExists(r,i,s);return Promise.resolve(o)}catch(o){return Promise.reject(o)}})()}createSyncTable(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(n).includes("database"))return Promise.reject("Must provide a database name");const r=n.database,i=!!n.readonly&&n.readonly;try{const s=yield t._createSyncTable(r,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})()}getSyncDate(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(n).includes("database"))return Promise.reject("Must provide a database name");const r=n.database,i=!!n.readonly&&n.readonly;try{const s=yield t._getSyncDate(r,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})()}setSyncDate(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(n);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("syncdate"))return Promise.reject("Must provide a synchronization date");const r=n.database,i=n.syncdate,s=!!n.readonly&&n.readonly;try{return yield t._setSyncDate(r,i,s),Promise.resolve()}catch(o){return Promise.reject(o)}})()}isJsonValid(n){var t=this;return(0,F.Z)(function*(){if(!Object.keys(n).includes("jsonstring"))return Promise.reject("Must provide a json object");const r=n.jsonstring;try{const i=yield t._isJsonValid(r);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}importFromJson(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(n).includes("jsonstring"))return Promise.reject("Must provide a json object");const r=n.jsonstring;try{const i=yield t._importFromJson(r);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}exportToJson(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);const e=Object.keys(n);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("jsonexportmode"))return Promise.reject("Must provide a json export mode");const r=n.database,i=n.jsonexportmode,s=!!n.readonly&&n.readonly;try{const o=yield t._exportToJson(r,i,s);return Promise.resolve(o)}catch(o){return Promise.reject(o)}})()}deleteExportedRows(n){var t=this;return(0,F.Z)(function*(){if(!Object.keys(n).includes("database"))return Promise.reject("Must provide a database name");const r=n.database,i=!!n.readonly&&n.readonly;try{return yield t._deleteExportedRows(r,i),Promise.resolve()}catch(s){return Promise.reject(s)}})()}addUpgradeStatement(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);let e=Object.keys(n);if(!e.includes("database"))return Promise.reject("Must provide a database name");if(!e.includes("upgrade"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");const r=n.database,i=n.upgrade;for(const s of i){const o=Object.keys(s);if(!o.includes("toVersion")||!o.includes("statements"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");if("number"!=typeof s.toVersion)return Promise.reject("upgrade.toVersion must be a number");if(t._versionUpgrades[r])t._versionUpgrades[r][s.toVersion]=s;else{const c={};c[s.toVersion]=s,t._versionUpgrades[r]=c}}return Promise.resolve()})()}isDatabase(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(n).includes("database"))return Promise.reject("Must provide a database name");const r=n.database;try{const i=yield t._isDatabase(r);return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}getDatabaseList(){var n=this;return(0,F.Z)(function*(){if(!n.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${n.storeName} is not opened`);try{const t=yield n._getDatabaseList();return Promise.resolve(t)}catch(t){return Promise.reject(t)}})()}checkConnectionsConsistency(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);const e=Object.keys(n);if(!e.includes("dbNames"))return Promise.reject("Must provide a list of connection's name");const r=n.dbNames;if(!e.includes("openModes"))return Promise.reject("Must provide a list of connection's open mode");const i=n.openModes;try{const s=yield t._checkConnectionsConsistency(r,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}})()}saveToStore(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(n).includes("database"))return Promise.reject("Must provide a database name");const r=n.database,i=!!n.readonly&&n.readonly;try{return yield t._saveToStore(r,i),Promise.resolve()}catch(s){return Promise.reject(s)}})()}saveToLocalDisk(n){var t=this;return(0,F.Z)(function*(){if(!Object.keys(n).includes("database"))return Promise.reject("Must provide a database name");const r=n.database;try{return yield t._saveToLocalDisk(r),Promise.resolve()}catch(i){return Promise.reject(i)}})()}getFromLocalDiskToStore(n){var t=this;return(0,F.Z)(function*(){const e=!n.overwrite||n.overwrite;console.log(Nr?"Using the File System Access API.":"Using the fallback implementation.");try{return yield t._getFromLocalDiskToStore(e),Promise.resolve()}catch(r){return Promise.reject(r)}})()}getFromHTTPRequest(n){var t=this;return(0,F.Z)(function*(){if(!t.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${t.storeName} is not opened`);if(!Object.keys(n).includes("url"))return Promise.reject("Must provide an url");const r=n.url,i=!n.overwrite||n.overwrite;try{return yield t._getFromHTTPRequest(r,i),Promise.resolve()}catch(s){return Promise.reject(s)}})()}connectedCallback(){this.parseAutoSave(void 0!==this.autoSave&&this.autoSave),this.parseWasmPath(void 0!==this.wasmPath?this.wasmPath:"/assets"),this.parseSaveText(void 0!==this.saveText?this.saveText:"Save"),this.parsePickText(void 0!==this.pickText?this.pickText:"Pick a database"),void 0!==this.buttonOptions&&this.parseButtonOptions(this.buttonOptions),this.openStore("jeepSqliteStore","databases").then(n=>{this.isStore=n})}componentWillLoad(){}componentDidLoad(){var n=this;return(0,F.Z)(function*(){n._element=n.el.shadowRoot,n.isStore||console.log("jeep-sqlite isStore = false")})()}_createConnection(n,t,e){var r=this;return(0,F.Z)(function*(){let i={};const s=Object.keys(r._versionUpgrades);0!==s.length&&s.includes(n)&&(i=r._versionUpgrades[n]);const o=Object.keys(r._dbDict);let c;try{return c=o.length>0&&(o.includes("RW_"+n)||o.includes("RO_"+n))?o.includes("RW_"+n)?r._dbDict["RW_"+n]:r._dbDict["RO_"+n]:new wi(n+"SQLite.db",t,i,r.store,r.innerAutoSave,r.innerWasmPath),r._dbDict[e?"RO_"+n:"RW_"+n]=c,Promise.resolve()}catch(f){return Promise.reject(f.message)}})()}_isConnection(n,t){var e=this;return(0,F.Z)(function*(){return Object.keys(e._dbDict).includes(t?"RO_"+n:"RW_"+n)?{result:!0}:{result:!1}})()}_closeConnection(n,t){var e=this;return(0,F.Z)(function*(){const r=Object.keys(e._dbDict),i=t?"RO_"+n:"RW_"+n;if(!r.includes(i))return Promise.reject(`CloseConnection: No available connection for ${n}`);const s=e._dbDict[i];try{if(s.isDBOpen())try{yield s.close()}catch(o){return Promise.reject(`CloseConnection: close ${n} failed ${o}`)}return delete e._dbDict[i],Promise.resolve()}catch(o){return Promise.reject(`CloseConnection: ${o.message}`)}})()}_open(n,t){var e=this;return(0,F.Z)(function*(){const r=Object.keys(e._dbDict),i=t?"RO_"+n:"RW_"+n;if(!r.includes(i))return Promise.reject(`Open: No available connection for ${n}`);const s=e._dbDict[i];try{return yield s.open(),Promise.resolve()}catch(o){return Promise.reject(`Open: ${o.message}`)}})()}_close(n,t){var e=this;return(0,F.Z)(function*(){const r=Object.keys(e._dbDict),i=t?"RO_"+n:"RW_"+n;if(!r.includes(i))return Promise.reject(`Close: No available connection for ${n}`);const s=e._dbDict[i];try{return yield s.close(),Promise.resolve()}catch(o){return Promise.reject(`Close: ${o.message}`)}})()}_saveToStore(n,t){var e=this;return(0,F.Z)(function*(){const r=Object.keys(e._dbDict),i=t?"RO_"+n:"RW_"+n;if(!r.includes(i))return Promise.reject(`SaveToStore: No available connection for ${n}`);const s=e._dbDict[i];try{return yield s.saveToStore(),Promise.resolve()}catch(o){return Promise.reject(`SaveToStore: ${o.message}`)}})()}_saveToLocalDisk(n){var t=this;return(0,F.Z)(function*(){try{const e=Object.keys(t._dbDict),r="RW_"+n;if(!e.includes(r))return Promise.reject(`_saveToLocalDisk: No available connection for ${n}`);const s=yield t._dbDict[r].exportDB();t._blob=yield t.uint2blob(s);const o=`${n}SQLite.db`;return t._opts={fileName:o,extensions:[".db"]},t._buttonSaveEl=document.createElement("button"),t._buttonSaveEl.setAttribute("id","saveButton"),t._buttonSaveEl.innerHTML=`${t.innerSaveText} ${o}`,t._element.appendChild(t._buttonSaveEl),t._buttonSaveEl.addEventListener("click",t.saveFile.bind(t)),Promise.resolve()}catch(e){return Promise.reject(`_saveToLocalDisk: ${e.message}`)}})()}_getFromLocalDiskToStore(n){var t=this;return(0,F.Z)(function*(){return t._buttonPickEl=document.createElement("button"),t._buttonPickEl.setAttribute("id","pickButton"),t._buttonPickEl.innerHTML=`${t.innerPickText}`,t._element.appendChild(t._buttonPickEl),t._buttonPickEl.addEventListener("click",t.pickDatabase.bind(t)),t._overwrite=n,Promise.resolve()})()}pickDatabase(){var n=this;return(0,F.Z)(function*(){try{const t=yield function jo(){return pn.apply(this,arguments)}({extensions:[".db"]});let e=yield n.blob2uint(t);const r=n.removePathSuffix(t.name),i=n.setPathSuffix(t.name);(yield _t(i,n.store))?n._overwrite?(yield qt(i,n.store),yield kt(i,e,n.store)):n.PickDatabaseEnded.emit({message:`Error: cannot overwrite ${i}`}):yield kt(i,e,n.store),n._element.removeChild(n._buttonPickEl),n.PickDatabaseEnded.emit({db_name:r})}catch(t){n.PickDatabaseEnded.emit({message:t.message?t.message:t})}})()}saveFile(){var n=this;return(0,F.Z)(function*(){try{yield function Co(){return yn.apply(this,arguments)}(n._blob,[n._opts]);const t=n._opts.fileName;n._element.removeChild(n._buttonSaveEl),n.SaveDatabaseEnded.emit({db_name:t})}catch(t){n.SaveDatabaseEnded.emit({message:t.message?t.message:t})}})()}_getVersion(n,t){var e=this;return(0,F.Z)(function*(){const r=Object.keys(e._dbDict),i=t?"RO_"+n:"RW_"+n;if(!r.includes(i))return Promise.reject(`Open: No available connection for ${n}`);const s=e._dbDict[i];try{const o=yield s.getVersion(),c={};return c.version=o,Promise.resolve(c)}catch(o){return Promise.reject(`Open: ${o.message}`)}})()}_execute(n,t,e,r){var i=this;return(0,F.Z)(function*(){const s=Object.keys(i._dbDict),o="RW_"+n;if(!s.includes(o))return Promise.reject(`Execute: No available connection for ${n}`);const c=i._dbDict[o];if(r)return Promise.reject("Execute: not allowed in read-only mode");let f={};const u=t[0].substring(0,6);if(i.innerAutoSave&&"COMMIT"===u)return f.changes.changes=0,Promise.resolve(f);try{return f={changes:{changes:yield c.executeSQL(t,e)}},Promise.resolve(f)}catch(v){return Promise.reject(`Execute: ${v.message}`)}})()}_executeSet(n,t,e,r){var i=this;return(0,F.Z)(function*(){const s=Object.keys(i._dbDict),o="RW_"+n;if(!s.includes(o))return Promise.reject(`ExecuteSet: No available connection for ${n}`);const c=i._dbDict[o];if(r)return Promise.reject("ExecuteSet: not allowed in read-only mode");for(const f of t)if(!("statement"in f)||!("values"in f))return Promise.reject("ExecuteSet: Must provide a set as Array of {statement,values}");try{const f=yield c.execSet(t,e);return Promise.resolve({changes:{changes:f.changes,lastId:f.lastId}})}catch(f){return Promise.reject(`ExecuteSet: ${f.message}`)}})()}_run(n,t,e,r,i){var s=this;return(0,F.Z)(function*(){const o=Object.keys(s._dbDict),c="RW_"+n;if(!o.includes(c))return Promise.reject(`Run: No available connection for ${n}`);const f=s._dbDict[c];if(i)return Promise.reject("Run: not allowed in read-only mode");let u={};const v=t.substring(0,6);if(s.innerAutoSave&&"COMMIT"===v)return u={changes:{changes:0}},Promise.resolve(u);try{const m=yield f.runSQL(t,e,r);return u={changes:{changes:m.changes,lastId:m.lastId}},Promise.resolve(u)}catch(m){return Promise.reject(`Run: ${m.message}`)}})()}_query(n,t,e,r){var i=this;return(0,F.Z)(function*(){const s=Object.keys(i._dbDict),o=r?"RO_"+n:"RW_"+n;if(!s.includes(o))return Promise.reject(`Query: No available connection for ${n}`);const c=i._dbDict[o];let f=[];const u=t.substring(0,6);if(i.innerAutoSave&&"COMMIT"===u)return Promise.resolve({values:f});try{return f=yield c.selectSQL(t,e),Promise.resolve({values:f})}catch(v){return Promise.reject(`Query failed: ${v.message}`)}})()}_getTableList(n,t){var e=this;return(0,F.Z)(function*(){const r=Object.keys(e._dbDict),i=t?"RO_"+n:"RW_"+n;if(!r.includes(i))return Promise.reject(`GetTableList: No available connection for ${n}`);const s=e._dbDict[i];let o=[];try{return o=yield s.getTableNames(),Promise.resolve({values:o})}catch(c){return Promise.reject(`GetTableList failed: ${c.message}`)}})()}_isDBExists(n,t){var e=this;return(0,F.Z)(function*(){const r=Object.keys(e._dbDict),i=t?"RO_"+n:"RW_"+n;if(!r.includes(i))return Promise.reject(`IsDBExists: No available connection for ${n}`);const s=e._dbDict[i];try{const c={result:yield s.isDBExists(n+"SQLite.db")};return Promise.resolve(c)}catch(o){return Promise.reject(`IsDBExists: ${o.message}`)}})()}_isDBOpen(n,t){var e=this;return(0,F.Z)(function*(){const r=Object.keys(e._dbDict),i=t?"RO_"+n:"RW_"+n;if(!r.includes(i))return Promise.reject(`IsDBOpen: No available connection for ${n}`);const s=e._dbDict[i];try{const c={result:yield s.isDBOpen(n+"SQLite.db")};return Promise.resolve(c)}catch(o){return Promise.reject(`IsDBOpen: ${o.message}`)}})()}_deleteDatabase(n,t){var e=this;return(0,F.Z)(function*(){const r=Object.keys(e._dbDict),i="RW_"+n;if(!r.includes(i))return Promise.reject(`DeleteDatabase: No available connection for ${n}`);const s=e._dbDict[i];if(t)return Promise.reject("DeleteDatabase: not allowed in read-only mode");try{return yield s.deleteDB(n+"SQLite.db"),Promise.resolve()}catch(o){return Promise.reject(`DeleteDatabase: ${o.message}`)}})()}_isTableExists(n,t,e){var r=this;return(0,F.Z)(function*(){const i=Object.keys(r._dbDict),s=e?"RO_"+n:"RW_"+n;if(!i.includes(s))return Promise.reject(`IsTableExists: No available connection for ${n}`);const o=r._dbDict[s];try{const f={result:yield o.isTable(t)};return Promise.resolve(f)}catch(c){return Promise.reject(`IsTableExists: ${c.message}`)}})()}_createSyncTable(n,t){var e=this;return(0,F.Z)(function*(){const r=Object.keys(e._dbDict),i="RW_"+n;if(!r.includes(i))return Promise.reject(`CreateSyncTable: No available connection for ${n}`);const s=e._dbDict[i];if(t)return Promise.reject("CreateSyncTable: not allowed in read-only mode");try{const o=yield s.createSyncTable();return Promise.resolve({changes:{changes:o}})}catch(o){return Promise.reject(`CreateSyncTable: ${o.message}`)}})()}_getSyncDate(n,t){var e=this;return(0,F.Z)(function*(){const r=Object.keys(e._dbDict),i=t?"RO_"+n:"RW_"+n;if(!r.includes(i))return Promise.reject(`GetSyncDate: No available connection for ${n}`);const s=e._dbDict[i];try{const o=yield s.getSyncDate();return Promise.resolve({syncDate:o})}catch(o){return Promise.reject(`GetSyncDate: ${o.message}`)}})()}_setSyncDate(n,t,e){var r=this;return(0,F.Z)(function*(){const i=Object.keys(r._dbDict),s="RW_"+n;if(!i.includes(s))return Promise.reject(`SetSyncDate: No available connection for ${n}`);const o=r._dbDict[s];if(e)return Promise.reject("SetSyncDate: not allowed in read-only mode");try{const c=yield o.setSyncDate(t);return c.result?Promise.resolve():Promise.reject(`SetSyncDate: ${c.message}`)}catch(c){return Promise.reject(`SetSyncDate: ${c.message}`)}})()}_isJsonValid(n){return(0,F.Z)(function*(){const t=JSON.parse(n);return(yield hn(t))?Promise.resolve({result:!0}):Promise.reject("IsJsonValid: Stringify Json Object not Valid")})()}_importFromJson(n){var t=this;return(0,F.Z)(function*(){var e,r;const i=JSON.parse(n);if(!(yield hn(i)))return Promise.reject("ImportFromJson: Stringify Json Object not Valid");const o=i,c=`${o.database}SQLite.db`,f=null!==(e=o.version)&&void 0!==e?e:1,u=o.mode,v=null!==(r=o.overwrite)&&void 0!==r&&r,m=new wi(c,f,{},t.store,t.innerAutoSave,t.innerWasmPath);try{v&&"full"===u&&_t(c,t.store)&&(yield qt(c,t.store)),yield m.open();const b=yield m.getTableNames();if("full"===u&&b.length>0){const x=yield m.getVersion();if(f<x)return Promise.reject(`ImportFromJson: Cannot import a version lower than ${x}`);if(x===f)return Promise.resolve({changes:{changes:0}})}const y=yield m.importJson(o,t.importProgress);return yield m.close(),Promise.resolve({changes:{changes:y}})}catch(b){return Promise.reject(`ImportFromJson: ${b.message}`)}})()}_exportToJson(n,t,e){var r=this;return(0,F.Z)(function*(){const i=Object.keys(r._dbDict),s=e?"RO_"+n:"RW_"+n;if(!i.includes(s))return Promise.reject(`ExportToJson: No available connection for ${n}`);const o=r._dbDict[s];try{const c=yield o.exportJson(t,r.exportProgress);return Object.keys(c).includes("message")?Promise.reject(`ExportToJson: ${c.message}`):Promise.resolve({export:c})}catch(c){return Promise.reject(`ExportToJson: ${c.message}`)}})()}_deleteExportedRows(n,t){var e=this;return(0,F.Z)(function*(){const r=Object.keys(e._dbDict),i="RW_"+n;if(!r.includes(i))return Promise.reject(`ExportToJson: No available connection for ${n}`);const s=e._dbDict[i];if(t)return Promise.reject("SetSyncDate: not allowed in read-only mode");try{yield s.deleteExportedRows()}catch(o){return Promise.reject(`DeleteExportedRows: ${o.message}`)}})()}_copyFromAssets(n){var t=this;return(0,F.Z)(function*(){const e=yield t.loadJSON("assets/databases/databases.json");if(null==e)return Promise.reject("CopyFromAssets: no databases.json file in assets/databases folder");if(t.databaseList=JSON.parse(e),!Object.keys(t.databaseList).includes("databaseList"))return Promise.reject("CopyFromAssets: no key databaseList in databases.json");try{for(const i of t.databaseList.databaseList)".db"===i.substring(i.length-3)&&(yield t.copyDatabase(`assets/databases/${i}`,n)),".zip"===i.substring(i.length-4)&&(yield t.unzipDatabase(`assets/databases/${i}`,n));return Promise.resolve()}catch(i){return Promise.reject(`CopyFromAssets: ${i.message}`)}})()}_getFromHTTPRequest(n,t){var e=this;return(0,F.Z)(function*(){try{let r;return".db"===n.substring(n.length-3)&&(yield e.copyDatabase(n,t),r="db"),".zip"===n.substring(n.length-4)&&(yield e.unzipDatabase(n,t),r="zip"),e.HTTPRequestEnded.emit({message:r}),Promise.resolve()}catch(r){return Promise.reject(`GetFromHTTPRequest: ${r.message}`)}})()}_isDatabase(n){var t=this;return(0,F.Z)(function*(){try{const r={result:yield _t(n+"SQLite.db",t.store)};return Promise.resolve(r)}catch(e){return Promise.reject(`IsDatabase: ${e.message}`)}})()}_getDatabaseList(){var n=this;return(0,F.Z)(function*(){try{const e={values:yield Vs(n.store)};return Promise.resolve(e)}catch(t){return Promise.reject(`GetDatabaseList: ${t.message}`)}})()}_checkConnectionsConsistency(n,t){var e=this;return(0,F.Z)(function*(){const r={result:!1},i=[];n.forEach((s,o)=>{i.push(`${t[o]}_${s}`)});try{let s=new Set(Object.keys(e._dbDict));const o=new Set(i);if(0===o.size)return yield e._resetDbDict(Object.keys(e._dbDict)),Promise.resolve(r);if(s.size<o.size)return yield e._resetDbDict(Object.keys(e._dbDict)),Promise.resolve(r);if(s.size>o.size){const c={};for(const f of s)if(!Array.from(o.keys()).includes(f)){let u=!1;"RO_"===f.substring(0,3)&&(u=!0),c.database=f.substring(3),c.readonly=u,yield e._closeConnection(c.database,c.readonly)}}return s=new Set(Object.keys(e._dbDict)),s.size===o.size&&0===(yield e.symmetricDifference(s,o)).size?(r.result=!0,Promise.resolve(r)):(yield e._resetDbDict(Object.keys(e._dbDict)),Promise.resolve(r))}catch(s){return Promise.reject(`CheckConnectionsConsistency: ${s.message}`)}})()}_resetDbDict(n){var t=this;return(0,F.Z)(function*(){try{for(const e of n){const r={};let i=!1;"RO_"===e.substring(0,3)&&(i=!0),r.database=e.substring(3),r.readonly=i,yield t._closeConnection(r.database,r.readonly)}}catch(e){return Promise.reject(`ResetDbDict: ${e.message}`)}})()}symmetricDifference(n,t){return(0,F.Z)(function*(){let e=new Set;n.forEach(i=>{e.add(i.substring(3))});let r=new Set;t.forEach(i=>{r.add(i.substring(3))});for(const i of r)e.has(i)?e.delete(i):e.add(i);return e})()}unzipDatabase(n,t){var e=this;return(0,F.Z)(function*(){return new Promise((r,i)=>{var s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType="arraybuffer",s.onerror=()=>{i(new Error("unzipDatabase: failed"))},s.onload=()=>{Ro.loadAsync(s.response).then(function(){var o=(0,F.Z)(function*(c){const f=Object.keys(c.files);try{for(const u of f)yield e.retrieveDBFromZip(c.files,u,t);r()}catch(u){i(new Error(`unzipDatabase Error: ${u.message}`))}});return function(c){return o.apply(this,arguments)}}())},s.send()})})()}retrieveDBFromZip(n,t,e){var r=this;return(0,F.Z)(function*(){return new Promise((i,s)=>{n[t].async("nodebuffer").then(function(){var o=(0,F.Z)(function*(c){try{const f=new Uint8Array(c),u=r.setPathSuffix(t);(yield _t(u,r.store))?e?(yield qt(u,r.store),yield kt(u,f,r.store)):s(new Error(`retrieveDBFromZip: cannot overwrite ${u}`)):yield kt(u,f,r.store),i()}catch(f){s(new Error(`retrieveDBFromZip:: ${f.message}`))}});return function(c){return o.apply(this,arguments)}}())})})()}copyDatabase(n,t){var e=this;return(0,F.Z)(function*(){return new Promise((r,i)=>{var o,s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType="arraybuffer",s.onerror=()=>{i(new Error("CopyDatabase: failed"))},s.onload=()=>{o=new Uint8Array(s.response)},s.onloadend=(0,F.Z)(function*(){const c=e.setPathSuffix(n);(yield _t(c,e.store))?t?(yield qt(c,e.store),yield kt(c,o,e.store)):i(new Error(`CopyDatabase Error: cannot overwrite ${c}`)):yield kt(c,o,e.store),r()}),s.send()})})()}loadJSON(n){return(0,F.Z)(function*(){return new Promise((t,e)=>{var r=new XMLHttpRequest;r.overrideMimeType("application/json"),r.open("GET",n,!0),r.onerror=()=>{e(new Error("LoadJSON: failed"))},r.onreadystatechange=function(){404==r.status&&t(null),4==r.readyState&&200==r.status&&t(r.responseText)},r.send(null)})})()}openStore(n,t){var e=this;return(0,F.Z)(function*(){let r=!1;const i=e.setConfig(n,t);return e.store=Ei.createInstance(i),null!=e.store&&(e.storeName=n,r=!0),r})()}setConfig(n,t){return{name:n,storeName:t,driver:[Ei.INDEXEDDB],version:1}}removePathSuffix(n){return n.includes("SQLite.db")?n.split("SQLite.db")[0]:".db"===n.substring(n.length-3)?n.slice(0,n.lastIndexOf(".")):n}setPathSuffix(n){let t=n.slice(n.lastIndexOf("/")+1);return".db"===n.substring(n.length-3)&&(n.includes("SQLite.db")||(t=n.slice(n.lastIndexOf("/")+1,-3)+"SQLite.db")),t}blob2uint(n){return(0,F.Z)(function*(){return new Response(n).arrayBuffer().then(t=>new Uint8Array(t))})()}uint2blob(n){return(0,F.Z)(function*(){const t=new Blob([n.buffer]);return Promise.resolve(t)})()}render(){}static get assetsDirs(){return["assets"]}get el(){return(0,$t.g)(this)}static get watchers(){return{autoSave:["parseAutoSave"],wasmPath:["parseWasmPath"],pickText:["parsePickText"],saveText:["parseSaveText"],buttonOptions:["parseButtonOptions"]}}};Si.style=":host{display:block;--jeep-sqlite-top:10%;--jeep-sqlite-right:1%;--jeep-sqlite-font-size:2em;--jeep-sqlite-padding:2%;--jeep-sqlite-background-color:#a9a9a9;--jeep-sqlite-color:#ffffff}#fileElem{display:none}#pickButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}#saveButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}"}}]);